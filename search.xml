<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>改善人际关系的产品</title>
      <link href="/2025/12/17/%E6%94%B9%E5%96%84%E4%BA%BA%E9%99%85%E5%85%B3%E7%B3%BB%E7%9A%84%E4%BA%A7%E5%93%81/"/>
      <url>/2025/12/17/%E6%94%B9%E5%96%84%E4%BA%BA%E9%99%85%E5%85%B3%E7%B3%BB%E7%9A%84%E4%BA%A7%E5%93%81/</url>
      
        <content type="html"><![CDATA[<p>这是一个极具潜力的方向。改善人际关系的产品，核心是<strong>解决人与人之间的连接、理解与协作问题</strong>。它不是简单的社交工具，而是融合了心理学、行为设计和技术杠杆的“<strong>关系增强器</strong>”。</p><p>以下是一个系统的产品构思框架，从理念到具体形态，并融入Naval关于“边缘知识”和“提供社会不知如何获得之物”的思想。</p><hr><h3 id="核心理念：从“连接”到“滋养”"><a href="#核心理念：从“连接”到“滋养”" class="headerlink" title="核心理念：从“连接”到“滋养”"></a>核心理念：从“连接”到“滋养”</h3><p>当前社交产品大多解决“<strong>连接</strong>”（微信、Facebook）或“<strong>展示</strong>”（Instagram）问题。但深层次的需求在于“<strong>如何让已有的重要关系变得更健康、更深入、更愉悦</strong>”。这正是社会的“隐性需求”——人们渴望更好的关系，但不知道如何系统性地获得。</p><p><strong>目标</strong>：创造一个“<strong>关系健康教练</strong>”或“<strong>情感健身房</strong>”。</p><hr><h3 id="潜在产品形态与功能模块"><a href="#潜在产品形态与功能模块" class="headerlink" title="潜在产品形态与功能模块"></a>潜在产品形态与功能模块</h3><h4 id="形态一：为特定关键关系设计的“协同工具”"><a href="#形态一：为特定关键关系设计的“协同工具”" class="headerlink" title="形态一：为特定关键关系设计的“协同工具”"></a>形态一：为特定关键关系设计的“协同工具”</h4><ul><li><strong>核心理念</strong>：将关系改善“任务化”、“游戏化”、“可视化”，创造共同经历和正向反馈。</li><li><strong>产品示例</strong>：<ol><li><strong>双人&#x2F;家庭“关系仪表盘”App</strong>：<ul><li><strong>功能</strong>：连接伴侣或家人后，App会基于积极心理学和“爱的语言”理论，推送个性化的小任务。</li><li><strong>“边缘知识”融合</strong>：积极心理学 + 游戏化设计 + 隐私保护技术。</li><li><strong>具体场景</strong>：<ul><li><strong>周一</strong>：建议“给对方发一条真诚的赞美”。</li><li><strong>周三</strong>：推送一个“15分钟无手机深度对话题卡”（如“分享一个本周的小惊喜”）。</li><li><strong>周末</strong>：推荐一个“协作挑战”，如一起学做一道新菜并上传成果。</li><li><strong>数据可视化</strong>：以温暖、非评判的方式，展示“共同活动时间”、“积极互动趋势”等，庆祝微小进步。</li></ul></li></ul></li><li><strong>团队协作“心理安全”SaaS工具</strong>：<ul><li><strong>功能</strong>：集成在企业通讯工具中，提供匿名情绪反馈、会议效率分析、冲突调解引导模块。</li><li><strong>解决需求</strong>：帮助远程&#x2F;混合办公团队建立信任、减少误解、提升协作幸福感。</li></ul></li></ol></li></ul><h4 id="形态二：基于深度分析的“沟通增强器”"><a href="#形态二：基于深度分析的“沟通增强器”" class="headerlink" title="形态二：基于深度分析的“沟通增强器”"></a>形态二：基于深度分析的“沟通增强器”</h4><ul><li><strong>核心理念</strong>：利用技术（如AI）充当沟通的“第三只眼”和“翻译官”，化解误解，促进共情。</li><li><strong>产品示例</strong>：<ol><li><strong>AI 沟通教练（模拟与复盘工具）</strong>：<ul><li><strong>功能</strong>：用户可以在与重要人物进行艰难对话（如谈判、道歉、提要求）前，与AI进行角色扮演模拟。事后，可复盘自己的沟通模式。</li><li><strong>“边缘知识”融合</strong>：非暴力沟通原则 + 对话分析AI + 认知行为疗法框架。</li><li><strong>价值</strong>：提供一个无风险、可反复练习的“情感健身房”。</li></ul></li><li><strong>实时沟通辅助工具（极谨慎的伦理设计）</strong>：<ul><li><strong>功能</strong>：在视频&#x2F;语音通话中，实时分析语音语调、关键词，在侧边栏给出温和提示（如“对方语速加快，可能感到压力，尝试总结一下他的观点”或“你刚刚用了‘总是’这个词，可能引发反驳”）。</li><li><strong>关键</strong>：必须<strong>高度透明、用户可控、以促进理解为唯一目的</strong>，绝不能成为监控或操纵工具。</li></ul></li></ol></li></ul><h4 id="形态三：基于社群的“关系知识”平台"><a href="#形态三：基于社群的“关系知识”平台" class="headerlink" title="形态三：基于社群的“关系知识”平台"></a>形态三：基于社群的“关系知识”平台</h4><ul><li><strong>核心理念</strong>：将分散的、基于个人经验的“关系智慧”结构化、产品化。</li><li><strong>产品示例</strong>：<ol><li><strong>“关系百宝箱”订阅服务</strong>：<ul><li><strong>功能</strong>：提供精心设计的、可打印或线上使用的对话卡片、冲突解决流程图、家庭会议议程模板、亲子活动指南等。</li><li><strong>“边缘知识”融合</strong>：家庭治疗模型 + 平面设计 + 订阅制商业模式。</li></ul></li><li><strong>情景化解决方案库</strong>：<ul><li><strong>功能</strong>：用户输入关系类型和具体情境（如“和青春期的孩子就玩游戏冲突”、“与配偶分摊家务不均”），平台从心理学书籍、专家访谈、社区优质回答中，整合出一套“行动指南”（包含沟通话术、可选方案、常见误区）。</li></ul></li></ol></li></ul><hr><h3 id="商业模式与增长策略"><a href="#商业模式与增长策略" class="headerlink" title="商业模式与增长策略"></a>商业模式与增长策略</h3><ul><li><strong>商业模式</strong>：<ul><li><strong>Freemium</strong>：基础工具免费，高级分析、个性化计划、专家内容付费。</li><li><strong>订阅制</strong>：为家庭或团队提供按月&#x2F;年的订阅服务。</li><li><strong>B2B2C</strong>：将团队版工具销售给企业，作为员工福利。</li></ul></li><li><strong>增长策略</strong>：<ul><li><strong>口碑驱动</strong>：这类产品极度依赖信任和口碑。从“早期采用者”（如心理咨询师、关系教练、HR管理者）开始，让他们成为推荐者。</li><li><strong>内容营销</strong>：通过输出高质量的心理学普及内容、关系维护知识来吸引用户，展示专业度。</li><li><strong>场景化合作</strong>：与婚恋机构、企业管理培训、亲子教育平台合作。</li></ul></li></ul><hr><h3 id="成功的关键与风险预警"><a href="#成功的关键与风险预警" class="headerlink" title="成功的关键与风险预警"></a>成功的关键与风险预警</h3><ol><li><strong>信任与隐私是生命线</strong>：所有数据必须加密，用户拥有完全控制权。产品理念必须是“赋能用户”而非“评判或控制关系”。</li><li><strong>科学性是根基</strong>：功能设计必须有扎实的心理学、社会学理论支撑，避免肤浅的“鸡汤”或可能有害的建议。</li><li><strong>避免制造焦虑</strong>：产品应传递“关系需要经营，而我们可以提供工具”的积极信息，而非“你的关系有病，需要治疗”的焦虑感。</li><li><strong>伦理边界清晰</strong>：特别是涉及AI分析时，必须设立严格的伦理委员会，防止技术被滥用。</li></ol><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>一个成功的“改善人际关系的产品”，本质是<strong>将抽象的“关系经营能力”转化为可操作、可练习、可反馈的数字化服务</strong>。它提供的正是Naval所说的“社会不知道如何系统获得的东西”——<strong>一套科学、温暖、有效的关系维护方法论和工具集</strong>。</p><p><strong>你的机会在于</strong>：将你对人际关系、心理学、行为设计的热情（你的“边缘知识”），转化为一个具体、可信、有爱的产品，去满足这个庞大而深刻的人类需求。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>让人们准确找到他们想要的东西</title>
      <link href="/2025/12/17/%E8%AE%A9%E4%BA%BA%E4%BB%AC%E5%87%86%E7%A1%AE%E6%89%BE%E5%88%B0%E4%BB%96%E4%BB%AC%E6%83%B3%E8%A6%81%E7%9A%84%E4%B8%9C%E8%A5%BF/"/>
      <url>/2025/12/17/%E8%AE%A9%E4%BA%BA%E4%BB%AC%E5%87%86%E7%A1%AE%E6%89%BE%E5%88%B0%E4%BB%96%E4%BB%AC%E6%83%B3%E8%A6%81%E7%9A%84%E4%B8%9C%E8%A5%BF/</url>
      
        <content type="html"><![CDATA[<p>这是一个非常核心且价值巨大的问题。要让人们准确找到他们想要的东西，关键在于理解一个深刻的矛盾：<strong>人们往往无法清晰描述自己“想要什么”，但他们的行为、痛点和未满足的需求会告诉你答案。</strong></p><p>以下是实现这一目标的分步框架和策略：</p><hr><h3 id="第一步：重构问题——从“寻找”到“匹配与发现”"><a href="#第一步：重构问题——从“寻找”到“匹配与发现”" class="headerlink" title="第一步：重构问题——从“寻找”到“匹配与发现”"></a>第一步：重构问题——从“寻找”到“匹配与发现”</h3><p>人们不是在“寻找”一个物品清单，而是在寻找一个<strong>能解决自己问题、满足自己感受或达成某个目标的解决方案</strong>。</p><ul><li><strong>用户目标</strong>：可能是功能性的（如“快速到达机场”）、情感性的（如“减压放松”）或社会性的（如“在朋友圈获得认可”）。</li><li><strong>你的角色</strong>：是做一个<strong>翻译者、向导和信任的顾问</strong>，而不仅仅是一个搜索工具。</li></ul><hr><h3 id="第二步：建立精准连接的三大支柱"><a href="#第二步：建立精准连接的三大支柱" class="headerlink" title="第二步：建立精准连接的三大支柱"></a>第二步：建立精准连接的三大支柱</h3><h4 id="支柱一：深度理解用户"><a href="#支柱一：深度理解用户" class="headerlink" title="支柱一：深度理解用户"></a>支柱一：<strong>深度理解用户</strong></h4><p>用户自己描述的需求（显性需求）常常是片面的，甚至具有误导性。你需要挖掘其背后的<strong>真实意图、场景和深层动机</strong>。</p><ul><li><strong>方法</strong>：<ul><li><strong>行为分析</strong>：跟踪用户的搜索、浏览、点击、收藏、购买、退货、评价等全链路行为。行为比语言更真实。</li><li><strong>场景还原</strong>：他在什么情况下有这个需求？（例如：深夜临时要准备一份明早的会议礼物 vs. 提前一个月为好友挑选生日礼物。）</li><li><strong>分层需求</strong>：使用“<strong>任务-功能-情感-意义</strong>”模型。<blockquote><p><strong>例如，用户搜索“最好的无线耳机”</strong>。</p><ul><li><strong>任务</strong>：听音乐&#x2F;开会。</li><li><strong>功能需求</strong>：音质好、降噪、续航长。</li><li><strong>情感需求</strong>：不想被外界打扰，享受独处时光，或在通勤中感到愉悦。</li><li><strong>意义需求</strong>：希望通过使用某品牌产品，体现自己专业&#x2F;懂行&#x2F;有品位。</li></ul></blockquote></li></ul></li></ul><h4 id="支柱二：极致结构化信息"><a href="#支柱二：极致结构化信息" class="headerlink" title="支柱二：极致结构化信息"></a>支柱二：<strong>极致结构化信息</strong></h4><p>信息是连接用户与物品的桥梁。这座桥必须清晰、多维度、可导航。</p><ul><li><strong>方法</strong>：<ul><li><strong>多维度标签体系</strong>：为每个物品&#x2F;内容打上丰富的、标准化的标签（如：<strong>属性</strong>、<strong>场景</strong>、<strong>人群</strong>、<strong>情感</strong>、<strong>风格</strong>、<strong>解决方案</strong>）。</li><li><strong>动态关系图谱</strong>：建立“用户画像-标签-物品”之间的智能关联。当系统判断一个用户是“科技极客”，就应优先呈现那些被同类用户好评的、参数硬核的产品。</li><li><strong>内容与社区驱动</strong>：用户评价、专业测评、教程、搭配指南、社区讨论（如“露营新手必买的十件装备”），这些内容能<strong>激发需求、辅助决策、建立信任</strong>。</li></ul></li></ul><h4 id="支柱三：智能、人性化的连接引擎"><a href="#支柱三：智能、人性化的连接引擎" class="headerlink" title="支柱三：智能、人性化的连接引擎"></a>支柱三：<strong>智能、人性化的连接引擎</strong></h4><p>这是将理解和信息转化为行动的技术核心。</p><ul><li><strong>方法</strong>：<ul><li><strong>多层混合推荐系统</strong>：<ul><li><strong>协同过滤</strong>：“喜欢A的人也喜欢B。”</li><li><strong>内容过滤</strong>：“这个商品在功能&#x2F;属性上与你喜欢的商品匹配。”</li><li><strong>场景感知</strong>：根据时间、地点、天气、设备自动调整结果（如雨天推荐外卖、深夜推荐静音游戏）。</li><li><strong>探索与利用的平衡</strong>：在推荐“你会喜欢”的（利用）和“你可能会喜欢的新奇事物”之间（探索）保持平衡。</li></ul></li><li><strong>对话式搜索与引导</strong>：用多轮问答、筛选、比较的方式，帮助用户理清需求。例如：<blockquote><p>用户： “我想去个暖和的地方旅行。”<br>系统： “这次旅行您更看重美食、自然风光，还是文化历史？预算大概多少？计划去几天？”</p></blockquote></li><li><strong>可视化与即时反馈</strong>：强大的筛选器、并排对比功能、实时预览效果（如AR试妆、家具摆放），能让决策更直观。</li></ul></li></ul><hr><h3 id="第三步：超越“准确”——实现“愉悦的发现”"><a href="#第三步：超越“准确”——实现“愉悦的发现”" class="headerlink" title="第三步：超越“准确”——实现“愉悦的发现”"></a>第三步：超越“准确”——实现“愉悦的发现”</h3><p>最高境界不仅是“找到你要的”，更是“<strong>发现你没想到但很爱的</strong>”。</p><ul><li><strong>个性化惊喜</strong>：基于对你的深度了解，在合适时机推荐能带来“Aha！”时刻的东西。（如音乐平台的“每周发现”歌单）</li><li><strong>叙事性引导</strong>：通过“故事”、“清单”、“搭配”来呈现。例如，不是卖一件风衣，而是展示“秋季法式复古通勤穿搭”中的核心单品。</li><li><strong>信任代理</strong>：成为一个可信赖的“品味定义者”。当人们不确定自己想要什么时，他们选择信任某个平台、博主或社区的品味（如“小红书种草”、“什么值得买”）。</li></ul><hr><h3 id="总结：一个成功的模型"><a href="#总结：一个成功的模型" class="headerlink" title="总结：一个成功的模型"></a>总结：一个成功的模型</h3><p><strong>精准连接 &#x3D; 读懂用户（行为+场景+深层需求） + 组织世界（结构化信息+关系图谱） + 智能匹配（混合推荐+交互引导） + 创造惊喜（探索+叙事+信任）</strong></p><p><strong>如果你是在构建一个产品（电商、内容平台、工具），</strong> 请思考：你的系统在以上每个环节做得如何？<br><strong>如果你是在提供个人服务（咨询、导购、内容创作），</strong> 请思考：你是否在像这个系统一样，与你的用户&#x2F;读者对话？</p><p>最终，最准确的“寻找”，是让这个过程本身成为一种<strong>低摩擦、高信任、甚至充满愉悦感的发现之旅</strong>。当用户觉得“你懂我”，他们就找到了。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>如何不靠运气变得富有</title>
      <link href="/2025/12/17/%E5%A6%82%E4%BD%95%E4%B8%8D%E9%9D%A0%E8%BF%90%E6%B0%94%E5%8F%98%E5%BE%97%E5%AF%8C%E6%9C%89/"/>
      <url>/2025/12/17/%E5%A6%82%E4%BD%95%E4%B8%8D%E9%9D%A0%E8%BF%90%E6%B0%94%E5%8F%98%E5%BE%97%E5%AF%8C%E6%9C%89/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Naval 是美国风险投资家，这是他的3小时长播客《如何不靠运气变得富有》的中文翻译，介绍了他的财富观，非常值得一读。</p></blockquote><h2 id="第一条：追求财富，而不是金钱或地位"><a href="#第一条：追求财富，而不是金钱或地位" class="headerlink" title="第一条：追求财富，而不是金钱或地位"></a>第一条：追求财富，而不是金钱或地位</h2><p>Nivi：你可能听说过Naval在推特上进行的那一波主题为“如何在不只依靠运气的情况下致富”的推特风暴（tweetstorm）。我们借助这个播客回顾大部分的推文，给Naval一个机会详细聊聊这些话题。他可能会提出一些以前没有发表过的想法。</p><p>Naval是AngelList创始人和Epinions的联合创始人。他是一位眼光独到的科技投资人，投出了像Twitter、Uber这样的科技公司。</p><p>不只是科技行业的人，各行各业的人都想知道<strong>如何解决他们「钱的问题」</strong>。每个人都隐约地意识到自己想要变得富有，但是他们没有一套好的原则来遵守和践行。</p><h3 id="财富是你睡觉时还能产生收入的资产"><a href="#财富是你睡觉时还能产生收入的资产" class="headerlink" title="财富是你睡觉时还能产生收入的资产"></a>财富是你睡觉时还能产生收入的资产</h3><p>Nivi：财富、金钱和地位有什么区别?</p><p>Naval：财富是你渴望的东西，是你睡觉时还在产生收入的财产。举例来说，财富是在夜间还能运行的为其他客户服务的计算机程序。财富是你存在银行里的钱，用于再投资其他资产和业务。</p><p>房子是财富的一种形式，因为你可以把它租出去，收得租金，尽管这是一种比经营商业企业更低效的土地使用方式。</p><p>我对财富的定义是指那些可以在<strong>你睡觉时依然可以为你赚钱的企业和资产</strong>。</p><h3 id="财富的终极目标是自由"><a href="#财富的终极目标是自由" class="headerlink" title="财富的终极目标是自由"></a>财富的终极目标是自由</h3><p>你渴望财富，是因为它能给你带来自由。也就是说，你不必像白领那样一丝不苟的系领带；你不必早上6点就起床、996挤地铁上下班；你不必把时间浪费在一份没有灵魂，你不喜欢的工作上。</p><p><strong>我们创造财富就是为了自由，仅此而已</strong>。而不是去买毛皮大衣，不是去开法拉利，不是去驾驶游艇，也不是去乘坐湾流飞机环游世界。那些东西很快就会变得无聊和愚蠢。它（财富）是关于<strong>你如何成为你自己的事</strong>。</p><p>除非你真的想要财富，否则你不会得到它。全世界都想要它，全世界都在为此努力。在某种程度上，它是有竞争力的。这是一个正和博弈，但其中也有竞争因素，因为现在社会上的资源是有限的。为了获得资源去做你想做的，你必须脱颖而出。</p><h3 id="金钱是我们转移财富的方式"><a href="#金钱是我们转移财富的方式" class="headerlink" title="金钱是我们转移财富的方式"></a>金钱是我们转移财富的方式</h3><p>金钱是社会信用，它是一种从别人的时间中获得信用和债务的能力。如果我做对了工作，为社会创造了价值，社会会说：“哦，谢谢你。我们欠你一些东西，将来会补偿你。这是我的借条，我们把它叫做钱吧。”</p><p>钱会贬值是因为,</p><ul><li>人们偷了借据</li><li>政府增发货币</li><li>人们违背IOU</li></ul><p>但是金钱试图成为社会的一个可靠的欠条，因为你在为自己的付出而被他人亏欠。我们把这些欠条到处传递，金钱是我们转移财富的方式。</p><h3 id="地位是你在社会等级中的地位"><a href="#地位是你在社会等级中的地位" class="headerlink" title="地位是你在社会等级中的地位"></a>地位是你在社会等级中的地位</h3><p>人生基本上有两大游戏。一个是金钱游戏。钱并不能解决你所有的问题，但它会解决你所有的和钱相关的问题。我想大家都能意识到这一点，所以才想赚钱。同时，在内心深处，许多人认为他们做不到，所以他们不希望任何财富创造发生。他们攻击那些赚钱的企业和企业家们，说他们：“赚钱是罪恶的。你不应该这么做。”但他们实际上在玩另一个游戏，那就是地位游戏。他们试图传递一种信息“我不需要钱，我们不要钱。”</p><p>地位指的是你在社会等级中的地位。</p><p><strong>财富不是零和游戏</strong>。世界上每个人都可以拥有一所房子，你有房子并不会影响我有房子的能力。如果有什么区别的话，建造的房屋越多，建造房屋就越容易，我们对建造房屋的了解就越多，就会有更多的人拥有房屋。</p><p><strong>财富是一个正和游戏</strong>。我们一起创造，努力创造着寄托着我们美好期待的“艺术品”来解释我们正在做的事情。最终，一些全新的东西将被创造出来。这是一个正和游戏。</p><p>另一方面，<strong>地位是一个零和游戏</strong>。这是一个非常古老的游戏。我们从原始人部落开始就玩这个游戏了。也就是等级制度。老大是谁？老二是谁？老三是谁？老三打败了老二，老二就必须让位。所以，地位是一个零和游戏。</p><h2 id="第二条：为世界创造更多"><a href="#第二条：为世界创造更多" class="headerlink" title="第二条：为世界创造更多"></a>第二条：为世界创造更多</h2><p><em>财富不是从别人那里拿走什么，而是为这个世界创造更多</em></p><h3 id="财富创造带来了世界的丰富"><a href="#财富创造带来了世界的丰富" class="headerlink" title="财富创造带来了世界的丰富"></a>财富创造带来了世界的丰富</h3><p>Naval：有一种观点认为赚钱是邪恶的，这个说法好像起源于“金钱是万恶之源”。人们认为银行家偷走了我们的钱，这在某种程度上是正确的，在世界上的很多地方，有很多偷窃行为一直在发生。</p><p>从某种意义上说，世界的历史就是创造者和索取者之间的捕食者&#x2F;被捕食者关系。有些人走出去创造东西，建造东西，努力创造机会。有些人带着剑、枪，或者经济上我们说税收、裙带资本主义，共产主义等等形式，进行着不同形式的偷窃。即使在自然界，寄生生物也比非寄生生物多。你身上有很多寄生虫，它们靠你生存。好的情况是共生，他们会回馈一些东西。但也有很多只是索取。这就是任何复杂系统的本质。</p><p>我关注的是真正的财富创造。这不是仅为了赚钱，不是单纯从别人那里拿东西。</p><p>显而易见的是，工作不是有限的，财富也不是有限的。否则，我们还会坐在洞穴里，琢磨着如何瓜分柴火，或者偶尔运气好时捕食到的一些死鹿。</p><p>人类文明中的大部分财富，事实上是全部财富，都是被创造出来的。它是从某处产生的。它是由人创造，由科技创造，由生产力创造的。它是通过努力创造出来的。这种被窃取的想法是一种可怕的零和游戏，人们试图获得地位的游戏。</p><h3 id="每个人都可以变得富有"><a href="#每个人都可以变得富有" class="headerlink" title="每个人都可以变得富有"></a>每个人都可以变得富有</h3><p>但现实是，每个人都可以变得富有。我们可以看到，在第一世界国家，基本上每个人都比200年前活着的人富有。200年前，没有人使用抗生素，没有人有汽车，没有人能用电，没有人有iPhone。所有这些都是使我们作为一个物种变得更富有的发明。今天，我宁愿在第一世界国家做一个穷人，也不愿在路易十四的法国做一个富人。这是因为财富的创造。</p><p>技术的引擎是科学，其目的是创造丰富性。所以，我认为从根本上来说，每个人都可以变得富有。</p><p>我想让你们想象这样一种情形。如果每个人都掌握一个好的软件工程师和一个好的硬件工程师的技能，你可以自己造机器人，开发程序，自己建桥，并为它们编程。假设每个人都知道怎么做。</p><p>那你认为20年后的社会会是什么样子？我的猜测是，我们会造出各种各样的机器人、机器、软件和硬件来做任何事情。我们都会生活得非常富足。我们基本上就退休了，因为我们都不用为任何基本的东西工作。我们甚至会有机器人护士，会有机器驱动的医院，会有自动驾驶汽车。我们会有100%自动化的农场，会有清洁能源。那时，我们可以利用技术上的突破来得到我们想要的一切。如果有人还在工作，那么他们是在用工作来表达他们的创造力。</p><p>我不认为资本主义是邪恶的。资本主义实际上是好的，它只是被劫持了，被不当的外部成本定价所劫持。它被不正当的收益所劫持，在那里有腐败，或者有垄断。</p><h2 id="第三条：自由市场是人类固有"><a href="#第三条：自由市场是人类固有" class="headerlink" title="第三条：自由市场是人类固有"></a>第三条：自由市场是人类固有</h2><p><em>我们是唯一跨越基因界限进行合作的动物，因为我们可以在自愿的交换中追踪信用（credit）和债务（debt）</em></p><h3 id="自由市场是人类社会固有的"><a href="#自由市场是人类社会固有的" class="headerlink" title="自由市场是人类社会固有的"></a>自由市场是人类社会固有的</h3><p>Naval：全面的资本主义(意味着自由市场)是人类社会固有的。资本主义不是我们发明的，甚至不是我们发现的东西。它天然存在于我们的每一次交换中。当你和我交换信息时，你一定想从我这里得到一些信息。如果我们没有良好的信息交流，你会去找别人。所以，交换就是在记录信用和债务，这是我们作为灵活的社会动物与生俱来的本领。</p><p>我们是动物王国中唯一跨越种群进行合作（协作）的动物。大多数动物只会成群合作，共同进化，它们血液相连，所以它们有一些共同的兴趣。人类没有这种成群合作的能力，也不需要这么麻烦。就算你是塞尔维亚人，他是波斯人，我是印度人，没有任何血缘关系，但我们仍然可以合作。</p><p>什么让我们合作？因为我们可以记录借方和贷方。谁投入了多少工作？谁贡献了多少？这就是自由市场资本主义。因此，我坚信这是人类与生俱来的，我们将为每个人创造越来越多的财富。</p><p>每个人都可以变得富有，每个人都可以退休，每个人都可以成功。这只是一个<strong>教育和欲望</strong>的问题。前提是你必须想要它。如果你不想要，没关系，没人强迫你参与游戏。但是不要试图贬低那些积极参与游戏的人。他们没准儿就是那些能让你晚上睡在温暖舒适的床上，让你能更方便的买到全世界的东西，让你能拿着嗡嗡作响的iPhone开心刷抖音的人。因此，这是一场美妙的比赛，值得我们从伦理上、理性上、道德上去挑战一次。它将继续使我们所有人越来越富有，直到我们为任何想要的人创造大量财富。</p><h3 id="太多的索取者而没有足够的创造者将使一个社会陷入毁灭"><a href="#太多的索取者而没有足够的创造者将使一个社会陷入毁灭" class="headerlink" title="太多的索取者而没有足够的创造者将使一个社会陷入毁灭"></a>太多的索取者而没有足够的创造者将使一个社会陷入毁灭</h3><p>Nivi：不只是个人在暗地里鄙视财富，对吧？有些国家、团体和政党公然蔑视财富。至少看起来是这样。</p><p>Naval：没错。这些国家、政党和团体正在沦为一场零和博弈。在摧毁财富创造的过程中，他们把每个人都拉低到和他们一样的水平。</p><p>这就是为什么美国是一个非常受移民欢迎的国家，因为美国梦。显然，不同的人对财富的定义是不同的。第一世界公民对财富的定义可能是，“我一定要赚到数百万美元。而对于第三世界的贫穷移民来说，当刚进入这个国家的时候，我们只是贫穷的移民，对财富的预期值会更低。它可能只是，“我不需要在我的余生做我不想做的体力劳动。”</p><p>但是鄙视它的群体会把整个群体带到和他们一样的水平。如果有太多的索取者，而没有足够的创造者，社会就会分崩离析。你最终会变成一个共产主义国家。看看委内瑞拉就知道，他们不停的忙于获取、分割和重新分配，人们在街上挨饿，每年都因为饥饿而失去几公斤的体重。</p><p>另一种思考方式是想象一个有太多寄生虫的有机体。你需要少量的寄生虫来保持健康。你需要很多的共生体。所有细胞中帮助我们呼吸和燃烧氧气的线粒体。这些是帮助我们生存的共生体。没有他们我们无法生存。</p><p>但是，对我来说，他们（共生体）是一起创造财富的伙伴，共同创造了人类的身体。但是如果你体内充满了寄生虫，如果你感染了蠕虫，或者病毒，或者细菌，而这些都是单纯的寄生，你就会死亡。所以，任何生物都只能抵抗少量的寄生虫。当寄生元素失去控制时，你就死定了。</p><p>我说的还是道德财富创造，不是垄断，也不是裙带资本主义。我说的是自由思想，自由市场。人与人之间的小规模交流是自愿的，不会对他人产生太大的影响。我认为这种财富创造，如果一个社会不尊重它，如果一个群体不尊重它，那么这个社会就会陷入毁灭和黑暗。</p><h2 id="第四条：致富与运气无关"><a href="#第四条：致富与运气无关" class="headerlink" title="第四条：致富与运气无关"></a>第四条：致富与运气无关</h2><h3 id="致富与运气无关，要掌握致富的技能"><a href="#致富与运气无关，要掌握致富的技能" class="headerlink" title="致富与运气无关，要掌握致富的技能"></a>致富与运气无关，要掌握致富的技能</h3><p>Naval：很明显，我们想要在这一生中不只依靠运气变得富有。很多人认为赚钱是靠运气。它不是，关键是你要成为那种能赚钱的人。比如，假设我输光了所有的财产，你把我随便扔到任何一个说英语的国家的大街上，不出5到10年，我就会再次变得富有（笑）。因为这是一种技能，而且我认为每个人都可以拥有这种技能。在1000个平行宇宙中，你想在其中999个里变得富有。你不想只在靠运气成分的50个里面变得富有对吧？</p><p>我们在这讲的运气有四种。这个分类来于一本书，a16z的马克·安德森(Marc Andreessen)在Pmarca.com这个博客中曾经提到过。</p><ol><li>狗屎运</li></ol><p>第一种就是狗屎运。你完全无法控制这种走运，俗话说这就是命好。</p><ol start="2"><li>坚持不懈的实干运</li></ol><p>这种幸运来自于坚持、努力、不停的尝试和行动。当你四处奔波创造了各种各样的机会，这期间你输出了很多能量，你做了很多事情，会有大量的能量交换。</p><p>你可能会说，人们只有志趣相投才能聚在一起。那我举另外一个例子，Nenad把他做的很棒的动画视频放到了网上，我在Twitter上看到了它们。从这个意义上说，他通过制作视频创造了自己的运气，直到像我这样的人源源不断找到他。</p><ol start="3"><li>早有预备的运气</li></ol><p>第三种方法是你变得非常善于发现运气。如果你在某个领域非常精通，你会注意到在那个领域幸运的事件是如何发生的。当其他人没有注意到它的时候，你会变得对运气敏感，这是通过技能、知识和工作经验的积累达成的。</p><p>4.独特的人格给你带来的好运</p><p>最后一种运气是最奇怪、最艰难的一种，但这就是我们要讨论的。在这里，你建立了一个独特的人格，一个独特的品牌，一个独特的心态，然后好运会找到你。</p><p>例如，假设你是世界上最擅长深海潜水的人。大家都知道，你会进行别人都不敢尝试的深海潜水。然后，有人幸运的在海岸外发现了一艘沉没的宝藏船。他们没办法拿到，只能跑来找你求助。也就是说，他们的运气同时变成了你的运气，你会因此得到非常丰厚的报酬。这是一个比较极端的例子。那个找到宝藏的幸运儿们，走的是狗屎运。但他们不得不来找你帮忙把宝藏拿出来，最终你会得到一部分这里面的财富，这不是运气。也就是说，虽然这个好运的起始不是你，但是你能让那些发现好运的人在关键时刻想起你，很明显你可以在其中起到不可替代的作用。这种情况下你既成就了别人，又分享了他人的好运，这就是你为什么要打造自己独特的个性和品牌。</p><h3 id="在1000个平行宇宙中，你想在其中999个里变得富有"><a href="#在1000个平行宇宙中，你想在其中999个里变得富有" class="headerlink" title="在1000个平行宇宙中，你想在其中999个里变得富有"></a>在1000个平行宇宙中，你想在其中999个里变得富有</h3><p>Nivi：你刚刚提到，在1000个平行宇宙中，你可以在其中的999个变得富有？我想有些人看到后会说：“这听起来不太可能，太夸张了吧。”</p><p>Naval：不，我不认为这是不可能的。考虑到你的起步条件，我认为你可能得再努力一点。我在印度的时候是个穷孩子，所以如果我能成功，从这个意义上说，任何人都能。很明显，我四肢健全，智力正常，当然我也确实接受了教育。也许有一些前提条件不一样，但如果你在听这个视频或播客，说明你已经掌握了基本的技能，而且有一个功能健全的身体和会思考大脑。</p><p>事实上，一路上我其实遇到了很多倒霉事。我赚的第一笔钱，立刻就在股票市场上赔了个精光。我赚的第二笔钱，或者说我应该赚的第二笔钱，基本上都被我的商业伙伴骗走了。这次（成功）已经是第三次了。</p><p>即便如此，财富的积累仍处于缓慢而稳定的挣扎之中。我这辈子还没一次性赚过一大笔钱，总是一大堆小事堆积在一起。它更多的是通过持续的构建商业（做创业公司）、寻找投资机会来持续创造财富。这绝对不是一步登天的事。</p><h3 id="财富不是一步登天"><a href="#财富不是一步登天" class="headerlink" title="财富不是一步登天"></a>财富不是一步登天</h3><p>我的个人财富不是在某一年产生的，它是一点点堆积起来的，每一个阶段积累一点。更多的选择，更多的生意，更多的投资，才能撬开更多自己能做的事情。和Nenad的illacertus一样，他在油管上做了一系列视频，没有任何一个视频会在一夜之间让他一夜暴富，这绝对是一个漫长的过程，学习，阅读，创造，这期间会产生复利效应。</p><p>我们谈论的是变得富有，这样你就可以退休，你就有更多的自由。退休不是说什么都不做。而是说你不必去任何你不想去的地方，你不必做任何你不想做的事，你想什么时候醒来就什么时候醒来，你想什么时候睡觉就什么时候睡觉，没有老板对你指手画脚。这就是自由。我们谈论的是足够的财富来获得自由。特别是由于互联网的普及，机会到处都是。坦白讲，我有太多的方法来赚钱，我满脑子都是想法，唯一缺的就是时间。创造财富、创造产品、创造企业、创造机会，从社会获得报酬的方式太多了。</p><h2 id="第五条：你必须有点异乎寻常，才能独自走在前沿"><a href="#第五条：你必须有点异乎寻常，才能独自走在前沿" class="headerlink" title="第五条：你必须有点异乎寻常，才能独自走在前沿"></a>第五条：你必须有点异乎寻常，才能独自走在前沿</h2><p>Naval在他的博客中还提到了一些关于第四种运气的有趣例子，但我想让读者了解的一点是，第四种运气其实是来自于你异乎寻常（这里用了eccentric这个词）的行为，所以有时候异乎寻常可能并不是一件坏事。</p><p>Naval：没错，因为这个世界非常讲求效率，每个人都在明显的地方挖掘着新奇的、未被发现的东西，这会帮助你建立优势。独自走在前沿可能需要你有点异乎寻常，而且愿意比一般人挖掘得更深，挖掘的更深仅仅因为你感兴趣。</p><p>Nivi：对，除了本杰明·迪斯雷利的那句话外，我看过的两句表达这种运气的话，一个是山姆·阿尔特曼（Samuel Altman）说的，“极端的人才能得到极端的结果。”“我认为这句话很好。还有另一个来自斯坦福大学教授杰弗里·普费弗（Jeffrey Pfeffer）的观点，“你不可能既正常又期待异常回报。”</p><p>Naval：是的。我喜欢的一句与之完全相反的话是，“玩愚蠢的游戏的人赢愚蠢的奖品。”“很多人花很多时间在社交媒体上，比如你试图在Twitter上提高你的社会地位，但你基本上赢得了愚蠢的、价值不大的社交奖项。</p><p>Nivi：我想我从这篇博客文章中得到的最后一个观点是，除了狗屎运，你应该去追求这几种运气（尤其是最后一个），这会让你变得越来越幸运。</p><p>Naval：是的，起码能回归均值（笑）。所以，你至少要中和运气，这样才能更好的发挥你自己的才能。</p><h2 id="第六条：出租时间不会让你变得富有"><a href="#第六条：出租时间不会让你变得富有" class="headerlink" title="第六条：出租时间不会让你变得富有"></a>第六条：出租时间不会让你变得富有</h2><h3 id="出租时间不会让你变得富有，因为你不能非线性地赚钱"><a href="#出租时间不会让你变得富有，因为你不能非线性地赚钱" class="headerlink" title="出租时间不会让你变得富有，因为你不能非线性地赚钱"></a>出租时间不会让你变得富有，因为你不能非线性地赚钱</h3><p>Nivi：接下来你会详细介绍如何致富，以及什么不会有助于致富。第一点是：“出租你的时间不会让你变得富有。<strong>你必须拥有公司的股权，才能获得财务自由。</strong>”</p><p>Naval：这可能是最重要的一点。人们似乎认为你可以创造财富，通过工作致富。这可能行不通，原因有很多。最根本的原因是，你的投入和产出相关性太强。几乎在任何有薪水的工作中，即使是像律师或医生这样每小时报酬很高的工作，你仍然在投入时间，你的报酬是按每小时或工作量计价。因此，这意味着当你睡觉的时候，在度假的时候，你没有在创造财富；一旦你退休了，你就没有收入了（退休金另当别论）。也就是说，你不可能得到非线性的收入。</p><p>如果你看到一些医生非常富有，那是因为他们成立了公司，开了私人诊所。他们通过私人诊所建立了一个品牌，为他们带来持续的口碑和客户。或者他们制造了某种医疗设备或一个程序，且拥有这些东西的知识产权。</p><p>因此，本质上你是在为别人工作，而那个人承担了风险和责任，掌握着知识产权，有品牌。所以，他们不会给你足够的工资，他们会付给你最低工资，让你做他们需要的工作。这可能是一个很高的最低限度，但仍然不是你想象的退休后真正的财富。</p><h3 id="出租时间赚钱意味着你很容易被替代"><a href="#出租时间赚钱意味着你很容易被替代" class="headerlink" title="出租时间赚钱意味着你很容易被替代"></a>出租时间赚钱意味着你很容易被替代</h3><p>最后，你甚至没有为社会创造出那么多原创的东西。正如我所说，这场推特风暴应该被称为“如何创造财富”，只不过“如何致富”是一个更吸引人的标题罢了。因为你现在扮演的是固定的角色，而大多数固定角色的任务是可以教会的。如果他们能像在学校那样被教授，那么最终你将会和一个更年轻的、拥有最新知识的人竞争，这个人注定是要取代你的。</p><p>更可能的是，你做的工作最终会被机器人或人工智能取代。它甚至不需要一夜之间取代，它可以一次替换一点。所以，基本上在出租时间的模式下（也就是打工），投入和产出是匹配的，但我不认为这是真正创造财富的方式。</p><h3 id="你必须拥有股权才能获得财务自由"><a href="#你必须拥有股权才能获得财务自由" class="headerlink" title="你必须拥有股权才能获得财务自由"></a>你必须拥有股权才能获得财务自由</h3><p>所以每个真正想要致富的人在某种程度上都拥有一个产品，一个企业，或者某种知识产权。它可以是股票或者期权，这也是为什么很多人选择在早期科技公司工作。这是一个很好的开始方式。</p><p>但通常真正的财富是通过创办自己的公司，甚至是通过投资来创造的。投资一家公司或者说入股，其实有很多通往财富的路径并不按照小时计数。</p><h3 id="追求一份投入与产出“不匹配”的工作"><a href="#追求一份投入与产出“不匹配”的工作" class="headerlink" title="追求一份投入与产出“不匹配”的工作"></a>追求一份投入与产出“不匹配”的工作</h3><p>为什么你真的需要追求一份投入和产出“不匹配”的工作或者职业，这将会在之后的推特风暴中提到。拥有高创造力和高影响力的企业往往是那些你可以工作一小时的企业，这一小时可能会产生巨大的影响；或者你做了1000个小时的工作，但是没有效果。</p><p>我们拿软件行业为例。一方面，一个伟大的工程师可以创造比特币，创造数十亿美元的价值。另一方面，如果一个工程师一直在错误的方向下功夫，或者做得不够好、不够有创意、深思熟虑等等。就算他辛勤工作整整一年，他们发布的每一段代码最终都不会被使用，他都不会有用户。这是一个投入和产出高度分离的行业的例子，它不是以你投入的时间多少来衡量产出的。</p><p>再举一个极端的例子，假设你是世界上最好的伐木工人，如果你不用工具，或用最简单的工具（比如一把斧子或者一把锯子）伐木，你也只会比最差的伐木工人强三倍，因为投入和产出是有很强的相关性的，不会有很大的区别。</p><p>因此，你要寻找投入和产出高度不相关的职业。这是另一种可以产生杠杆效应的方式。我说的杠杆并不是指华尔街讲的金融杠杆，这个“杠杆”名声不好。我说的杠杆是指工具，人类擅长使用的工具。计算机是软件工程师使用的工具。对于一个伐木工人，如果有推土机、自动机械轴和锯子，他就会使用这些工具，比那些徒手想要把树连根拔起的人更有影响力。</p><p>工具和杠杆是造成投入和产出之间不匹配的原因。一个职业的创造力成分越高，它就越有可能有不匹配的投入和产出。因此，我认为，如果你考虑从事投入和产出高度相关的职业，那在这个过程中，你很难给社会创造财富，也很难为自己创造财富。</p><h2 id="第七条：我们应该升级自己的自由，而不是生活方式"><a href="#第七条：我们应该升级自己的自由，而不是生活方式" class="headerlink" title="第七条：我们应该升级自己的自由，而不是生活方式"></a>第七条：我们应该升级自己的自由，而不是生活方式</h2><p><em>生活水平远低于其收入水平的人们享受着一种自由，这种自由是那些忙于改善生活方式的人们无法理解的</em></p><p>Nivi：除了把时间租出去之外，还有其他无助于致富的事情吗?</p><p>Naval：有，我之前提到过两条相关的推文。我说的第一个问题是，你的生活方式应该升级，但不应该升级得太快。这句话的大意是说，<strong>生活水平远远低于其收入水平的人享受着一种自由</strong>，而那些忙于提升生活方式的人根本无法体会这种自由。我认为这是非常重要的，不要总是忙于升级你的生活水平。事实上，如果你能在赚越来越多的钱时，保持稳定的生活水平和期望，就不会有太多烦恼。所以，不要总想着住更大的房子，过更奢侈的生活，以及所有类似的贪心。</p><h3 id="世界上最危险的东西是海洛因和月薪"><a href="#世界上最危险的东西是海洛因和月薪" class="headerlink" title="世界上最危险的东西是海洛因和月薪"></a>世界上最危险的东西是海洛因和月薪</h3><p>假设你现在的工资是每小时1000美元，你肯定不是从20美元每小时的月薪立马涨到1000美元，这一定是个漫长职业生涯的积累过程。这里面一个微妙的问题是，你的生活水平会随着你赚的钱越来越多而升级。你会想当然的认为自己赚了钱，就该马上去提升生活水平，但这会使你深陷在工资奴隶的陷阱里。我忘了是谁，可能是纳西姆·塔勒布说的，“<strong>世界上最危险的东西是海洛因和月薪。</strong>”没错，因为它们很容易上瘾。你想要变得富有的方式恰恰是你想要变穷，那时你能做（想做）的事情只有工作，工作，再工作。</p><h3 id="理想的情况是，你的赚钱路径是离散的"><a href="#理想的情况是，你的赚钱路径是离散的" class="headerlink" title="理想的情况是，你的赚钱路径是离散的"></a>理想的情况是，你的赚钱路径是离散的</h3><p>这就是科技产业的运作方式。你十年没赚到钱，然后突然在第11年，你会赚得盆满钵盈。顺便说一下，这就是为什么这些所谓的富人的高边际税率是有缺陷的，因为风险最高，最具创造力的职业一定是，前十年都在赔钱。在冒着巨大的风险时，你会不停的流血，流血，再流血。然后在第11年，或第15年，你可能突然赚到一大笔钱。此时山姆大叔（这里指政府）出现了，说：“嘿，你知道吗，你今年赚了很多钱。因此，你是邪恶的，你必须把一切都交给我们。”因此，它只是摧毁了那些创造性的冒险职业。但理想的情况是，你的致富路径是离散的，循序渐进的。这样你不会期待你的生活水平更新的那么快。一旦你致富之后，你还会选择工作，但你只会在你想做的时候做你想做的事，这才是真正的自由。因此，你会做更多创造性的事情，而减少对钱，对奢侈生活的关注。</p><h2 id="第八条：给社会提供它不知道如何获得的东西"><a href="#第八条：给社会提供它不知道如何获得的东西" class="headerlink" title="第八条：给社会提供它不知道如何获得的东西"></a>第八条：给社会提供它不知道如何获得的东西</h2><p><em>社会会因为你创造了它想要、却不知道如何大规模获取的东西，而给你丰厚的回报</em></p><h3 id="给社会它需要的，但不知道如何规模化获取的东西"><a href="#给社会它需要的，但不知道如何规模化获取的东西" class="headerlink" title="给社会它需要的，但不知道如何规模化获取的东西"></a>给社会它需要的，但不知道如何规模化获取的东西</h3><p>Nivi：你不会因为出租时间而发财的。但你说，“你会通过给社会它想要，但不知道如何规模化获取的东西而致富。”</p><p>Naval：没错。所以本质上，就像我们之前说的，钱是社会给你的欠条，你在过去做了一些好事，社会会为你创造它想要的东西而付钱。但社会还不知道如何创造这些东西，因为如果已经被创造了，他们就不需要你了。<br>几乎所有在你家里、工作场所和街道上的东西曾经都是科技产品。有一段时间石油是一种科技产品，这让洛克菲勒很富有；有段时间汽车是科技产品，这使亨利·福特富有。因此，正如丹尼•希利斯(Danny Hillis)所说，技术只是一套还不太管用的东西。一旦某样东西成功了，它就不再是技术了。所以，社会总是想要新事物。</p><h3 id="想清楚你能提供的产品，然后考虑如何扩大规模"><a href="#想清楚你能提供的产品，然后考虑如何扩大规模" class="headerlink" title="想清楚你能提供的产品，然后考虑如何扩大规模"></a>想清楚你能提供的产品，然后考虑如何扩大规模</h3><p>如果你想要变得富有，弄清楚你可以为社会提供哪些它想要、但还不知道如何获取的东西。并且是你感兴趣、在你的能力范围内能提供的东西。想清楚之后，下一步你要考虑如何规模化。因为如果你只造一个，那是不够的。你必须建造成千上万个，上百万个，甚至数十亿个。最好的情况是，每个人都可以有一个。史蒂夫·乔布斯和他的团队当然知道社会需要智能手机。他们口袋里的电脑拥有所有电话功能的100倍，而且使用方便。所以，他们想出了如何建造它，然后他们想出了如何扩展它。他们想出了如何让每个第一世界国家的公民，最终也让每个第三世界国家的公民，都能拥有一个。正因为如此，他们获得了丰厚的回报，苹果是世界上最有价值的公司。</p><p>Nivi：我想说的是，企业家的工作是为大众市场带来高端产品。</p><p>Naval：它以高端开始。首先，这是一种创造性的行为，<strong>你创造它只是因为你想要它</strong>。你想要它，需要它，所以你知道如何建造它。其实一开始<strong>你是为自己建造它</strong>。然后你要想办法把它带给其他人。然后有一段时间，富人拥有它。比如，富人有私人司机，他们有黑色高档汽车。然后优步（Uber）出现了，它让每个人都有自己的私人司机。现在你甚至可以看到Uber pool正在取代穿梭巴士，因为它更方便。然后scooter共享电动滑板车出现了，市场进一步下沉。所以规模化需要考虑的是，<strong>如何把曾经只是富人拥有的东西给到给每个人</strong>。</p><h2 id="第九条：互联网极大地丰富了职业发展的可能性"><a href="#第九条：互联网极大地丰富了职业发展的可能性" class="headerlink" title="第九条：互联网极大地丰富了职业发展的可能性"></a>第九条：互联网极大地丰富了职业发展的可能性</h2><p><em>互联网会给你的小众兴趣找到买单的人</em></p><h3 id="互联网极大扩展了职业发展的可能性"><a href="#互联网极大扩展了职业发展的可能性" class="headerlink" title="互联网极大扩展了职业发展的可能性"></a>互联网极大扩展了职业发展的可能性</h3><p>Nivi：让我们看看下一条推文，这也是我觉得对于你将从事什么工作或者职业非常隐秘和超级有趣的推文。你说：“互联网极大拓宽了职业发展的可能性，但是大多数人目前并没有察觉到。”</p><p>Naval：互联网最根本的颠覆性是，它使这个星球上的人们能彼此联系，任何一个人只要你想联系总有方法。不论是给他们发邮件，在Twitter上发送推文，还是在Facebook上发布一点他们能看到的动态，或者建立一个他们能来访问的网站。互联网将每一个人都联系在了一起。因此互联网是一个将各个网络连接起来的工具，这就是它的超能力。因此，工具给你了，你要思考怎么去更好的利用它。你要明白，借助互联网，你就总能为你的产品、你的才能、你的技艺找到观众，不论他们来自哪里。</p><p>举个例子，Nenad制作了IIIacertus，试想一下，如果你是在互联网出现之前看到的他的视频，那么他需要怎么做才能让你看到呢？他可能抱着电脑挨家挨户展示给他的邻居们看？或者跑到当地的电影院播放？这都是不可能的，他只有把视频放到互联网上才能达到这个效果。然后在这个世界上又有多少人对它真正的感兴趣呢？或者只是对我们正在讨论的东西感兴趣，真正的吸收？结果会发现只有很少一部分人，所以关键就在能触动<strong>这些人</strong>。</p><h3 id="互联网能让你的小众兴趣找到观众"><a href="#互联网能让你的小众兴趣找到观众" class="headerlink" title="互联网能让你的小众兴趣找到观众"></a>互联网能让你的小众兴趣找到观众</h3><p>互联网最怪异的一点是，它允许各种小众兴趣存在。这就好像养蛇的人、喜欢坐热气球的人、喜欢一人独叶孤舟航游世界的人，亦或是痴迷于微型烹饪的人。就像整个日本的微型烹饪现象一样（哈哈今天刚刚看了一本日本烹饪书叫鸡蛋料理），或者像有一个节目是关于女人帮人收拾家务的节目，对吧？</p><p>因此，无论你拥有多么小众化的兴趣，互联网都能提供给你一个很好的平台去把它规模化。当然，这也不是说你所做的就是下一个Facebook，或者你能获得数以十亿计的用户，但是，如果你仅仅想找到5万个和你一样满怀热情的人，互联网中就有这样一群观众等待着你。</p><p>这个问题的绝妙之处就在于，我们生活的星球上有70亿的人。人类DNA的组合方式达到了难以想像的程度。每个人都是一个完全不同的个体，你不可能遇到另一个一模一样的你。</p><p>这不像你可以说，“恩…，Nivi，离开我的生活吧。这样我可以让Naval进入我的生命中，我就可以有和他同样的感受，得到同样的赞许，有同样的想法。”但事实不是这样的，任何人不是别人的替代品，人与人完全不同的。因此，正是因为每个人有不同的技能、兴趣，才可以在自己独特的事物上发挥创造力。</p><p>但是（在互联网）之前这些并不重要，在前互联网时代，如果你住在意大利的一个小渔村，你的渔村并不一定需要完全独特的技能，那么你就必须遵从现实，从事仅有的工作。但是今天，你可以变得完全独特和独立。</p><p>互联网可以让你低成本的「走出去」，找到属于自己的观众。然后你通过创建业务、创造产品、积累财富，你通过在互联网上展现独特的你让大众获得快乐。你事业的发展空间就会因互联网而扩大，电子竞技玩家，在Fortnite上赚了数百万美元。YouTube广播公司、 博客、播客，让人们能够创建内容和上传视频。我听说乔·罗根（Joe Rogan），他的播客有20亿次下载，这为他每年带来约1亿美元的收入。</p><p>再举一个PewDiePie的例子，前几天，我转发了一条有趣的推文。PewDiePie在新闻媒体中简直就是信任的代名词。这个来自瑞典的小孩，他的热门新闻频道的流量是主流有线网络流量的三倍。而且这仅仅是在他的新闻频道上， 还不算他的娱乐频道。</p><p>可以说互联网为各种小众兴趣提供了沃土，但前提是你要擅于将其壮大发展起来。当然，好消息就是每个人生而不同，每个人都有自己擅长的东西。所以要真实做自己。</p><h3 id="通过做自己来规避无意义的竞争"><a href="#通过做自己来规避无意义的竞争" class="headerlink" title="通过做自己来规避无意义的竞争"></a>通过做自己来规避无意义的竞争</h3><p>还有一条值得一提的推文，它没有被收录到这个推文风暴中。那条是“通过做自己来规避无意义的竞争”。事实上，当你在与人竞争时，往往是因为你在复制别人，因为你在努力干着同样的事情。但是其实每个人生而不同，不要总是忙着复制别人。</p><p>很明显，人类喜欢模仿，René Girard有一套完整的模仿理论很有趣。大家都觉得模仿简单，但其实模仿远比你做自己要难。所以不要纯模仿，不要纯复制，专注于做自己的事情，当你真正在做自己时，你就会发现没有人能和你竞争，就是这么简单。</p><p>因此，你对你自己是谁和你喜欢做什么认识的越深入，你就会面临越少的竞争。也就是说，当你意识到真实做自己没人能和你竞争后，你就能够通过真实性逃离竞争陷阱。但是，这在前互联网时代是没用的建议，而后互联网时代你能将这些变成现实。</p><h2 id="第十条：寻找财富游戏中的长期战友"><a href="#第十条：寻找财富游戏中的长期战友" class="headerlink" title="第十条：寻找财富游戏中的长期战友"></a>第十条：寻找财富游戏中的长期战友</h2><p><em>选择一个你可以和长期伙伴玩长期游戏的行业，所有的回报都来自于多次游戏的复利。</em></p><h3 id="寻找财富游戏中的长期战友"><a href="#寻找财富游戏中的长期战友" class="headerlink" title="寻找财富游戏中的长期战友"></a>寻找财富游戏中的长期战友</h3><p>Nivi：我们来聊聊应该考虑在哪些行业工作？应该做什么样的工作？最好和什么样的人一起工作？这些话题。你说过，“你应该选择的行业是，在这里你有长期战友和你玩长期的游戏。”</p><p>Naval：是的，<strong>这是解释为什么硅谷会成功，也是对高信任度社会能够成功的深刻理解</strong>。事实上，生活中所有的收益都来自于复利。无论是在人际关系中，创造财富中，或是在学习中。因此，复利是一种神奇的力量，如果你以1倍的价格开始，然后如果每年增长20%，并且持续30年，你得到的不只是额外的30年乘以20%。它有复利效应，所以它会增长，增长，增长，最后你得到的回报将会不可思议。不管是善意、爱情、人际关系还是金钱。所以，我认为复利是一种非常重要的力量。</p><p>为什么致富是一场持久战？长期博弈不仅对复利有利，对信任也有利。如果你看一下囚徒困境类型的游戏，囚徒困境的一个解决方案是以牙还牙，也就是我将对你做你上次对我做过的事，如果你犯了错，我会原谅你。但这只适用于重复的囚徒困境的环境中，换句话说，如果我们重复玩一个游戏多次。</p><p>因此，如果你处在这样一种情况下，比如你在硅谷，人们在那里互相做生意。他们彼此了解，相互信任，互相帮助，因为他们知道这个人会在下一场比赛的回合中出现，你迟早会遇到这些人。</p><p>当然，这并不总是奏效。也有情况是，有的人在硅谷一举成名，赚到很多钱，但人们会背叛彼此，因为他们只是想，“我要靠这个发财，我不在乎。”所以，所有这些情况都有例外。</p><p>但本质上，如果你想成功，你必须与他人合作。你必须知道谁可以信任，谁可以长期信任，和你一起在游戏中走下去。所以「复利效应」和「高度信任的圈子」就是你在游戏中生存的武器，同时也是在游戏的周期结束时，让你获利的主要原因。例如，沃伦巴菲特作为美国股票市场的投资者做得非常好，但他能做到这一点的重要原因是因为美国股市一直保持稳定，并且没有碰到美国政府政局非常差的时期，或者是战争时期。总之底层基础设施没有被破坏。因此，对于他来说，他正在玩一场长期比赛。这种信任来自于美国股市的稳定。</p><h3 id="当你转行时，你是在从零开始"><a href="#当你转行时，你是在从零开始" class="headerlink" title="当你转行时，你是在从零开始"></a>当你转行时，你是在从零开始</h3><p>在硅谷，信任来自于小范围内的人际网络，随着时间的推移，你会发现哪些人是你可以合作的，哪些人是你不能合作的。</p><p>如果你不停地更换地点，你就不停地更换团队……假设你从木工行业起步，并在那里建立了一个网络。你努力工作，你试图在木工行业制造产品。然后突然出现了另一个相邻但又不同的行业，但你真的并不了解其中的任何一个人，你想要投身其中，在那里赚钱。如果你持续在工业界跳来跳去——不，实际上我需要打开一系列电动汽车加油站。——这或许有道理。这可能是最好的机会。但是每次你重置时，每次你跳出原来的网络圈时，你都将从零开始。你不知道该相信谁，而且他们也不会很容易相信你。</p><p>当然也存在短暂的行业。他们总是进进出出。政治就是一个例子，对吧？在政治上，新人正在当选。你在政治上会看到，有很多老前辈的地方，比如参议院，这里有在这个行业中已经生存很长时间的人，他们都是职业政治家。对于职业政治家有很多不利因素比如腐败。但好处是他们实际上已经完成了彼此的交易，因为他们知道另一个人将在十年之后处于相同的位置，他们将不得不继续与这些老前辈打交道，所以他们最好学会如何合作。众议院每两年都要举行一次大型选举，选出一批新的众议员，由于一直在相互竞争，几乎任何事情都没法完成。“因为我刚来到这里，我不认识你，我不知道你是否会继续在身边，我为什么要和你合作，而不是只是尝试做我认为正确的事情？”</p><p>因此选择一个你能长期从事的行业、以及长期伙伴是非常重要的。这些人会表明他们会在你身边存在很久，他们是有道德的，他们的道德信条能从他们的行动上体现出来。</p><h3 id="长期游戏中，每个人都在让彼此更富有"><a href="#长期游戏中，每个人都在让彼此更富有" class="headerlink" title="长期游戏中，每个人都在让彼此更富有"></a>长期游戏中，每个人都在让彼此更富有</h3><p><strong>Nivi：在长期游戏中，似乎每个人都在让彼此更富有。而在短期游戏中，似乎每个人都在让自己更富有</strong>。</p><p>Naval：我认为这是一个很棒的形容。在长期游戏中，这是一个正和现象。就好像大家在一起烤一个苹果派，大家都在努力尽可能将它做得越大越好。在短期游戏中，我们是在想方设法分这个派。</p><p>现在这不是在为社会主义者辩解，对吗？这些社会主义者不是参与烘焙派的人，他们最后出现，说”我想要一片，或者整个派。“他们出现时是带着枪的。但是我认为一个好的领导者并不能赢得荣誉。一个好的领导者基本上都在努力激励员工，这样团队才能将工作完成。然后，奖励将按照公平原则进行划分，谁贡献了多少（或尽可能接近）并承担了风险，而不是谁拥有最长的刀…谁有最锋利的刀。</p><h3 id="收益来自重复游戏的复利"><a href="#收益来自重复游戏的复利" class="headerlink" title="收益来自重复游戏的复利"></a>收益来自重复游戏的复利</h3><p>Nivi：因此，接下来的两个推文是，“玩迭代游戏。生活中的所有的回报，不论是财富上的，还是人际关系上的，或者是知识上的都来自复利效应。”</p><p>Naval：当你与一个相处了十年，二十年，三十年的老友做生意时，你根本不需要信任他，事情也可以做得越来越好。因为在相处过程中摩擦逐渐减弱，你们可以一起做越来越大的事情。</p><p>举个极端的例子，最简单的方法是与某人结婚，生孩子然后养孩子，这就是复利（笑）。投资于这些长期的关系，与更随意的关系相比，这些关系最终是无价的。</p><p>在健康和健身方面也是如此。 你的身体越健康，保持健康就越容易。 而你的身体恶化的越多，就越难回到正常的水平。</p><h2 id="第十一条：-选择智慧、精力充沛和正直的合作伙伴"><a href="#第十一条：-选择智慧、精力充沛和正直的合作伙伴" class="headerlink" title="第十一条： 选择智慧、精力充沛和正直的合作伙伴"></a>第十一条： 选择智慧、精力充沛和正直的合作伙伴</h2><p><em>选择高智商、精力充沛、为人正直的伙伴是你不能妥协的三要素</em></p><h3 id="选择高智商、精力和正直的商业伙伴"><a href="#选择高智商、精力和正直的商业伙伴" class="headerlink" title="选择高智商、精力和正直的商业伙伴"></a>选择高智商、精力和正直的商业伙伴</h3><p>Naval：在挑选同事方面，选择那些高智商、精力充沛、正直的人，这是你不能妥协的三个要素。</p><p>你需要和聪明的人共事，至少他们不是在错误的方向上一路向西。你需要与精力充沛的人共事，因为世界上到处都是聪明却懒惰，光想不干的人。在生活中，我们都认识一些非常聪明的人，他们可以不起床，或者动一动手指就完成很多事情。我们也知道有些人精力很旺盛，但并不聪明，他们工作非常非常努力，但有时在朝着错误的方向埋头苦干。smart不是一个贬义词。这并不是说有人聪明，有人愚蠢。我想表达的意思是，每个人在不同的事情上会表现出很聪明的一面。因此，取决于你想做什么，你才可以找到在这方面很聪明的人来帮你。</p><p>然后关于精力，很多时候人们对特定的事情没有动力，但对其他事情有动力。例如，有人可能真的没有动力一天都坐在办公室里工作。但他们可能真的有动力去画画，对吧?</p><p>嗯，那样的话，他们应该是画家。他们应该把自己的艺术放到网上，试着探索如何以此为基础建立自己的事业，而不是认命了，戴着项圈，去做一份乏味的工作。这一定是一个长期的事情，很多人在兴致勃勃的发布第一个作品后，发现没有立马收获1w+粉丝的关注而对自己大失所望，然后以此为由失去动力就放弃了。我想说的是，<strong>做一件事情的动力终究来自于你自己到底想做什么，觉得什么有意义，而不是为了讨好别人</strong>。</p><p>最后一点是正直，正直是最重要的，如果只有另外两个品质，你就选择了一个聪明、勤奋的骗子，他最终会欺骗你。所以，你必须弄清楚这个人是否正直。</p><p>我之前说过，你要通过信号判断。信号是他们做什么，而不是他们说什么。当他们认为没有人在看他们时，他们会做一些非语言的事情。</p><h3 id="动机必须是内在的"><a href="#动机必须是内在的" class="headerlink" title="动机必须是内在的"></a>动机必须是内在的</h3><p>Nivi：Sam Altman之前有个有趣的观点，当谈到委任时，他说：“委任的关键在于，让人们做他们<strong>擅长同时是你想让他们做的事情</strong>。”这个道理显而易见，你会和那些自然会做你想让他们做的事情的人合作。</p><p>Naval：是的。如果我认为他们不喜欢我想让他们做的事情，我几乎不会创办公司，不会雇人，也不会和别人一起工作。</p><p>当我年轻的时候，我常常试着说服别人。但事实证明，你可以说服某人帮你做一件事，但是有时候你不能。你无法让他们保持动力。你可以在一开始就给他们灵感，但除非你是像亨利五世那样的国王，拥有那样的权力指使别人做事情。但如果你想让人们长期保持动力，这种动力必须是内在的。你不能只是创造它，如果他们没有内在的动力，你也不能成为他们的拐杖。所以，你必须确保员工精力充沛，愿意做你希望他们做的事，愿意和你一起工作，一起创造。</p><h3 id="诚信反映在一个人的行为，而不是他说了什么"><a href="#诚信反映在一个人的行为，而不是他说了什么" class="headerlink" title="诚信反映在一个人的行为，而不是他说了什么"></a>诚信反映在一个人的行为，而不是他说了什么</h3><p>解读信号非常非常重要。信号不是人们说什么，而是他们做了什么。因此，注意细微的信号是很重要的。举个例子，比如在公众场合，如果有人对服务员态度非常不好，那么他们对你不好只是时间问题。如果有人压制了一个敌人，并对他们怀恨在心，那么他们把你从朋友重新定义为敌人只是时间问题，你会感受到他们的愤怒。所以，愤怒，愤怒，报复，短视的人在现实生活中的很多互动中都是这样的。人们奇怪地一致，至少身体很诚实。所以，你想找到长期合作的伙伴，你要找的是那些似乎没有理性道德的人。</p><p>举个例子，我有一个朋友，他的公司是我投资的，但是公司接近倒闭，他本可以把所有的投资者都鸽了。但他不断地投入越来越多的个人资金，直到公司最终又站起来。在这个过程中，他从未让投资者血本无归。为此我一直很感激他。我说，“哇，你对投资人这么好真是太棒了，你没有坑他们。他觉得被冒犯了。他说：“我这样做不是为了你（投资人），是为了我自己。这关乎我的自尊，是我真正关心的东西。”这种人才是你想要共事的人。</p><p>另一个我喜欢的引用，是我另一条相关的推特。我是在别的地方读到它，但是我稍微修改了一下。</p><p>“<strong>自尊是你对自己的评价</strong>”。</p><p>好人，有道德的人，容易共事的人，可靠的人，往往有很高的自尊，因为他们对自己的声誉非常在意，他们深刻的明白声誉的重要性。</p><h2 id="第十二条：与理性的乐观主义者合作"><a href="#第十二条：与理性的乐观主义者合作" class="headerlink" title="第十二条：与理性的乐观主义者合作"></a>第十二条：与理性的乐观主义者合作</h2><p><em>不要与愤世嫉俗者和悲观主义者为伴：他们总是以自我为中心</em></p><h3 id="不要与悲观主义者为伍"><a href="#不要与悲观主义者为伍" class="headerlink" title="不要与悲观主义者为伍"></a>不要与悲观主义者为伍</h3><p>Nivi：最后一条推文。你说：“不要与愤世嫉俗者和悲观主义者为伍。他们总是自以为是。</p><p>Naval：是的。本质上，要创造事物，你必须是一个理性的乐观主义者。理性的意思是你必须看清世界的真相。<strong>但你必须对自己的能力保持乐观</strong>，对自己想要完成的使命保持乐观。</p><p>我们都知道有些人总是很悲观，他们会否定一切。每个人的生活中都有乐于助人的批判者，对吧？他认为他是在帮忙，但实际上他只是在批评（就像我所说的专业的评论家），而且他对每件事都很失望。这样的人不仅在他的生活中不会成就任何伟大的事情，他们还会阻止周围的人做一些伟大的事情或有大胆的想法。他们往往享受挑刺儿的快感，但从未想过提供更好的解决问题的方案，对，他们就是只说不做。有一句经典的军事台词：“要么当头儿，要么服从，要么滚。”这些人想要第四种选择，他们不想当领导，不想跟随，但又不想让路。他们就是想方设法告诉你为什么这事儿行不通。</p><p>我认识的所有真正成功的人都有很强的行动力，<strong>他们只是做事。判断一件事是否可行的最简单方法就是去做</strong>，至少做第一步，第二步，第三步，然后再决定下一步。</p><p>因此，如果你想在生活中取得成功，创造财富，或者拥有良好的人际关系，或者保持健康，甚至是快乐，你需要有一种超强的行动力，这样才能获得你想要的。</p><h3 id="与理性的乐观主义者合作"><a href="#与理性的乐观主义者合作" class="headerlink" title="与理性的乐观主义者合作"></a>与理性的乐观主义者合作</h3><p>你要对合理的东西保持乐观。众所周知，没有什么比一个鲁莽的人去追求不值得的东西更糟糕的了。这就是为什么我说“理性”的乐观主义者。你需要在了解所有的陷阱，知道事物不利的一面的情况下，依旧保持乐观。</p><p>每个人只在这个星球上活一次，为什么不试着做点大事呢？这就是埃隆·马斯克这种人的牛逼之处，我认为他之所以能激励这么多人，是因为他承担了非常、非常大胆的责任和使命。他为人们树立了一个树立远大理想的榜样。即使是做一些小东西也要花很多功夫。我不认为街角杂货店老板的工作强度比埃隆·马斯克(Elon Musk)低，也不认为他付出的汗水和辛劳比马斯克少，甚至更多。无论是教育水平还是所处环境，不管什么原因，他们没有机会去想那么多，所以影响力就不那么大。因此，最好还是想得远一点。当然还是要理性地，在你的能力范围内保持乐观。</p><p>愤世嫉俗者和悲观主义者，他们真正想说的是，这很不幸，但他们基本上是在说，“我放弃了。我想我什么都做不了。所以对我来说，这个世界就像一个没有人能做任何事的世界。”所以他们不理解别人为什么费劲儿地要去做一些事情。</p><h3 id="我们是悲观主义者的后代"><a href="#我们是悲观主义者的后代" class="headerlink" title="我们是悲观主义者的后代"></a>我们是悲观主义者的后代</h3><p>Nivi：也许做一个不理性的乐观主义者或做一个理性的愤世嫉俗者可能更好。</p><p>Naval：对于为什么你应该成为一个乐观主义者，有一个完全理性的框架。历史上，如果你回到2000年，5000年，10000年，两个人在丛林中漫步，他们听到了老虎的声音。一个是乐观主义者，说，“哦，它不是朝我们这边来的。另一个说：“我是个悲观主义者，我要离开这里。”悲观的人跑了，活了下来，乐观的人被吃掉了。</p><p>我们是悲观主义者的后代，我们天生就是悲观主义者。但现代社会要安全得多，没有老虎在街上游荡，虽然你应该避免彻底破产，但你最终不太可能一无所有。</p><p>我想分享的理念是，对于一个人来说，<strong>他的境遇是有下限的，但上限却很难说</strong>（白话说是你很难饿死，但是成功却不可限量）。因此，适应现代社会意味着要克服你的悲观情绪，做出稍微不理性的乐观押注，因为如果你创办下一个SpaceX、特斯拉(Tesla)或优步(Uber)，你可以为社会和自己创造数十亿美元的价值，并改变世界。</p><p>“<strong>如果你失败了，有什么大不了的？你损失了几百万美元的投资人（VC）的钱，而他们还有更多钱，这就是他们对你成功的赌注。</strong>”</p><p>对过去悲观是有道理的，对今天保持乐观是有意义的，尤其对于这么多受过高等教育且生活在第一世界国家的人，甚至是第三世界国家的人。我反而认为第三世界国家的经济机会要大得多。</p><p>当然，你必须注意的一件事就是，不要做任何违法的事情，远离可能会带来灾难性的损失的事。尽可能不做对身体有害的事情，注意你的健康。远离那些会让你失去所有资本和储蓄的事情。</p><p>因此，不要孤注一掷。但理性乐观的押注会带来巨大的好处。</p><h2 id="第十三条：用特殊技能（Specific-knowledge）武装自己"><a href="#第十三条：用特殊技能（Specific-knowledge）武装自己" class="headerlink" title="第十三条：用特殊技能（Specific knowledge）武装自己"></a>第十三条：用特殊技能（Specific knowledge）武装自己</h2><p>Naval：如果你想变得富有，你需要想办法获得“规模化”的收入，而不是仅仅期盼每个月的工资。责任感决定了你的客户为什么选择你，杠杆效应决定了它可以被规模化。为什么大家要付给你钱而不是给别人，这需要<strong>特殊的技能</strong>。这里提到的特殊技能可能是整个推特风暴中最难传达的东西，也是人们可能最困惑的部分。</p><p>人们普遍持有一种观点是，任何事情都可以从学校学来，都可以“被传授”，但事实上最有价值的事情不是教来的。但好在任何事情都可以学，大部分情况下你想学的东，要么来源于你的兴趣或DNA，要么是源于你从小养成的一些习惯，这些在之后非常难被“教”会；当然也可能是一些全新的东西，所以没有人知道怎么做；或者在工作培训中也是如此，你在高度复杂的环境中进行各种尝试，在一个特定的领域建立判断。典型的例子就是投资，但也可以是其他方面。可以是开拖拉机的技巧，也可以是预测天气的能力。</p><p>因此特殊技能就是你特别关注的技能，尤其是你已经到了20、21、22之后，你几乎就不用去选你需要什么样的特殊技能了。你需要做的就是回顾之前的人生经历中，你建立了什么样的技能是你觉得可以着重被发展的。</p><h3 id="特殊技能无法被训练出来"><a href="#特殊技能无法被训练出来" class="headerlink" title="特殊技能无法被训练出来"></a>特殊技能无法被训练出来</h3><p>特殊技能不是教出来的。如果学校可以教这些东西，那么其他人也可以接受培训，然后我们就可以大规模生产和大规模培训人员。我们甚至可以编程让电脑来做，让机器人来做。如果是这样的话，你就很容易被替代。当有无数的人可以经过培训做这件事的时候，雇主支付给你的只是最低工资，为的就是让你做“这件事”。<strong>你获得的收入&#x3D;投资培训所产生的回报-培训你的成本</strong>。</p><h3 id="特殊技能与你的兴趣高度相关"><a href="#特殊技能与你的兴趣高度相关" class="headerlink" title="特殊技能与你的兴趣高度相关"></a>特殊技能与你的兴趣高度相关</h3><p>举个例子，一个人拿到了心理学学位后，成为了一名销售人员。如果他已经拥有比较好的销售技巧，那么心理学就可以作为一种杠杆，使他在销售上做得更好。但如果他一直是一个内向的人，从来都不擅长销售，他们试图用心理学来学习销售，他们不会做得很好。因此，你会发现更多的特殊技能是通过认识到你的天赋、你真正的好奇心和你的热情而建立起来的。不是为了最热门的工作去上学，也不是盲目进入投资人认为的最热门的领域创业。</p><h3 id="特殊技能往往处于知识的边缘"><a href="#特殊技能往往处于知识的边缘" class="headerlink" title="特殊技能往往处于知识的边缘"></a>特殊技能往往处于知识的边缘</h3><p>它也是一些刚刚被发现或者很难被发现的东西。因此，如果你不是100%的投入，其他人会比你做得更好。他们不会比你好一点点，他们会比你好很多，因为现在我们正在运营创意领域，非常适用于复利，适用于杠杆。如果你的杠杆率为1000倍，有人在80％的时间都是正确的，而其他人在90％的时间都是正确的，那么90％的时间正确的人将因为市场的杠杆作用和复利获得数百倍的报酬。因此，如果你想确保自己在这方面具有优势，真正具有好奇心非常重要。</p><h3 id="建立特殊技能对你来说就像游戏"><a href="#建立特殊技能对你来说就像游戏" class="headerlink" title="建立特殊技能对你来说就像游戏"></a>建立特殊技能对你来说就像游戏</h3><p>很多时候，它不是你坐下来然后推理的东西，它更多的是通过观察发现的。你几乎不得不回顾自己的生活，看看自己到底擅长什么。例如，我想成为一名科学家，所以我所坚持的价值观都是围绕着「科学家」来建立的。我认为真正的科学家处于人类生产链条的顶端，他们做出了真正的突破和贡献，对人类社会的贡献可能比任何其他阶层的人都要大。当然，我并不是说艺术、政治、工程或商业等贡献小，但如果没有科学，我们仍然会在泥土中挣扎，用棍子打架，每天忙着生火。我的整个价值体系都是围绕着科学家建立的，我想成为一名伟大的科学家。</p><p>但当我真正回头看我擅长的东西，以及我最终把时间花在了什么事情上时，我发现更多的是围绕着赚钱，钻研技术，卖东西（思想），解释事情，和人们交谈。所以，我有一些销售技巧，这是一种形式的具体知识；我有一些关于如何赚钱的分析技巧；我对数据足够敏感，有收集数据，整理并分析数据的能力，这也是我的一个特殊技能。当然我也喜欢摆弄技术。所有这些对我来说都像是游戏，但对其他人来说却是工作。</p><p>有些人会觉得这些事情很难，他们会说，“好吧，我怎么才能变得善于表达和推销想法呢?”如果你不是很擅长，或者你不是很喜欢，也许这不是你的专长，专注于你真正喜欢的事情。</p><p>有点讽刺的是，第一个指出我真正擅长什么的人是我的母亲。她是在厨房里说这些话的，当时我大概15、16岁。当我在和一个朋友说我想成为一名天体物理学家，她说：“不，你更适合去经商。”</p><p>我一脸懵逼，“啥？我妈妈不知道她在说什么吧。”</p><p><strong>但事实上，妈妈当然知道她在说什么</strong>。她已经注意到，每次我们走在街上，我都会批评当地的披萨店，为什么他们要用特定的配料和特定的方式出售披萨，为什么他们点披萨的过程是这样的，而实际上应该是那样的。因此，她知道我对商业更有好奇心，到后来与我对科学的痴迷结合起来，创造了技术和科技企业，我才发现了真正的自己。因此，你的特殊技能可能是由那些了解你的人观察到的，而且经常是由那些了解你的人观察到的。</p><h2 id="第十四条：特殊技能（specific-knowledge）极富创造性或技术性"><a href="#第十四条：特殊技能（specific-knowledge）极富创造性或技术性" class="headerlink" title="第十四条：特殊技能（specific knowledge）极富创造性或技术性"></a>第十四条：特殊技能（specific knowledge）极富创造性或技术性</h2><h3 id="特殊技能能通过课程传授获得"><a href="#特殊技能能通过课程传授获得" class="headerlink" title="特殊技能能通过课程传授获得"></a>特殊技能能通过课程传授获得</h3><p>Naval: 如果说特殊技能可以被传授，那就是在工作中，通过学徒制。这就是为什么最好的企业、最好的职业是学徒或自学的职业，因为这些都是社会还没有弄清楚如何培训以及使其批量自动生产的事情。这方面的经典例子是沃伦·巴菲特从学校毕业后去找了本杰明·格雷厄姆。本杰明·格雷厄姆（Benjamin Graham）是《聪明的投资者》（Intelligent Investor）一书的作者，可以说他将价值投资发展成了一套理论并将其发扬光大。巴菲特去找了本杰明·格雷厄姆，并主动提出<strong>免费</strong>为他工作。</p><p>但格雷厄姆说：“你开的价格太高了，免费恰恰是一种高价格。”格雷厄姆说得没错。就像后来1954年时格雷厄姆决定要与巴菲特共事时（给予他学徒机会），巴菲特给他多少钱都不为过。</p><h3 id="特殊的技能具有高度的创造性或者技术性"><a href="#特殊的技能具有高度的创造性或者技术性" class="headerlink" title="特殊的技能具有高度的创造性或者技术性"></a>特殊的技能具有高度的创造性或者技术性</h3><p>特定的技能也往往具有技术性和创造性。它在技术的前沿，艺术的前沿，交流的前沿。再举个例子，在今天，互联网上有一些梗王能够创造出令人难以置信的梗，并将这一想法传播给数百万人。斯科特·亚当斯（Scott Adams）就是一个很好的例子，他通过有说服力的文字和视频做出准确的预测，基本上正在成为世界上最可信的人之一。</p><p>这是他多年来积累起来的特殊技能，因为他年轻时就沉迷于催眠，他通过漫画学会了如何沟通，并很早就开始用直播平台Periscope，所以他一直在练习和人对话，他读过所有关于这个话题的书，他将工作融入到生活的点点滴滴。</p><p>这是一个在职业生涯中积累了特殊技能的人的例子。它具有高度的创造性，它具有技术性的元素，而且它永远不会被机器自动化所取代。<br>没有人会把这一点从他身上夺走，因为斯科特·亚当斯（Scott Adams）为了发展自己的品牌也尽心尽力。他积极地创作Dilbert系列卡通画、写书，并懂得借助Periscope直播平台的媒体优势运作。他在这个品牌上拥有巨大的影响力，如果他想在现有的基础上创造更多的财富，他现在积累的东西就他的杠杆。</p><h3 id="特殊的技能特定于个体和情境"><a href="#特殊的技能特定于个体和情境" class="headerlink" title="特殊的技能特定于个体和情境"></a>特殊的技能特定于个体和情境</h3><p>Nivi：我们应该称之为独特的知识还是特殊的技能更贴切？</p><p>Naval： 我很小的时候就提出了这个框架，当时特殊的技能就一直伴随着我，我没有尝试改变它是因为我所发现的每一个术语都以不同的方式夸大其词。至少特殊的技能（specific knowledge）这个词没被过度消费，因此我可以赋予他新的含义。独特知识的问题是，是的，也许它是独一无二的，但是如果我从别人那里学到它，它就不再是独一无二的，那么就是我们都知道的东西了。所以，与其说它是独一无二的，不如说它是高度依附于现实的，根据个体的实际情况，根据具体问题存在的，它只能依赖于在这个领域中极度的痴迷、兴趣和所花在这个领域的时间来获得。它不能仅仅从一本书中直接读出，也不能在只在一门课程中获得，也不能被设计成一个算法。</p><h3 id="特殊技能不能刻意获得"><a href="#特殊技能不能刻意获得" class="headerlink" title="特殊技能不能刻意获得"></a>特殊技能不能刻意获得</h3><p>Nivi：说到斯科特·亚当斯，他在博客上发表过一篇文章叫做「努力在2个或以上的领域做到前25%」的文章。在此摘录一段：</p><blockquote><p>如果你想要一个普通的成功的生活，不需要太多的计划。只要远离麻烦，去上学，申请你可能喜欢的工作。但如果你想要与众不同的东西，你有两条路:</p><ol><li>成为某方面的最牛逼的人（世界第一梯队）</li><li>在两件或两件以上的事情上变得非常优秀(前25%)。</li></ol><p>第一种策略几乎是不可能的。很少有人能在NBA打球，也很少有人能出一张白金唱片。真的很难，我不建议任何人去尝试。</p><p>第二种策略相当简单。每个人都至少有几个领域是他们可以努力进入前25%的。就我而言，我比大多数人画得都好，但我算不上艺术家。我并不比一般的单口相声演员更幽默，虽然我从来没有成功过，但我比大多数人都更幽默。神奇的是，很少有人能画得很好，也很少有人能写笑话。正是这两者的结合，让我的作品变得如此罕见。当你再加上我的商业背景，我突然有了一个很少有漫画家不亲身经历就能理解的话题。</p><p>我总是建议年轻人成为优秀的演说家(前25%)。任何人都可以通过练习来做这件事。如果你把这种才能加到其他任何一种才能上，你就会突然成为那些只有一种才能的人的老板。或者在你的工程学位、法律学位、医学学位、科学学位或其他任何学位的基础上再获得一个商学学位。突然之间，你掌握了主动权，或者你正在利用自己的综合知识创办自己的公司。</p></blockquote><p>因此，不要试图在一件事情上做到最好，这太难了。你需要尝试在三件或更多的事情上做到非常优秀。这是一种获得特殊技能的方式吗？</p><p>Naval：我认为最好的方法就是追随自己的内心真正喜欢的事物。在你脑海的某个角落，你会意识到，事实上，这个方面我喜欢，我会留意它的商业方面的可能性。</p><p>但我认为，如果你单单为了获得「特殊技能」无病乱投医，或过于以目标为导向地关注钱，那么你不会选择做正确的事情，不会选择你喜欢做的事，所以你不会真正深入进去。根据统计数据，斯科特・亚当斯的观察结果很准。就知识而言，今天有 10,000 个对人类有价值的区域，这 10,000 个区域中排名第一那些位置已经被抢占了。除非你碰巧成为各种领域最痴迷的一万人之一，否则其他人可能会成为这万人中的第一人。</p><p>当你开始把3728种一流的销售技巧和很好的写作技巧以及一个非常了解会计和财务的人结合起来，当这个交叉点的需求到来时，你已经通过组合数学从10000扩展到了数百万或数千万。所以，它只是变得没有竞争力。此外，收益在递减。因此，在三四件事上成为前25%要比在某件事上成为世界第一容易得多。</p><h3 id="在你擅长得领域建立自己的特殊技能"><a href="#在你擅长得领域建立自己的特殊技能" class="headerlink" title="在你擅长得领域建立自己的特殊技能"></a>在你擅长得领域建立自己的特殊技能</h3><p>natural是天生的、本来的意思，这里翻译成擅长的。我认为这是一个非常务实的方法。但最重要的是，我认为一个人不要太刻意地开始积累，因为你内心其实是想挑选你最擅长的东西。每个人都有与生俱来的擅长的东西。</p><p>我们都很熟悉这句话，一个有天赋的人。“哦，这个人是天生的与人为善的人，这个人就是社交名媛的料，这个人是天生的程序员，这个人是天生的读者。”所以，不管是干什么的料，你都会想着在这方面加倍努力。</p><p>因为人类的个性非常复杂，你可能在很多方面都很有天赋。如果把你在这些方面的天赋结合起来，这样你就可以自动地，仅仅通过纯粹的兴趣和享受，在很多事情上，最终达到25%，10%甚至5%的最高水平。</p><h2 id="第十五条：学会销售，学会建造"><a href="#第十五条：学会销售，学会建造" class="headerlink" title="第十五条：学会销售，学会建造"></a>第十五条：学会销售，学会建造</h2><p><em>如果你两者都能做到，你将势不可挡</em></p><h3 id="学会销售，学会建造"><a href="#学会销售，学会建造" class="headerlink" title="学会销售，学会建造"></a>学会销售，学会建造</h3><p>Nivi：谈到技能组合，你说过你应该“学会销售（Sale），学会建造（Build），如果你两者都能做到，你将势不可挡。”</p><p>Naval：这是一个非常广泛的范畴。其中之一是开发产品，即建造。这很难，而且定义很多元。它可以包括设计，开发，可以包括制造，物流，采购，甚至是设计和完成一整套服务。在每个行业，都有一个建造者的定义。在我们所处的科技行业，就是首席技术官CTO，程序员，软件工程师，硬件工程师。但即使在洗衣行业，也可能是创立洗衣服务的人，让物流准时到达的人，确保所有的衣服在正确的时间出现在正确的地方的人，等等。另一方面是销售。同样，销售也有一个非常宽泛的定义。销售不一定只意味着卖东西给个人，它可以意味着营销，意味着沟通，意味着招聘。它也可以意味着筹集资金，意味着鼓舞人心，意味着做公关，等等。</p><h3 id="硅谷模式：建造者-销售者-最佳拍档"><a href="#硅谷模式：建造者-销售者-最佳拍档" class="headerlink" title="硅谷模式：建造者+销售者&#x3D;最佳拍档"></a>硅谷模式：建造者+销售者&#x3D;最佳拍档</h3><p>总的来说，硅谷的创业模式是最好的。最常见的形式是有两个创始人，其中一个擅长销售（Sale），另一个擅长搭建（Build）。举几个经典例子，比如苹果创始人史蒂夫·乔布斯和史蒂夫·沃兹尼亚克；微软的盖茨和艾伦在早期可能有类似的分工；谷歌的拉里和谢尔盖可能稍微有点不同，可能是因为谷歌早期交付的是一个非常技术性的产品——搜索，通过一个简单的UI直达终端用户。</p><p>在硅谷，你会看到这种模式反复出现。一个建造者和一个销售者的组合：CTO和CEO的组合。风险投资者和技术投资者几乎心照不宣的尽可能地寻找这种组合，这就是神奇的组合定律。</p><h3 id="如果你两者都能做到，你将势不可挡"><a href="#如果你两者都能做到，你将势不可挡" class="headerlink" title="如果你两者都能做到，你将势不可挡"></a>如果你两者都能做到，你将势不可挡</h3><p>如果一个人可以同时做到这两者，这才是真正的超能力。那时你就是可以创造整个行业的人。马一龙(Elon Musk)就是一个活生生的例子。他不一定是自己造火箭，但他实际上做出了技术上的贡献。他使自己成为最了解这项技术的人，没人会对他说三道四，他也不会说一些自己做不到的事（意思是说到就会做到）。他视时间为朋友，并想尽办法运用它。即使是史蒂夫·乔布斯（Steve Jobs）也拥有足够的产品技能，并且对产品的参与度也很高，实际上他也同时具备这两种能力。拉里·埃里森（Larry Ellison）最初是一名程序员，他编写了Oracle的第一个版本，或者说他深度参与其中。马克·安德森（Marc Andreessen）也属于这一类。他可能对自己的销售技能没有足够的信心，但是他可是写出Netscape Navigator的程序员，或者至少是其中很大的一部分。因此，我认为在任何领域中真正的巨人就是可以「自产自销」的人。</p><h3 id="宁愿教工程师销售，也不愿教营销人员工程？"><a href="#宁愿教工程师销售，也不愿教营销人员工程？" class="headerlink" title="宁愿教工程师销售，也不愿教营销人员工程？"></a>宁愿教工程师销售，也不愿教营销人员工程？</h3><p>我认为你可以从建造技能开始入手，并在你人生的早期尽量掌握一定的建造技能。或者你有足够的时间可以专心地学习销售，而且你正好有一定的天赋和亲和力促使你成为一个好的销售者。这样你做事的效果可以翻番。<br>现在我们谈到的销售技能可能不同于传统概念中的，卖东西。</p><p>举个例子，假设你是一个很棒的工程师，然后人们会说，你需要擅长销售。你可能不擅长上门推销东西，但你可能是一个很好的作家。写作是一种比面对面销售门槛更低的技能，所以你可以培养写作技能，直到你成为一个良好的在线交流者，然后将其运用在你的销售上。另一种情况，你可能是一个很好的建造者，但你不擅长写作，你不喜欢与大众沟通，但你擅长一对一说服，所以你可能会用你的销售技能来招聘或募资，这需要更多一对一方向的努力。</p><p>因此，如果你在这两个领域的十字路口，千万不要绝望。因为你不可能成为最好的技术，也不会是最好的销售人员。但神奇的是，我们再回到斯科特·亚当斯（Scott Adams）的技能组合理论，将两个技能是结合将是不可阻挡的。</p><p>从长远来看，那些了解潜在需求产品的人，知道如何建造和销售它的人，最能受到顶尖投资者的青睐。如果他们有足够的精力，他们可以突破任何障碍，做成任何事情。</p><p>Nivi：如果你只能选一个擅长的，你会选哪一个?</p><p>Naval：抛开噪音来说，建造的技能实际上是更好的，因为市场上充斥着太多的骗子和没有任何内核的销售人员。当你刚起步、想要被认可的时候，建造技能会更好。但是之后的建造会很累，因为这是一项专注的工作，很难保持与时俱进，因为总是会有新人出现，有新产品，有更新的工具。</p><p>因此，随着时间的推移，销售技巧实际上更容易产生规模效应。比如，如果你在构建产品上享有声誉，这是好的，但当你推出你的新产品时，我将去验证的是产品本身（意思是和建造的名声关系不大）。但是，如果你在大家的眼中是一个值得信赖的生意伙伴，并且你很有说服力，善于沟通，那么这个名声会让很多事变得容易很多。</p><p>因此，我认为如果你需要选一个，<strong>你可以从建造开始，然后过渡到销售</strong>。这是一个比较中庸的答案，但我觉得这奏是大实话。</p><h2 id="第十六条：阅读你所热爱的内容-直到你爱上阅读"><a href="#第十六条：阅读你所热爱的内容-直到你爱上阅读" class="headerlink" title="第十六条：阅读你所热爱的内容 直到你爱上阅读"></a>第十六条：阅读你所热爱的内容 直到你爱上阅读</h2><p><em>你应该可以在图书馆中拿起任何一本书阅读</em></p><h3 id="阅读你所热爱的内容-直到你爱上阅读"><a href="#阅读你所热爱的内容-直到你爱上阅读" class="headerlink" title="阅读你所热爱的内容 直到你爱上阅读"></a>阅读你所热爱的内容 直到你爱上阅读</h3><p>Nivi：在我们讨论责任、影响力和判断之前，你已经有了一些相关的推特，我会把它们放在持续学习的范畴。这些推文本质上是在说，“没有所谓的商业技能。少读商业杂志和商业课程，学习微观经济学、博弈论、心理学、说服力、伦理学、数学和计算机”。你在Periscope上还发表了另一条评论“你应该可以从容的拿起图书馆里的任何一本书来读。”这一类的最后一条推特是，“阅读比听快，做比看快”。</p><p>Naval：是的，这是最重要的一条，因为学习的基础是阅读。我认识的聪明人，他们都经常读书。</p><p>问题是，<strong>我读什么？我怎么读</strong>？因为对大多数人来说，这是一场斗争，是一件家务活儿。但是，读书不是目的，重要的是学会如何教育自己，教育自己的方法就是培养对阅读的热爱。我想说的是，“<strong>读你喜欢的内容，直到你爱上阅读</strong>。”就这么简单。</p><p>我认识的每一个经常读书的人都“爱”阅读，他们爱读书是因为他们读自己喜欢的书。这有点像第二十二条，阅读是没有门槛的，你可以随时开始，然后不断积累，直到它成为一种习惯。接着，你开始不满足于只涉猎单一的领域。</p><p>也就是说，你可以从读小说开始，接着你可以读科幻小说，你可以读非小说，然后你可以读科学，哲学，数学甚至更多。但是重要的是，这个过程是顺其自然非强迫的，读你感兴趣的东西，直到你理解它们。然后你就会自然而然地进入下一步，再下一步。</p><h3 id="阅读某一领域的科学原著"><a href="#阅读某一领域的科学原著" class="headerlink" title="阅读某一领域的科学原著"></a>阅读某一领域的科学原著</h3><p>但是，你会发现在你真正想学的东西中，有太多东西要读。我要提醒的是，即使是阅读也充满了垃圾。实际上有些东西你可以阅读，特别是在早期，<strong>它会以某种方式对你的大脑进行编程</strong>，然后在你阅读的后期，你会根据之前的东西来分辨这些东西是真是假。因此，阅读基础性的东西是很重要的。基础性的东西，是在特定领域最原始（fundamental）书籍，在本质上是经过时间和历史的检验，科学的东西。</p><p>比如，与其读一本商业畅销书，不如读亚当·斯密的《国富论》。与其读今天谁写的一本关于生物学或进化论的书，我更愿意读达尔文《物种起源》。与其现在读一本可能非常先进的生物技术方面的书，我只想学习Horace F. Judson的《创世第八天》(The Eighth Day of Creation)。你不必死磕关于宇宙学和尼尔·德格拉斯·泰森和斯蒂芬·霍金一直在说什么的高级书籍，你需要的是拿起理查德·费曼的《费曼讲物理：入门》，从基础物理学开始。</p><h3 id="不要害怕任何书"><a href="#不要害怕任何书" class="headerlink" title="不要害怕任何书"></a>不要害怕任何书</h3><p>如果你基础打的好，特别是数学、物理和科学，那么你就不会害怕任何一本书。我们所有人都有那种坐在教室里学数学的记忆，这一切都是合乎逻辑的，而且都是有意义的，直到有一次，课程进度太快，我们跟不上了。<br>在那之后，我们被留下来背方程式，记忆概念，却无法从第一原理中推导出它们。在那一刻，我们迷失了，因为除非你是一个专业的数学家，否则你不会记得这些东西。你要记住的是技术，基础。</p><p>因此，你必须确保阅读是建立在一个理解的框架上，因为你正在为建摩天大楼打地基，而不只是在反复记忆你不断在丢失的东西。所以基础非常重要。</p><p>最后，阅读的终极是当你走进一个图书馆，你上下打量，你不害怕这里的任何一本书。因为你知道你可以把任何一本书从书架上拿下来，你就能阅读它，理解它，你可以接收什么是真的，拒绝什么是假的。你有一套自己的方法论，分辨哪些是逻辑和科学的，而不仅仅是基于大字报和意见（opinions）。</p><h3 id="学习的手段是丰富的，学习的欲望是稀缺的"><a href="#学习的手段是丰富的，学习的欲望是稀缺的" class="headerlink" title="学习的手段是丰富的，学习的欲望是稀缺的"></a>学习的手段是丰富的，学习的欲望是稀缺的</h3><p>互联网的美丽是整个亚历山大图书馆的十倍，并且时刻在你的指尖，为你所用。不是教育手段或学习手段稀缺，相反稀缺的是学习的欲望。所以，你真的要培养欲望。</p><p>欲望意味着我不允许这种能力的丧失。孩子们天生就有好奇心。如果你去找一个第一次学语言的小孩，他们总是问：这是什么？那是什么？这是为什么？那是谁？他们总是问问题。</p><p>但问题之一是，学校和我们的教育系统，甚至我们培养孩子的方式，都用顺从取代了好奇。<strong>一旦你用顺从取代好奇心，你就会成为一个顺从的工厂工人，而不再是一个创造性的思考者。你需要创造力，你需要有激励自己的大脑去学习你想要的东西的能力</strong>。</p><h2 id="第十七条：数学和逻辑才是一切事物的基础"><a href="#第十七条：数学和逻辑才是一切事物的基础" class="headerlink" title="第十七条：数学和逻辑才是一切事物的基础"></a>第十七条：数学和逻辑才是一切事物的基础</h2><p><em>数学和逻辑是理解其他一切事物的基础</em></p><h3 id="终极基础是数学和逻辑"><a href="#终极基础是数学和逻辑" class="headerlink" title="终极基础是数学和逻辑"></a>终极基础是数学和逻辑</h3><p>Naval：最基本的东西是原则性的，可以是算法，是根深蒂固的逻辑理解，你可以从任何角度保护它或攻击它。这就是为什么微观经济学很重要，而宏观经济学就是大量的记忆堆砌，大量的宏观废话。</p><p>正如纳西姆•塔勒布(Nassim Taleb)所说，<strong>宏观上的扯淡比微观上的扯淡更容易</strong>。因为宏观经济学是巫术—复杂—科学与政治的结合。如今，你找不到两个宏观经济学家在任何事情上达成一致，不同的政治家会用不同的宏观经济学家来兜售他们各自偏爱的理论。</p><p>现在甚至有宏观经济学家在兜售所谓的现代货币理论，大概意思就是，有个讨厌的东西叫做通货膨胀，我们可以印所有我们想要的钱。这就像说，有了无限的能量，我们可以发射火箭进入太空一整天。这简直是一派胡言。现实是，有些人打着“宏观经济学家”的旗号，兜售什么现代货币理论，这只能说明，宏观经济学作为一门“所谓的科学”已经腐败。它现在是政治的一个分支。</p><p>因此，你要把重点放在基础上。<strong>最终一切事物的基础是数学和逻辑</strong>。如果你懂逻辑和数学，那么你就有了理解科学方法的基础。一旦你理解了科学方法，你就能理解如何在其他领域和其他你正在阅读的东西中区分真理和谬误。</p><h3 id="速食一百本书毫无意义"><a href="#速食一百本书毫无意义" class="headerlink" title="速食一百本书毫无意义"></a>速食一百本书毫无意义</h3><p>在阅读别人的观点（opinion）时要非常小心，甚至在阅读事实（facts）时也要小心，因为所谓的事实往往只是表面上的(伪科学)观点。你真正需要的是算法（algorithm），是理解（understanding）。最好是慢慢地啃完一本书，然后挣扎、绊倒、倒带，而不是快速地浏览一遍，然后貌似很有成就感：“我已经读了20本书，我已经读了30本书，我已经读了50本这个领域的书…”就像李小龙说的，“我不害怕那些知道一千种踢腿招式的人，我害怕那些练习了一万次出拳或一万踢腿的人。”通过不断重复和运用，不断深入理解逻辑和基础，你才能成为一个聪明的思考者。</p><h3 id="学习讲故事和编程"><a href="#学习讲故事和编程" class="headerlink" title="学习讲故事和编程"></a>学习讲故事和编程</h3><p>Nivi：要为你以后的学习打下基础，我认为你需要两样东西，总结来说。第一，练习说服别人，不断实践怎么讲好一个故事。第二，深入了解一些技术范畴的东西，无论是学习抽象数学，还是读唐纳德·克努斯关于算法的书，或者听费曼关于物理学的讲座。如果你有实际的说服力，对一些复杂的话题有深刻的理解，我认为你的余生将有一个很好的学习基础。</p><p>Naval：是的。我把它展开一下。我认为五个最重要的技能是，阅读，写作，算术，然后加上说服的技巧，也就是会讲故事（storytelling）让别人信服。最后，我还要加上计算机编程，因为它是一种应用形式的运算它能让你在任何领域都能自由的建造。如果你擅长电脑，擅长基础数学，擅长写作，擅长说服，如果你喜欢阅读，你就已经为生活做好了准备。</p><h2 id="第十八条：没有被称为“商业”的技能"><a href="#第十八条：没有被称为“商业”的技能" class="headerlink" title="第十八条：没有被称为“商业”的技能"></a>第十八条：没有被称为“商业”的技能</h2><p><em>避开商学院和杂志</em></p><h3 id="没有被称为“商业”的实际技能"><a href="#没有被称为“商业”的实际技能" class="headerlink" title="没有被称为“商业”的实际技能"></a>没有被称为“商业”的实际技能</h3><p>Naval：没有所谓商业的实际技能，它太普通了。这就像一种叫做“关联”的技能，定义为“与人相关”。这都不能称作一种技能，它太宽泛了。</p><p>我并不想完全贬低商学院传授的东西的价值，他们会传授非常聪明的东西—一些成功的案例&#x2F;轶事，并称之为“案例分析”（case study）。但它们只是一些趣闻轶事，它们试图通过向你抛出大量数据点来帮助你进行模式匹配，但事实是，在你设身处地思考之前，你永远不能完全理解它们，就像你无法重复打造一个可口可乐一样。但是，你会发现博弈论、心理学、伦理学、数学、计算机和逻辑学中的这些基本概念才会更好地帮到你。这也是我为什么会更专注于基础科学、基础逻辑的原因。我会培养对阅读的热爱，包括阅读那些我们明知道不应该阅读的所谓垃圾。你不必（只）读经典。阅读是你进行自我教育的基础。</p><p>着手做比光想要快得多</p><p>Nivi：你之前所说的“做比看快”是什么意思呢？</p><p>Naval：这涉及到学习曲线的话题，人们总是想方设法的优化自己的学习曲线。尽管我也是一个播客博主，但我不喜欢播客的原因之一是，播客无法让我最快的获取知识和信息。我是一个很好的读者，或者说是一个很快的读者，我能读得很快，但我只能以一定的速度听。我知道人们听的时候都是二倍速，三倍速，但那时每个人听起来都像一只花栗鼠，很难再回头看，抓重点，很难精确定位片段并记笔记，等等。</p><p>同样地，很多人认为他们可以通过观察别人做的事情，甚至通过阅读别人做的事情，变得非常熟练。比如刚提到的商学院的案例研究，就是一个非常典型的例子。他们研究其他人的生意，但实际上，你开一个自己的柠檬汽水摊，甚至在街上开一家小杂货店，都会学到比书本上多得多的经营生意的知识。这就是你在工作中要学习的方法，<strong>因为很多微妙的东西在你真正进入这个行业之前是不会真正懂得的</strong>。</p><p>例如，现在人人都喜欢研究心理学。你去看看Farnam Street，读读Poor Charlie’s Almanack*，你可以学习所有不同的心理模式。但哪个更重要？你更常应用哪些？在什么情况下哪一个更重要？这其实是最难的部分。比如，我从心理学研究中最大的收获是，委托-代理问题在现实世界中的驱动力太强大了，这本质是一个激励问题。它让我明白，针锋相对的重复囚徒困境是最值得了解的博弈论。在那之后你几乎可以把博弈论理论书束之高阁了。</p><p>顺便说一下，<strong>学习博弈论的最好方法是自己设计游戏</strong>，自己亲身体验。虽然我从没读过博弈论的书，但我认为自己非常擅长博弈论实践。我从来没有打开过一本博弈论的书，从未尝试在里面发现任何一个我没想到的结果。原因是我从小玩各种游戏，和各种各样的朋友在游戏中碰到各种各样的实际情况，所以这对我来说只是第二天性。实践会告诉你一切你想知道的答案。</p><h3 id="“执行”迭代的次数决定着你的学习曲线"><a href="#“执行”迭代的次数决定着你的学习曲线" class="headerlink" title="“执行”迭代的次数决定着你的学习曲线"></a>“执行”迭代的次数决定着你的学习曲线</h3><p>执行本身是一件很微妙的事请，它包含着很多东西。比如说，我想学习如何经营一家企业。如果我在每天上班的地方重复做同样的事情，比如说我在街上开了一家零售店，每天的任务就是在货架上摆满食物和酒，我不会学到很多东西，因为我每天只是在不断重复。因此，即使我花了几千个小时，但我也只是花了几千个小时做同样的事情。而如果在这个过程中我进行了数千次迭代，那结果就会不一样了。因此，学习曲线是需要迭代的，而不是重复。</p><p>但如果我在商店里每天尝试新的营销实验，我不断地改变库存，不断地改善品牌策略，不断尝试新的讲故事的方法，不断地拓展增大客流量的在线渠道，我试着在不同的时间营业，并且经常有目的地四处走走，和其他店主交谈，拿到他们的书，弄清楚他们是如何经营自己的生意的。<strong>真正影响学习曲线的是迭代次数</strong>。迭代次数越多，收获的就越多，学习速度就越快。而不仅仅是投入的时间长短的问题。</p><h3 id="如果你愿意每天流一点血，你可能在未来的人生路上赢得很多"><a href="#如果你愿意每天流一点血，你可能在未来的人生路上赢得很多" class="headerlink" title="如果你愿意每天流一点血，你可能在未来的人生路上赢得很多"></a>如果你愿意每天流一点血，你可能在未来的人生路上赢得很多</h3><p>虽然世界为我们提供着一次又一次做同样事情的机会，但事实上，如果我们能从零开始寻找新的方法，世界会呈现出不一样的精彩。</p><p>第一次尝试新事物是很痛苦的，因为你正徘徊在不确定的领域，很有可能你会失败。因此你只需要不断让自己<strong>适应频繁的小失败（bleed a little）</strong>。</p><p>Nassim Taleb也谈到了这一点。他靠做一个基本上依赖黑天鹅的商人的生意发家致富。Nassim Taleb通过每天损失一点点钱来赚钱，然后在一个偶然的时机，当一件被常识定义为不可能发生的事情发生在其他人身上时，他会赚很多钱。</p><p>虽然大多数人每天都想一夜暴富，但相应的，他们需要承担爆炸式的风险，做好破产的心理准备。</p><p>如果说你在自然界里割伤了，然后每天都在流血，你最终会因失血而死亡，你必须想办法及及时想办法挽救生命。但其实现实生活没那么夸张，我们并不是每天都在流血，流血在这里只是一个比喻，每天让自己损失一点点。</p><p>但现实是，大部分人都不这么做，相反他们每天都在追求着小的胜利，这最终会被证明是不合算的。我想说的是，如果你愿意每天都流一点点血，将来你会赢一笔大的。</p><p>其实，这就是创业精神，企业家们每天都在流血（bleed a little）。他们不是在赚钱，他们是在赔钱，而且他们总是亚历山大，因为所有的责任都在他们身上，但是当他们赢了，他们就会大赚一笔，所以总体上来看他们会赚得更多。</p><h2 id="第十九条：勇敢承担责任才能获得影响力"><a href="#第十九条：勇敢承担责任才能获得影响力" class="headerlink" title="第十九条：勇敢承担责任才能获得影响力"></a>第十九条：勇敢承担责任才能获得影响力</h2><p><em>勇敢冒险你就会在社会上获得影响力</em></p><h3 id="你需要通过责任获得影响力"><a href="#你需要通过责任获得影响力" class="headerlink" title="你需要通过责任获得影响力"></a>你需要通过责任获得影响力</h3><p>Nivi: 我们何不谈谈责任呢，我觉得这很有趣，我估计你对此有自己独特的看法。因此，你的关于责任的第一条推文是，“拥抱责任，以自己的名义承担商业风险。社会将以责任、公平和影响力来回报你。”</p><p>Naval: 是啊，所以要想发财，你需要杠杆。杠杆来自于劳动力、资本，也可能是通过代码和媒体。但其中的大多数，比如<strong>劳动力和资本，必须来自于他人的给予</strong>。对于劳动力，必须是有人愿意跟随你；对于资本，必须有人给你钱或资产来让你管理和使用。</p><p>所以要得到这些，你必须建立信誉，而且你必须尽可能以自己的名义去做，当然这也是有风险的。所以责任是一把双刃剑。它能让你在事情顺利的时候收获信誉，在事情糟糕的时候承受失败的冲击。</p><h3 id="以自己的名义承担商业风险"><a href="#以自己的名义承担商业风险" class="headerlink" title="以自己的名义承担商业风险"></a>以自己的名义承担商业风险</h3><p>从这个意义上说，那些在各种事物上贴上自己标签的人并不愚蠢，他们只是对自己有信心。也许最终结果是愚蠢的，但如果你看到一个坎耶、奥普拉、特朗普、马斯克或其他类似的人，这些人之所以可以凭借自己的名字致富，是因为他们的名字就是强大的敲门砖。</p><p>不管你如何看待特朗普，你必须意识到，这家伙的名字就是世界名片。你为什么要去特朗普赌场？只是因为是特朗普。你为什么要去特朗普大厦？也是因为特朗普。</p><p>到了投票的时候，我想很多选民只是进去说“特朗普”，他们认出了这个名字，所以这个名字得到了回报（获得选票）。</p><p>奥普拉也是同样的，她把某样东西打上自己的标签，当商品到达人们手中，她的名字就是这些商品的招牌。</p><p>这些人在坚持把自己的名字打造成招牌的同时当然也面临着一系列的风险。显然，特朗普现在可能被世界上的一大部分人憎恨着，也同样是因为特朗普式的风格。</p><p>把你的名字公之于众，你就会成为一个名人，而名声也有很多缺点。<strong>隐姓埋名、有钱总比穷出名好，但即便是名利双收，也有很多不利因素。你需要在公众的眼皮子底下生活</strong>。</p><h3 id="一个运作良好的团队对每个职位都有明确的责任分工"><a href="#一个运作良好的团队对每个职位都有明确的责任分工" class="headerlink" title="一个运作良好的团队对每个职位都有明确的责任分工"></a>一个运作良好的团队对每个职位都有明确的责任分工</h3><p>责任感是非常重要的，当你正在开发一个产品，或者你在一个团队中工作，或者你在一个企业中工作时，我们就会不断地提醒自己成为一个团队的一员是多么的重要。这的确是非常重要的。</p><p>我们在社交方面的很多训练都告诉我们不要强出头。就像中国的一句俗语，枪打出头鸟，别紧张，但是我要说的是，一个真正运作良好的团队规模很小，对每一个不同的部分都有明确的责任分工。</p><p>你可以说，“好吧，这个人负责制造产品，这个人负责信息发布，这个人负责筹款，这个人负责定价策略，也可能负责在线广告。“所以如果有人搞砸了，你就知道到底是谁负责。同时，如果事情进展顺利，你也清楚地知道是谁做得很好。</p><p>如果你有一个很小的团队，并且你已经清楚地划分了责任，那么你仍然可以保持很高的责任感。问责制在面对结果时显得真的很重要，不然就会出现，如果失败了，每个人都会互相指责，如果成功了，每个人都会站出来争夺功劳。</p><p>我们在学校的时候都有过这样的经历，有一个小组作业要做，里面可能有几个人做了很多工作，然后有一些人只是做了很多哗众取宠的工作或者强行给自己做的工作加戏。我们从小就习以为常，但说出来难免会感到不舒服。</p><h3 id="能在公众面前坦然面对失败的人都有很大的能量"><a href="#能在公众面前坦然面对失败的人都有很大的能量" class="headerlink" title="能在公众面前坦然面对失败的人都有很大的能量"></a>能在公众面前坦然面对失败的人都有很大的能量</h3><p>明确责任很重要。没有责任感，你就没有动力；没有责任感，就无法建立信誉。但你要冒险，你冒着失败的风险冒着被羞辱的危险，你冒着以自己名义承受失败的风险。</p><p>幸运的是，在现代社会，不再有债务人的监狱，人们也不会因为失去别人的钱而坐牢或被处死，但与生俱来的，我们不会以自己的名义在公共场合失败。那些以自己的名义在公共场合面对失败的人，实际上拥有很大的能量。</p><p>例如，我讲一个个人轶事。直到2013年，2014年，我的公众形象完全围绕着创业和投资。直到2014年、2015年左右，我才开始谈论哲学、心理学等等。</p><p>这让我有点紧张，因为<strong>我是以自己的名义做的</strong>。肯定有业内人士通过背后悄悄戳我，比如“你在干什么？你要结束你的职业生涯了吗？这太愚蠢了。”</p><p>我有点同意了，的确，我冒险了。</p><p>当你把你的名字放在那里，你就要冒着某些风险。但同时你也会得到回报，你会得到好处的。</p><h2 id="第三十五条：冷静的头脑，健康的身体，充满爱的家庭"><a href="#第三十五条：冷静的头脑，健康的身体，充满爱的家庭" class="headerlink" title="第三十五条：冷静的头脑，健康的身体，充满爱的家庭"></a>第三十五条：冷静的头脑，健康的身体，充满爱的家庭</h2><p><em>当你变得富有时，你会发现这些都不是你一直以来追求的</em></p><p>Nivi：最后一条关于长期工作的推特是：“当你最终变得富有时，你会意识到这些并不是你最初想要的。”</p><p>Naval：这本身就是一个能谈论很久的话题。首先，我认为这是一个非常聪明的结论，它解放了那些说“致富有什么意义？”的人们的思想武装。有很多人喜欢以德服人，反对创造财富或赚钱的想法。这其实也没错。是的，钱能解决你所有能用钱解决的问题，但钱也不是万能的。</p><p><strong>当你赚了一大笔钱后，你首先意识到你仍然是同一个人</strong>。如果你本来快乐，你就还是快乐的。如果你本来不快乐，你就会不快乐。如果你平静、满足、平和，你还是那个人。我认识很多非常富有的人，他们身材非常不好。我也认识很多有钱人，他们的家庭生活很糟糕。我同时也知道很多有钱人，他们内心很混乱。</p><h3 id="平静的头脑，健康的身体和充满爱的家庭必须要经营"><a href="#平静的头脑，健康的身体和充满爱的家庭必须要经营" class="headerlink" title="平静的头脑，健康的身体和充满爱的家庭必须要经营"></a>平静的头脑，健康的身体和充满爱的家庭必须要经营</h3><p>我想到我之前发的另一条推特，也是我最喜欢的一条。它不一定是最有见地的，也不一定是最有用的，这甚至不是我想的最清楚的。但那里面有一个非常确定的事实，它引起了共鸣。</p><p>“健康的身体，平静的头脑，充满爱的家庭。这些东西是买不来的，必须要经营才能得到。”</p><p>即使你拥有世界上所有的钱，你也不会拥有这三样东西。Jeff Bezos（亚马逊董事长）还得健身，他也得为他的婚姻努力，他的内在精神状态仍然很难不被外部事件所影响。这将取决于他内心的平静与安宁。因此，我认为这三件事——你的身体健康，你的心理健康和你的亲密关系是你必须要培养的。他们能给你带来比任何金钱都多的安宁和幸福。</p><h3 id="关于平静内心状态的实用性建议"><a href="#关于平静内心状态的实用性建议" class="headerlink" title="关于平静内心状态的实用性建议"></a>关于平静内心状态的实用性建议</h3><p>如何才能保持内心平静，这个话题是我一直在研究的。我大概有100条这个方面的推特。在这个话题上，最近经常会遭到至少50种不同形式的攻击。所以我一直在犹豫要不要做，因为我想针对一种非常特殊的人群。</p><p>有很多人不相信研究内在状态是有用的，他们太注重外在。没关系，这样也的确没什么问题。这就是“如何致富”推特系列的目的。有很多人认为唯一值得努力的就是**彻底解放(complete liberation)**，就像，你成了佛。他们会怀疑过程中的任何东西，认为它们毫无用处。但事实是绝大多数人没法儿成佛不是吗？</p><p><strong>我想创建一个新的推特系列，来为那些想要一个更平静的内在的人们提供实用的建议</strong>。一套理解、分辨半真半假和真理的理论，如果你能正确地吸收它们，这些都是指向你已经拥有的想法和经验的指针；如果你把这些理论慢慢融会贯通，它将帮助你、引导你进入一个更平静的内在状态，这就是我想做的。</p><p>健身是另一个大问题，我不是这方面的专家，推特上有很多比我更擅长健身的专业人士。</p><h3 id="很多离婚案例是为了钱，很多争吵是因为内心恐惧"><a href="#很多离婚案例是为了钱，很多争吵是因为内心恐惧" class="headerlink" title="很多离婚案例是为了钱，很多争吵是因为内心恐惧"></a>很多离婚案例是为了钱，很多争吵是因为内心恐惧</h3><p>我认为，一个充满爱的家庭和人际关系实际上是自然而然地从其他事情中脱颖而出的。如果你有一个冷静的头脑，你已经赚了钱，你应该有良好的关系。你没有理由不这样做，很多离婚都是为了钱，不幸的是，这就是现实，有了钱但是丢失了家庭这部分。</p><p>很多外在的纷争主要是因为你的内在状态不好。当你内心自然平静的时候，你会选择更少的争斗，你会变得更有爱心而不期待任何回报，这会让你应对外部关系更加得心应手。</p><p>Nivi：总结一下，钱能解决你的关于金钱的问题，金钱可以让你在物质世界中获得自由。金钱能给你不去做你不想做的事情的自由。</p><p>Naval：是啊。对我来说，金钱的最终目的是让你不必在某个特定的地方的某个特定的时间，做任何你不想做的事情。</p><h2 id="第三十六条：没有什么快速致富的方法"><a href="#第三十六条：没有什么快速致富的方法" class="headerlink" title="第三十六条：没有什么快速致富的方法"></a>第三十六条：没有什么快速致富的方法</h2><p><em>别相信能快速致富的鬼话，那些人只是想从你身上赚钱而已</em></p><p>Nivi：我们跳过了一条推文，因为我想涵盖所有关于长期话题的推文。我们跳过的那条推特是，“世界上没有快速致富的捷径，如果谁告诉你有，那不过是他想从你这里发财罢了。”</p><p>Naval：我们说回有效率的世界。如果有一种简单的致富方式，那就是已经被开发了。有很多人会向你推销如何赚钱的产品，比如他们总是卖给你一些79-95美元的课程或一些有声读物，或研讨会门票。这没什么对错，人们总是需要谋生。他们可能真的有很好的建议，但如果他们给你可行的、高质量的建议，承认这（致富）是一个艰难的旅程，会花很多时间，那么我认为这是现实的。但是，如果他们卖给你一些快速致富的各种线上线下的产品，他们只是想从你身上赚钱，你要掂量一下它的价值。</p><h3 id="我们不放广告，因为我们知道那只会损害信誉"><a href="#我们不放广告，因为我们知道那只会损害信誉" class="headerlink" title="我们不放广告，因为我们知道那只会损害信誉"></a>我们不放广告，因为我们知道那只会损害信誉</h3><p>关于整个推特风暴和这个播客，我想强调的一件事是我们这里没有广告，也不收任何费用。我们不卖任何东西。不是因为我不想赚更多的钱，赚更多的钱总是好的。但是，它会完全破坏企业的信誉。如果我说，“嘿，我知道如何致富，我要把它卖给你。“这就毁了它。</p><p>我年轻的时候就开始思考致富的话题，我最喜欢的书之一就是《如何致富》，作者是Felix Dennis，《Maxim》杂志的创始人，一位去世的亿万富翁。他写了很多疯狂的东西，但他对财富的理解真的好。</p><p>但每当我读到他或GoDaddy创始人鲍勃·帕森斯或安德鲁·卡内基的作品时，这些已经非常富有的人写的东西，他们显然是在其他领域发家致富的，而不是靠<strong>推销如何致富的方法</strong>。他们不是想从你身上赚钱。他们显然是想赢得一些地位和一些自尊，对吧，你总是要有做某事的动机。但是，至少这是他们没有撒谎的一个更清晰的理由。</p><h3 id="每个创始人都会对他的员工撒谎"><a href="#每个创始人都会对他的员工撒谎" class="headerlink" title="每个创始人都会对他的员工撒谎"></a>每个创始人都会对他的员工撒谎</h3><p>在某种程度上，每个创始人都要对公司的每个员工撒谎。他们必须让员工觉得，你为我工作比做你自己想做的事，为你自己工作（创业）要好。同样作为一个创始人，但对此我总是很难接受。</p><p>于是我开始尝试一些保持诚实的方法，我招募了一些有企业家精神的员工，然后告诉他们，“你们可以在这个公司成为企业家，当你们准备好开始自己的事业的那一天，我将支持你们。我永远不会妨碍你创业。但在你想开始一些新东西之前，这里可能是一个好地方，让你学习如何构建一个良好的团队，建立一个好的企业文化，通过打磨自己的技能找到适合的产品市场，见更多更加优秀的人、和他们交流碰撞，直到最终想通自己到底想做什么。因为定位、时机、以及必要的深思熟虑，在开始创业时很重要。”</p><p>但我从来不会做一些无谓的监督，告诉员工“你必须在早上8点之前到你的办公桌。”因为我自己就不会在早上8点之前坐在办公桌前，我想要自由。这就像告诉他们你今天很擅长做董事，明天你就会成为副总裁。这种话我自己都不相信。</p><h3 id="任何提供致富建议的人，去想想别的赚钱方式吧"><a href="#任何提供致富建议的人，去想想别的赚钱方式吧" class="headerlink" title="任何提供致富建议的人，去想想别的赚钱方式吧"></a>任何提供致富建议的人，去想想别的赚钱方式吧</h3><p>就好像，你不会想从一个胖子那里学到如何保持健康；也不会想从一个抑郁的人那里学到如何快乐。所以，你不会想从一个穷人那里学习如何致富，也一定不想从一个通过告诉别人如何致富来赚钱的人那里学习如何致富。想想都奇怪不是吗？</p><p>Nivi：任何时候，如果你看到有人按照大师的建议致富了，只要记住，在任何随机事件中，如果你持续足够长的时间，如果有足够多的人参与其中，你就会得到想要的结果。</p><p>Naval：这里面存在着幸存者偏差，这也是为什么当商业记者和经济学家谈论私营公司时，你可以完全忽视他们的原因。</p><p>我不会指名道姓，但当一位著名的经济学家对比特币大加抨击，或者当一名商业记者攻击最新一家即将上市的公司时，这完全是胡说八道。那些人什么都没做，他们只是「专业的评论家」。他们对赚钱一无所知。他们只知道如何通过吐槽和批评来博眼球。你要是不停的被他们洗脑可就太蠢了。</p><p>最后我想引用纳西姆·塔勒布*的一句话，我很喜欢他说的话，“如果你想成为一个哲学家，先当国王，再当哲学家。”不是先成为哲学家，再成为国王。”</p><p>Nivi：我很高兴你提到了塔勒布，我想请大家记住他成名作的书名《随机骗局》。</p><p>Naval：我们在这期播客中有些模糊的原因之一是，我们试图去讨论值得长期遵循的原则，而不仅仅是告诉你昨天中奖的彩票号。</p><h2 id="第三十七条：产品化你自己"><a href="#第三十七条：产品化你自己" class="headerlink" title="第三十七条：产品化你自己"></a>第三十七条：产品化你自己</h2><p><em>找出你最擅长的，并尽可能多地运用杠杆</em></p><p>Nivi：你用两个词概括了整个推特风暴。“产品化（Productize）你自己。”</p><p>Naval：产品化你自己这个概念的意思是：<strong>你自己</strong>是独特的、有责任心的，<strong>产品化</strong>需要独特的技能和杠杆。所以所有这些部分，你可以把它们合并成这两个词。</p><p>如果你想要长期致富，你应该问自己：“这是我的真实想法吗？”我在打造的是我自己吗？然后，“我在生产它吗？”我在规模化它吗？我是在用劳动力还是资本，代码还是媒体来衡量？所以这是一个非常方便、简单的记忆方法。</p><p>这是什么播客？这是一个叫做Naval的播客。我实际上是在用播客在产品化自己的一部分</p><p>Nivi：你要弄清楚你有什么特别擅长的，或者你有什么特别之处，然后尽可能地运用杠杆。在这种情况下你不是在刻意赚钱，赚钱甚至也不是一种技能。你就是在做你自己，探索成千上百种方式找到真正的你。</p><h2 id="找到让你富有、健康和有创造力的爱好"><a href="#找到让你富有、健康和有创造力的爱好" class="headerlink" title="找到让你富有、健康和有创造力的爱好"></a>找到让你富有、健康和有创造力的爱好</h2><p>Naval：赚钱应该取决于你是谁和你喜欢做什么。另一条我特别喜欢的推特是…这不是我说的，是别人发过的。他们说“找三个爱好”。一个能让你赚钱，一个能让你保持健康，一个能让你富有创造力。”</p><p>我会稍微改变一下。我会说，找到三个爱好，一个让你赚钱，一个让你健康，一个让你更聪明。就我而言，我的爱好是阅读，赚钱，因为我喜欢与初创公司合作。要么投资，要么集思广益，要么开始行动。我很喜欢创业初期的创意和创造阶段。</p><p>至于让你保持健康的爱好，我真的没有。我最喜欢的是瑜伽，但那是我崩溃的地方。我认为，那些早年发现冲浪、游泳、网球或某种他们一生中大部分时间都在做的运动的人是非常幸运的，因为他们发现了一种使他们健康的爱好。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>dataclasses-attrs-pydantic</title>
      <link href="/2025/12/16/dataclasses-attrs-pydantic/"/>
      <url>/2025/12/16/dataclasses-attrs-pydantic/</url>
      
        <content type="html"><![CDATA[<h1 id="Dataclasses-vs-Attrs-vs-Pydantic"><a href="#Dataclasses-vs-Attrs-vs-Pydantic" class="headerlink" title="Dataclasses vs Attrs vs Pydantic"></a>Dataclasses vs Attrs vs Pydantic</h1><p>分类：数据科学 • 阅读时间：6分钟</p><p>Python 3.7引入了dataclasses，这是一个方便的装饰器，可以使创建类变得更加容易和无缝。本文将比较普通类、”dataclass”和使用attrs的类。Dataclasses基于attrs开发，attrs是一个Python包，同样旨在使创建类变得更加愉快。Dataclasses包含在标准库中（需要Python 3.7+），而要使用attrs，必须通过pip安装（例如，pip install attrs）。它们主要用于自动化编写魔术方法（有时）痛苦的体验。您可以在之前的文章中阅读更多关于魔术方法的内容：<a href="https://jackmckew.dev/dunders-in-python.html">https://jackmckew.dev/dunders-in-python.html</a></p><h2 id="Dataclasses-vs-Attrs-vs-Pydantic-功能对比"><a href="#Dataclasses-vs-Attrs-vs-Pydantic-功能对比" class="headerlink" title="Dataclasses vs Attrs vs Pydantic: 功能对比"></a>Dataclasses vs Attrs vs Pydantic: 功能对比</h2><table><thead><tr><th>功能</th><th>Dataclass</th><th>Attrs</th><th>Pydantic</th></tr></thead><tbody><tr><td>冻结实例</td><td>✅</td><td>✅</td><td>✅</td></tr><tr><td>默认值</td><td>✅</td><td>✅</td><td>✅</td></tr><tr><td>转元组</td><td>✅</td><td>✅</td><td>✅</td></tr><tr><td>转字典</td><td>✅</td><td>✅</td><td>✅</td></tr><tr><td>验证器</td><td>❌</td><td>✅</td><td>✅</td></tr><tr><td>转换器</td><td>❌</td><td>✅</td><td>✅</td></tr><tr><td>槽类优化</td><td>❌</td><td>✅</td><td>❌</td></tr><tr><td>编程式创建</td><td>❌</td><td>✅</td><td>❌</td></tr></tbody></table><h2 id="何时使用Dataclasses"><a href="#何时使用Dataclasses" class="headerlink" title="何时使用Dataclasses"></a>何时使用Dataclasses</h2><p>Dataclasses主要用于将变量”分组”在一起。在以下情况下选择dataclasses：</p><ul><li>主要关注的是变量的类型，而不是值</li><li>添加另一个包依赖不是小事</li></ul><h2 id="何时使用Attrs"><a href="#何时使用Attrs" class="headerlink" title="何时使用Attrs"></a>何时使用Attrs</h2><p>Attrs既涉及分组又涉及验证。在以下情况下选择attrs：</p><ul><li>您关心性能（attrs支持槽类生成，针对CPython进行了优化）</li></ul><h2 id="何时使用Pydantic"><a href="#何时使用Pydantic" class="headerlink" title="何时使用Pydantic"></a>何时使用Pydantic</h2><p>Pydantic是关于彻底的数据验证。在以下情况下选择pydantic：</p><ul><li>您想要验证每个类中的值</li><li>您想要清理输入</li></ul><h2 id="示例类"><a href="#示例类" class="headerlink" title="示例类"></a>示例类</h2><p>首先，让我们从Python中默认实现的示例类开始。</p><p>我们将在类定义中使用类型提示，这是确保变量是我们预期类型的最佳实践。类型提示也集成到attrs中用于创建类。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> typing<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Data</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, x: <span class="hljs-built_in">float</span>=<span class="hljs-literal">None</span>, y:<span class="hljs-built_in">float</span>=<span class="hljs-literal">None</span>, kwargs:typing.<span class="hljs-type">Dict</span>=<span class="hljs-literal">None</span></span>):<br>        <span class="hljs-variable language_">self</span>.x = x<br>        <span class="hljs-variable language_">self</span>.y = y<br>        <span class="hljs-variable language_">self</span>.kwargs = kwargs<br></code></pre></td></tr></table></figure><p>传递给<code>__init__</code>构造函数的参数在实例化类的参数时会重复。如果参数和参数不匹配，通常不会出现这种情况。幸运的是，dataclasses和attrs都可以帮助我们解决这个问题（我们将在后面看到）。</p><p>现在为了演示dataclasses和attrs为我们自动化的所有不同功能，让我们定义一个函数，该函数接受类构造函数并为我们每个类打印出所有不同的元素。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">class_tester</span>(<span class="hljs-params">class_constructor</span>):<br>    test_class_1 = class_constructor()<br>    test_class_2 = class_constructor()<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Repr/str魔术方法表示: <span class="hljs-subst">&#123;test_class_1&#125;</span>&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;相等性魔术方法（使用==）（如果实现应为True）: <span class="hljs-subst">&#123;test_class_1 == test_class_2&#125;</span>&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;相等性魔术方法（使用is）（如果实现应为True）: <span class="hljs-subst">&#123;test_class_1 <span class="hljs-keyword">is</span> test_class_2&#125;</span>&quot;</span>)<br><br>class_tester(Data)<br></code></pre></td></tr></table></figure><p>输出：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">Repr/str魔术方法表示: &lt;__main__.Data object at 0x00000269A5758A90&gt;<br>相等性魔术方法（使用==）（如果实现应为True）: False<br>相等性魔术方法（使用is）（如果实现应为True）: False<br></code></pre></td></tr></table></figure><h2 id="Dataclasses"><a href="#Dataclasses" class="headerlink" title="Dataclasses"></a>Dataclasses</h2><p>Dataclasses默认自动为类初始化一堆魔术方法，例如：</p><ul><li><code>__init__</code> 类的初始化方法</li><li><code>__repr__</code> 类在使用print()时的表示方式</li><li><code>__str__</code> 类作为字符串的表示方式（与<code>__repr__</code>一起调用）</li><li><code>__eq__</code> 使用相等运算符时使用（例如，&#x3D;&#x3D;）</li><li><code>__hash__</code> 类的哈希值（与<code>__eq__</code>一起调用）</li></ul><p>还有其他一堆也可以自动化的魔术方法，详情见：<a href="https://docs.python.org/3/library/dataclasses.html">https://docs.python.org/3/library/dataclasses.html</a></p><p>感谢Twitter上的Michael Kosher：值得注意的是，可以使用<code>__post_init__</code>钩子向dataclasses添加验证。但是，相对于attrs&#x2F;#pydantic来说，它相当低级。我做了类似的比较：<a href="https://mpkocher.github.io/2019/05/22/Dataclasses-in-Python-3-7/">https://mpkocher.github.io/2019/05/22/Dataclasses-in-Python-3-7/</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> dataclasses <span class="hljs-keyword">import</span> dataclass<br><br><span class="hljs-meta">@dataclass</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Data</span>:<br>    x: <span class="hljs-built_in">float</span> = <span class="hljs-literal">None</span><br>    y: <span class="hljs-built_in">float</span> = <span class="hljs-literal">None</span><br>    kwargs: typing.<span class="hljs-type">Dict</span> = <span class="hljs-literal">None</span><br><br>class_tester(Data)<br></code></pre></td></tr></table></figure><p>输出：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">Repr/str魔术方法表示: Data(x=None, y=None, kwargs=None)<br>相等性魔术方法（使用==）（如果实现应为True）: True<br>相等性魔术方法（使用is）（如果实现应为True）: False<br></code></pre></td></tr></table></figure><h2 id="Attrs"><a href="#Attrs" class="headerlink" title="Attrs"></a>Attrs</h2><p>最后我们有了attrs类，attrs有两个主要的”函数”：<code>attr.s</code>和<code>attr.ib()</code>。<code>attr.s</code>是放在类上的装饰器，用于让包为我们初始化魔术方法，而<code>attr.ib()</code>可以（可选）用于定义类的参数。<code>attr.s</code>和<code>attr.ib()</code>都有许多可选参数，文档在：<a href="https://www.attrs.org/en/stable/api.html%E3%80%82%E4%B8%BB%E8%A6%81%E5%8F%AF%E9%80%89%E5%8F%82%E6%95%B0%E7%94%A8%E4%BA%8E%E5%90%AF%E7%94%A8/%E7%A6%81%E7%94%A8%E7%B1%BB%E4%B8%AD%E7%9A%84%E4%B8%8D%E5%90%8C%E9%AD%94%E6%9C%AF%E6%96%B9%E6%B3%95%E3%80%82">https://www.attrs.org/en/stable/api.html。主要可选参数用于启用/禁用类中的不同魔术方法。</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> attr<br><br><span class="hljs-meta">@attr.s</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Data</span>:<br>    x: <span class="hljs-built_in">float</span> = attr.ib(default=<span class="hljs-literal">None</span>)<br>    y: <span class="hljs-built_in">float</span> = attr.ib(default=<span class="hljs-literal">None</span>)<br>    kwargs: typing.<span class="hljs-type">Dict</span> = attr.ib(default=<span class="hljs-literal">None</span>)<br><br>class_tester(Data)<br></code></pre></td></tr></table></figure><p>输出：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">Repr/str魔术方法表示: Data(x=None, y=None, kwargs=None)<br>相等性魔术方法（使用==）（如果实现应为True）: True<br>相等性魔术方法（使用is）（如果实现应为True）: False<br></code></pre></td></tr></table></figure><h2 id="Attrs深入"><a href="#Attrs深入" class="headerlink" title="Attrs深入"></a>Attrs深入</h2><h3 id="Attrs中的验证器"><a href="#Attrs中的验证器" class="headerlink" title="Attrs中的验证器"></a>Attrs中的验证器</h3><p>attrs有一个主要功能而dataclasses没有，那就是验证器。这使我们能够确保在创建类时验证输入到任何特定值。让我们构建一个示例，确保我们的参数x大于42，如果不是，则向用户引发错误。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> attr<br><br><span class="hljs-meta">@attr.s</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ValidatedData</span>:<br>    x: <span class="hljs-built_in">float</span> = attr.ib(default=<span class="hljs-literal">None</span>,validator=attr.validators.instance_of(<span class="hljs-built_in">int</span>))<br>    y: <span class="hljs-built_in">float</span> = attr.ib(default=<span class="hljs-literal">None</span>)<br>    kwargs: typing.<span class="hljs-type">Dict</span> = attr.ib(default=<span class="hljs-literal">None</span>)<br><br><span class="hljs-meta">    @x.validator</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">more_than_the_meaning_of_life</span>(<span class="hljs-params">self, attribute, value</span>):<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> value &gt;= <span class="hljs-number">42</span>:<br>            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">&quot;必须大于生命的意义！&quot;</span>)<br><br>test_data_point_1 = ValidatedData(<span class="hljs-number">42</span>)<br>test_data_point_2 = ValidatedData(-<span class="hljs-number">35</span>)  <span class="hljs-comment"># 这将引发ValueError</span><br></code></pre></td></tr></table></figure><h3 id="Attrs中的转换器"><a href="#Attrs中的转换器" class="headerlink" title="Attrs中的转换器"></a>Attrs中的转换器</h3><p>转换器用于在创建类时清理输入数据。如果我们想支持用户创建我们打算为整数的参数，我们可以使用转换器清理此输入。这使我们的类对用户更加灵活，同时仍保持参数背后类型的稳定性。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> attr<br><br><span class="hljs-meta">@attr.s</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConvertedData</span>:<br>    x: <span class="hljs-built_in">float</span> = attr.ib(default=<span class="hljs-literal">None</span>,converter=<span class="hljs-built_in">int</span>)<br>    y: <span class="hljs-built_in">float</span> = attr.ib(default=<span class="hljs-literal">None</span>)<br>    kwargs: typing.<span class="hljs-type">Dict</span> = attr.ib(default=<span class="hljs-literal">None</span>)<br><br><span class="hljs-meta">    @x.validator</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">more_than_the_meaning_of_life</span>(<span class="hljs-params">self, attribute, value</span>):<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> value &gt;= <span class="hljs-number">42</span>:<br>            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">&quot;必须大于生命的意义！&quot;</span>)<br><br>test_data_point_1 = ConvertedData(<span class="hljs-number">42</span>)<br><span class="hljs-built_in">print</span>(test_data_point_1)<br><br>test_data_point_2 = ConvertedData(<span class="hljs-string">&quot;42&quot;</span>)  <span class="hljs-comment"># 字符串&quot;42&quot;将被转换为整数42</span><br><span class="hljs-built_in">print</span>(test_data_point_2)<br></code></pre></td></tr></table></figure><p>输出：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">ConvertedData(x=42, y=None, kwargs=None)<br>ConvertedData(x=42, y=None, kwargs=None)<br></code></pre></td></tr></table></figure><h3 id="Attrs的编程式创建"><a href="#Attrs的编程式创建" class="headerlink" title="Attrs的编程式创建"></a>Attrs的编程式创建</h3><p>在某些情况下，您可能希望以编程方式创建类，好吧，attrs不会让我们失望，并为我们提供了一种方法！我们可以轻松地传递所需的所有参数字典。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">ProgrammaticData = attr.make_class(<span class="hljs-string">&quot;Data&quot;</span>,<br>                            &#123;<span class="hljs-string">&#x27;x&#x27;</span>: attr.ib(default=<span class="hljs-literal">None</span>),<br>                            <span class="hljs-string">&#x27;y&#x27;</span>: attr.ib(default=<span class="hljs-literal">None</span>),<br>                            <span class="hljs-string">&#x27;kwargs&#x27;</span>: attr.ib(default=<span class="hljs-literal">None</span>)&#125;<br>                            )<br><br><span class="hljs-built_in">print</span>(Data())<br><span class="hljs-built_in">print</span>(ProgrammaticData())<br></code></pre></td></tr></table></figure><p>输出：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">Data(x=None, y=None, kwargs=None)<br>Data(x=None, y=None, kwargs=None)<br></code></pre></td></tr></table></figure><h2 id="Pydantic-Dataclasses"><a href="#Pydantic-Dataclasses" class="headerlink" title="Pydantic Dataclasses"></a>Pydantic Dataclasses</h2><p>Pydantic是一个使用Python类型注解进行数据验证和设置管理的Python包。完美，这正是我们试图用dataclasses和attrs做的事情。更重要的是，pydantic提供了一个dataclass装饰器，以在我们的dataclasses上启用数据验证。这使我们能够创建具有数据验证的可扩展类，甚至比attrs更容易！</p><p>这里的最大好处是，默认情况下，类型注解在运行时被强制执行，任何无效数据都会引发格式良好的错误。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pydantic.dataclasses <span class="hljs-keyword">import</span> dataclass<br><span class="hljs-keyword">import</span> typing<br><br><span class="hljs-meta">@dataclass</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Data</span>:<br>    x: <span class="hljs-built_in">float</span> = <span class="hljs-literal">None</span><br>    y: <span class="hljs-built_in">float</span> = <span class="hljs-literal">None</span><br>    kwargs: typing.<span class="hljs-type">Dict</span> = <span class="hljs-literal">None</span><br><br>class_tester(Data)<br></code></pre></td></tr></table></figure><p>输出：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">Repr/str魔术方法表示: Data(x=None, y=None, kwargs=None)<br>相等性魔术方法（使用==）（如果实现应为True）: True<br>相等性魔术方法（使用is）（如果实现应为True）: False<br></code></pre></td></tr></table></figure><p>pydantic还自动实现转换和数据验证，让我们测试一下。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">test_data_point = Data(x=<span class="hljs-string">&#x27;123&#x27;</span>)  <span class="hljs-comment"># 字符串&#x27;123&#x27;被转换为浮点数123.0</span><br><span class="hljs-built_in">print</span>(test_data_point)<br><br>test_data_point_2 = Data(x=<span class="hljs-string">&#x27;t&#x27;</span>)  <span class="hljs-comment"># 这将引发ValidationError</span><br></code></pre></td></tr></table></figure><p>输出：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">Data(x=123.0, y=None, kwargs=None)<br>ValidationError: 1 validation error for Data<br>x<br>  value is not a valid float (type=type_error.float)<br></code></pre></td></tr></table></figure><p>正如我们在上面看到的，当数据验证失败时，它向开发人员提供了一个格式良好的错误消息，并在需要时平滑地清理输入。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Working Effectively with Legacy Code</title>
      <link href="/2025/12/01/Working-Effectively-with-Legacy-Code/"/>
      <url>/2025/12/01/Working-Effectively-with-Legacy-Code/</url>
      
        <content type="html"><![CDATA[<h3 id="《Working-Effectively-with-Legacy-Code》核心内容总结"><a href="#《Working-Effectively-with-Legacy-Code》核心内容总结" class="headerlink" title="《Working Effectively with Legacy Code》核心内容总结"></a>《Working Effectively with Legacy Code》核心内容总结</h3><h4 id="一、书籍定位与目标"><a href="#一、书籍定位与目标" class="headerlink" title="一、书籍定位与目标"></a><strong>一、书籍定位与目标</strong></h4><p>《Working Effectively with Legacy Code》（以下简称《Working Effectively with Legacy Code》）是<strong>Michael C. Feathers</strong>的经典著作，2004年由Prentice Hall出版，是<strong>遗留代码处理领域的奠基之作</strong>。其核心目标是帮助开发者<strong>系统性地应对未经测试的遗留代码库</strong>，解决“修改遗留代码时怕破坏现有功能”“不知道如何开始重构”等实际问题，提升代码的可维护性与扩展性。</p><h4 id="二、核心概念：遗留代码的定义与问题"><a href="#二、核心概念：遗留代码的定义与问题" class="headerlink" title="二、核心概念：遗留代码的定义与问题"></a><strong>二、核心概念：遗留代码的定义与问题</strong></h4><p><strong>遗留代码（Legacy Code）</strong>：书中明确将其定义为<strong>“没有测试的代码”</strong>。这类代码的核心问题在于：  </p><ul><li><strong>无法快速验证修改</strong>：没有测试用例，修改后无法确定是否引入了新的bug；  </li><li><strong>设计腐化</strong>：长期缺乏维护导致代码结构混乱（如过长函数、过大类、重复逻辑）；  </li><li><strong>修改风险高</strong>：不清楚代码的业务逻辑与依赖关系，修改一处可能影响多处。</li></ul><h4 id="三、关键原则：“Cover-and-Modify”（覆盖与修改）"><a href="#三、关键原则：“Cover-and-Modify”（覆盖与修改）" class="headerlink" title="三、关键原则：“Cover and Modify”（覆盖与修改）"></a><strong>三、关键原则：“Cover and Modify”（覆盖与修改）</strong></h4><p>书中提出的解决遗留代码问题的核心策略是<strong>“Cover and Modify”</strong>（覆盖与修改），具体步骤如下：  </p><ol><li><strong>Cover（覆盖）</strong>：<br>在修改代码前，先为需要修改的部分<strong>编写单元测试</strong>（或补充现有测试），确保测试覆盖所有关键逻辑（如输入边界、异常情况）。这一步的目的是“锁定”现有行为，避免修改后出现回归错误。  </li><li><strong>Modify（修改）</strong>：<br>在测试覆盖的基础上，对代码进行重构或功能修改。修改时遵循“小步前进”原则（每次只改一小部分），修改后立即运行测试，确保行为不变。</li></ol><p><strong>注</strong>：“Cover and Modify”与“Edit and Pray”（编辑并祈祷）形成对比——后者是直接修改代码而不测试，风险极高；前者通过测试保障修改的安全性。</p><h4 id="四、具体技术与实践：如何覆盖与修改"><a href="#四、具体技术与实践：如何覆盖与修改" class="headerlink" title="四、具体技术与实践：如何覆盖与修改"></a><strong>四、具体技术与实践：如何覆盖与修改</strong></h4><p>书中针对不同的遗留代码场景，提供了具体的<strong>覆盖与修改</strong>技术：  </p><ol><li><strong>处理依赖问题</strong>：<br>遗留代码往往存在复杂的依赖关系（如全局变量、静态方法、第三方库），修改时需要<strong>隔离依赖</strong>。例如：  <ul><li>使用“接缝”（Seam）技术：找到代码中可以修改的“入口”（如方法调用、接口实现），通过依赖注入（DI）或模拟对象（Mock）替换依赖；  </li><li>提取接口：将依赖的类抽象为接口，通过接口调用替代直接依赖。</li></ul></li><li><strong>重构技巧</strong>：<br>书中推荐了多种安全的重构手法，例如：  <ul><li><strong>提炼函数（Extract Method）</strong>：将长函数中的逻辑块提取为独立函数，减少函数复杂度；  </li><li><strong>提炼类（Extract Class）</strong>：将大类中的职责分离到新类中（如将“订单处理”与“库存管理”分离）；  </li><li><strong>搬移函数（Move Method）</strong>：将方法从分散的类移动到同一个类中，减少类间依赖。</li></ul></li><li><strong>测试策略</strong>：  <ul><li><strong>单元测试优先</strong>：优先为核心业务逻辑编写单元测试（如计算订单总价的函数），再补充集成测试（如订单处理流程）；  </li><li><strong>自动化测试</strong>：使用测试框架（如JUnit、TestNG）自动化运行测试，确保每次修改后都能快速验证。</li></ul></li></ol><h4 id="五、实践建议：如何开始"><a href="#五、实践建议：如何开始" class="headerlink" title="五、实践建议：如何开始"></a><strong>五、实践建议：如何开始</strong></h4><p>书中给出了针对遗留代码的<strong>实践步骤</strong>：  </p><ol><li><strong>理解上下文</strong>：<br>先了解代码的历史（如创建时间、作者、修改记录）、业务需求（如“这个模块是做什么的？”），避免因“不了解背景”而误改代码。  </li><li><strong>映射架构</strong>：<br>绘制代码的<strong>架构图</strong>（如组件图、数据流图），识别核心模块（如“订单处理”“支付系统”）与依赖关系，优先处理核心模块。  </li><li><strong>从小处着手</strong>：<br>不要试图一次性重构整个代码库，而是从“小功能”（如添加一个新特性、修复一个bug）开始，逐步积累经验。  </li><li><strong>保留签名</strong>：<br>修改方法时，尽量保持方法签名不变（如不修改参数列表、返回值类型），避免影响调用方。</li></ol><h4 id="六、总结"><a href="#六、总结" class="headerlink" title="六、总结"></a><strong>六、总结</strong></h4><p>《Working Effectively with Legacy Code》的核心是<strong>“用测试驱动修改”</strong>，通过“Cover and Modify”策略解决遗留代码的“修改风险”问题。书中提供的具体技术与实践（如单元测试、重构手法、依赖隔离），是开发者应对遗留代码的“实用手册”。其价值在于<strong>将“经验”转化为“体系”</strong>，让开发者有章可循，避免“盲目修改”导致的代码崩溃。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>The Pragmatic Programmer</title>
      <link href="/2025/12/01/The-Pragmatic-Programmer/"/>
      <url>/2025/12/01/The-Pragmatic-Programmer/</url>
      
        <content type="html"><![CDATA[<h3 id="《The-Pragmatic-Programmer-From-Journeyman-to-Master》核心内容总结"><a href="#《The-Pragmatic-Programmer-From-Journeyman-to-Master》核心内容总结" class="headerlink" title="《The Pragmatic Programmer: From Journeyman to Master》核心内容总结"></a>《The Pragmatic Programmer: From Journeyman to Master》核心内容总结</h3><h4 id="一、书籍定位与目标读者"><a href="#一、书籍定位与目标读者" class="headerlink" title="一、书籍定位与目标读者"></a><strong>一、书籍定位与目标读者</strong></h4><p>《The Pragmatic Programmer: From Journeyman to Master》是<strong>Andrew Hunt</strong>和<strong>David Thomas</strong>合著的经典软件开发书籍，1999年由Addison-Wesley出版（2019年推出20周年纪念版）。其核心目标是帮助程序员<strong>从“新手”成长为“专家”</strong>，聚焦“务实”的编程哲学与实践，适合有一定工程经验、希望提升技能的开发者阅读。</p><h4 id="二、核心哲学：务实编程的四大基石"><a href="#二、核心哲学：务实编程的四大基石" class="headerlink" title="二、核心哲学：务实编程的四大基石"></a><strong>二、核心哲学：务实编程的四大基石</strong></h4><p>书中提出的“务实编程”并非具体的技术栈，而是一种<strong>思维方式与工作态度</strong>，核心基石包括：  </p><ol><li><strong>对自己负责</strong>：程序员需主动承担代码质量责任，不推诿问题（如“这不是我的错”），积极寻找解决方案。  </li><li><strong>持续学习</strong>：技术迭代迅速，需保持好奇心，定期学习新工具、框架与方法论（如每年掌握一门新语言）。  </li><li><strong>敏捷适应</strong>：拥抱变化（如需求调整、技术升级），用迭代思维应对不确定性（如敏捷开发中的“短周期交付”）。  </li><li><strong>注重实效</strong>：关注代码的<strong>实际价值</strong>（如是否解决用户需求、是否易于维护），而非追求“完美”或“炫技”。</li></ol><h4 id="三、关键原则：提升代码质量的核心实践"><a href="#三、关键原则：提升代码质量的核心实践" class="headerlink" title="三、关键原则：提升代码质量的核心实践"></a><strong>三、关键原则：提升代码质量的核心实践</strong></h4><p>书中总结了多个<strong>经久不衰的编程原则</strong>，其中最具影响力的是：  </p><ul><li><strong>DRY（Don’t Repeat Yourself）</strong>：避免代码重复（如将公共逻辑提取为函数&#x2F;模块），减少冗余与维护成本。  </li><li><strong>KISS（Keep It Simple, Stupid）</strong>：追求简单性，避免不必要的复杂（如用“if-else”替代复杂的嵌套逻辑）。  </li><li><strong>正交性（Orthogonality）</strong>：模块间低耦合，一个模块的变化不影响其他模块（如微服务架构中的“独立部署”）。  </li><li><strong>迭代开发</strong>：通过“假设-测试-调整”循环推进项目（如敏捷中的“Sprint规划”），避免“一次性设计”。</li></ul><h4 id="四、实用技巧：日常开发的“行动指南”"><a href="#四、实用技巧：日常开发的“行动指南”" class="headerlink" title="四、实用技巧：日常开发的“行动指南”"></a><strong>四、实用技巧：日常开发的“行动指南”</strong></h4><p>书中提供了大量<strong>可落地的技巧</strong>，帮助开发者解决实际问题：  </p><ul><li><strong>Rubber Duck Debugging</strong>：通过“向橡皮鸭解释问题”梳理逻辑，快速定位bug（如“为什么这个函数返回错误？”）。  </li><li><strong>Tracer Bullets</strong>：用“最小可行代码”验证思路（如先实现核心功能，再逐步扩展），避免方向性错误。  </li><li><strong>代码评审（Code Review）</strong>：通过团队协作发现潜在问题（如逻辑漏洞、代码异味），提升代码质量。  </li><li><strong>自动化测试</strong>：用单元测试、集成测试覆盖核心逻辑，减少回归错误（如“测试驱动开发”TDD）。</li></ul><h4 id="五、质量保障：构建可靠的软件系统"><a href="#五、质量保障：构建可靠的软件系统" class="headerlink" title="五、质量保障：构建可靠的软件系统"></a><strong>五、质量保障：构建可靠的软件系统</strong></h4><p>书中强调“质量是设计出来的”，而非“测试出来的”，核心方法包括：  </p><ul><li><strong>模块化设计</strong>：将系统拆分为独立模块（如“单一职责原则”），降低复杂度。  </li><li><strong>契约式设计（DBC）</strong>：用“前置条件（@pre）”“后置条件（@post）”明确接口契约，避免“未定义行为”。  </li><li><strong>持续集成&#x2F;部署（CI&#x2F;CD）</strong>：通过自动化构建、测试、部署，确保代码随时可发布（如GitHub Actions、Jenkins）。</li></ul><h4 id="六、适应变化：应对不确定性的策略"><a href="#六、适应变化：应对不确定性的策略" class="headerlink" title="六、适应变化：应对不确定性的策略"></a><strong>六、适应变化：应对不确定性的策略</strong></h4><p>书中认为“变化是常态”，需通过以下方式应对：  </p><ul><li><strong>敏捷迭代</strong>：用“短周期交付”（如Sprint）快速响应需求变化，避免“大规模重构”。  </li><li><strong>低耦合架构</strong>：减少模块间依赖（如用接口替代直接调用），降低变更影响范围。  </li><li><strong>用户早期参与</strong>：与用户共同验证需求（如“MVP最小可行产品”），避免方向性错误。</li></ul><h4 id="七、总结"><a href="#七、总结" class="headerlink" title="七、总结"></a><strong>七、总结</strong></h4><p>《The Pragmatic Programmer: From Journeyman to Master》并非一本“技术手册”，而是一本“<strong>软件工艺指南</strong>”。它强调“务实”的态度——不追求“完美”，但追求“有效”；不追求“复杂”，但追求“简洁”。书中内容覆盖“个人成长”“团队协作”“架构设计”等多个维度，适合开发者反复阅读（如每年重读一次），每次都能获得新的启发。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>The Mythical Man Month</title>
      <link href="/2025/12/01/The-Mythical-Man-Month/"/>
      <url>/2025/12/01/The-Mythical-Man-Month/</url>
      
        <content type="html"><![CDATA[<h3 id="《人月神话》核心内容总结"><a href="#《人月神话》核心内容总结" class="headerlink" title="《人月神话》核心内容总结"></a>《人月神话》核心内容总结</h3><h4 id="一、书籍基本信息"><a href="#一、书籍基本信息" class="headerlink" title="一、书籍基本信息"></a><strong>一、书籍基本信息</strong></h4><p>《人月神话》（<em>The Mythical Man-Month: Essays on Software Engineering</em>）是**Frederick P. Brooks, Jr.**（弗雷德里克·布鲁克斯）的经典软件工程著作，1975年首次出版，1995年推出20周年纪念版（新增《没有银弹》等章节）。作为软件工程领域的“圣经”，本书基于作者1960年代领导IBM System&#x2F;360及OS&#x2F;360操作系统开发的实战经验，揭示了大型软件开发中的根本性挑战与误区，至今仍对行业产生深远影响。</p><h4 id="二、核心观点与主题"><a href="#二、核心观点与主题" class="headerlink" title="二、核心观点与主题"></a><strong>二、核心观点与主题</strong></h4><p>本书的核心主题是<strong>“软件开发中的人与时间不可简单互换”</strong>，围绕这一主题展开了一系列关键论断：  </p><h5 id="1-人月神话（The-Mythical-Man-Month）"><a href="#1-人月神话（The-Mythical-Man-Month）" class="headerlink" title="1. 人月神话（The Mythical Man-Month）"></a>1. <strong>人月神话（The Mythical Man-Month）</strong></h5><p><strong>核心论断</strong>：工作量&#x3D;人×时间的公式在软件项目中是错误的。增加人手未必能按比例缩短开发时间，反而可能因沟通成本上升、新人培训负担加重，导致项目更晚完成。<br><strong>布鲁克斯法则（Brooks’ Law）</strong>：“向进度落后的软件项目增加人手，只会使它更落后。” 这一法则源于作者在OS&#x2F;360项目中增加人手的失败经历，强调沟通成本的非线性增长（n人团队的沟通路径为n(n-1)&#x2F;2）远超过任务分解的收益。  </p><h5 id="2-概念完整性（Conceptual-Integrity）"><a href="#2-概念完整性（Conceptual-Integrity）" class="headerlink" title="2. 概念完整性（Conceptual Integrity）"></a>2. <strong>概念完整性（Conceptual Integrity）</strong></h5><p><strong>核心论断</strong>：系统的概念完整性是其成功的关键，应由少数设计师（甚至一人）主导整体架构，避免“各做一块”的碎片化设计。<br><strong>实践意义</strong>：概念完整性能确保系统的一致性、简洁性与可维护性，减少因设计分歧导致的返工。例如，OS&#x2F;360项目的成功部分归因于布鲁克斯对系统架构的严格控制。  </p><h5 id="3-第二系统效应（The-Second-System-Effect）"><a href="#3-第二系统效应（The-Second-System-Effect）" class="headerlink" title="3. 第二系统效应（The Second-System Effect）"></a>3. <strong>第二系统效应（The Second-System Effect）</strong></h5><p><strong>核心论断</strong>：设计者在第二个系统中容易陷入“过度设计”的陷阱，试图加入所有第一个系统“忍住没做”的功能，导致系统臃肿、难以维护。<br><strong>实践意义</strong>：强调“少即是多”的设计原则，要求设计者克制“功能贪婪”，专注于核心需求。  </p><h5 id="4-没有银弹（No-Silver-Bullet）"><a href="#4-没有银弹（No-Silver-Bullet）" class="headerlink" title="4. 没有银弹（No Silver Bullet）"></a>4. <strong>没有银弹（No Silver Bullet）</strong></h5><p><strong>核心论断</strong>：软件开发中没有能解决所有问题的“万能方法”（银弹）。软件的复杂性、一致性、可变性、不可见性等本质困难，无法通过单一技术或管理方法彻底解决。<br><strong>实践意义</strong>：提醒开发者理性看待技术突破，避免盲目追求“银弹”，而是通过持续改进（如增量开发、原型驱动）应对挑战。  </p><h4 id="三、关键实践建议"><a href="#三、关键实践建议" class="headerlink" title="三、关键实践建议"></a><strong>三、关键实践建议</strong></h4><p>除了核心观点，本书还提供了大量针对大型软件开发的具体实践建议：  </p><h5 id="1-外科手术团队（The-Surgical-Team）"><a href="#1-外科手术团队（The-Surgical-Team）" class="headerlink" title="1. 外科手术团队（The Surgical Team）"></a>1. <strong>外科手术团队（The Surgical Team）</strong></h5><p><strong>模型</strong>：由1位“主程序员”（外科医生）主导设计，搭配副手、测试、文档等辅助人员（类似手术团队的分工）。<br><strong>优势</strong>：减少沟通成本，保持概念完整性，适合大型系统的设计与开发。  </p><h5 id="2-文档驱动设计（Documentation-Driven-Design）"><a href="#2-文档驱动设计（Documentation-Driven-Design）" class="headerlink" title="2. 文档驱动设计（Documentation-Driven Design）"></a>2. <strong>文档驱动设计（Documentation-Driven Design）</strong></h5><p><strong>核心</strong>：将文档视为“思维的延伸”，通过文档化暴露逻辑漏洞，确保团队成员对系统设计的理解一致。<br><strong>实践</strong>：倡导“外部规格说明”“用户文档”“维护文档”等，作为团队协作的桥梁。  </p><h5 id="3-增量开发（Incremental-Development）"><a href="#3-增量开发（Incremental-Development）" class="headerlink" title="3. 增量开发（Incremental Development）"></a>3. <strong>增量开发（Incremental Development）</strong></h5><p><strong>核心</strong>：将项目分解为可管理的子项目，逐步构建并测试，避免一次性完成所有功能的“大爆炸”式开发。<br><strong>优势</strong>：降低风险，允许早期反馈，便于调整方向。  </p><h4 id="四、影响与评价"><a href="#四、影响与评价" class="headerlink" title="四、影响与评价"></a><strong>四、影响与评价</strong></h4><p>《人月神话》自出版以来，一直是软件工程领域的经典参考书，其观点（如布鲁克斯法则、概念完整性）被广泛应用于项目管理、团队协作与系统设计中。尽管部分观点（如“没有银弹”）在现代敏捷开发（如Scrum、DevOps）中有所调整，但本书的核心思想（如沟通成本、设计一致性）仍具有普遍性和稳定性，是软件工程师提升项目管理能力、应对复杂项目的必备读物。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Test Driven Development</title>
      <link href="/2025/12/01/Test-Driven-Development/"/>
      <url>/2025/12/01/Test-Driven-Development/</url>
      
        <content type="html"><![CDATA[<h3 id="《Test-Driven-Development-By-Example》核心内容总结"><a href="#《Test-Driven-Development-By-Example》核心内容总结" class="headerlink" title="《Test-Driven Development: By Example》核心内容总结"></a>《Test-Driven Development: By Example》核心内容总结</h3><h4 id="一、书籍定位与目标"><a href="#一、书籍定位与目标" class="headerlink" title="一、书籍定位与目标"></a><strong>一、书籍定位与目标</strong></h4><p>《Test-Driven Development: By Example》是<strong>Kent Beck</strong>（肯特·贝克）的经典测试驱动开发（TDD）著作，2003年出版，是TDD领域的奠基之作。其核心目标是<strong>通过“测试先行”的开发模式，帮助开发者编写更健壮、可维护的代码</strong>，同时解决传统开发中“先写代码再补测试”的痛点。</p><h4 id="二、核心思想：TDD的“红-绿-重构”循环"><a href="#二、核心思想：TDD的“红-绿-重构”循环" class="headerlink" title="二、核心思想：TDD的“红-绿-重构”循环"></a><strong>二、核心思想：TDD的“红-绿-重构”循环</strong></h4><p>TDD的本质是<strong>用测试驱动设计</strong>，其核心流程可概括为三个步骤（“红-绿-重构”），循环迭代：  </p><ol><li><strong>红（Red）</strong>：编写一个<strong>失败的自动化测试</strong>（测试目标功能尚未实现，或行为不符合预期）。  </li><li><strong>绿（Green）</strong>：编写<strong>最小量的代码</strong>，使测试通过（不追求完美设计，仅满足当前测试需求）。  </li><li><strong>重构（Refactor）</strong>：优化代码结构（消除重复、简化逻辑），同时保持测试通过（不改变代码外在行为）。</li></ol><p>这一循环强调<strong>“小步前进”</strong>，每一步都通过测试验证，确保代码始终处于可工作状态。</p><h4 id="三、关键原则：两大核心规则"><a href="#三、关键原则：两大核心规则" class="headerlink" title="三、关键原则：两大核心规则"></a><strong>三、关键原则：两大核心规则</strong></h4><p>书中提出TDD的两大核心规则，贯穿整个开发过程：  </p><ol><li><strong>“测试先行”规则</strong>：<strong>必须先写测试，再写实现代码</strong>。测试是需求的“可执行规范”，能提前暴露设计问题，避免“过度设计”或“方向性错误”。  </li><li><strong>“消除重复”规则</strong>：<strong>代码中不允许存在重复逻辑</strong>（包括测试代码与实现代码的重复、实现代码内部的重复）。重复是代码腐化的根源，消除重复能提升代码的可维护性和可扩展性。</li></ol><h4 id="四、实践案例：从简单到复杂的TDD流程"><a href="#四、实践案例：从简单到复杂的TDD流程" class="headerlink" title="四、实践案例：从简单到复杂的TDD流程"></a><strong>四、实践案例：从简单到复杂的TDD流程</strong></h4><p>书中通过<strong>“Money值对象”</strong>的案例，详细演示了TDD的实践流程：  </p><ol><li><strong>需求分析</strong>：将需求转化为<strong>测试用例</strong>（如“1美元乘以2应等于2美元”“1美元加1美元应等于2美元”），每个测试用例对应一个具体的业务场景。  </li><li><strong>测试编写</strong>：先写“失败”的测试（如<code>testMultiplication()</code>，预期结果为2，但当前实现返回0），确保测试能有效验证功能。  </li><li><strong>最小实现</strong>：编写刚好通过测试的代码（如<code>Dollar</code>类的<code>times()</code>方法，直接返回硬编码的2），不添加任何额外逻辑。  </li><li><strong>重构优化</strong>：消除重复（如将“1美元”的初始化代码提取为常量），简化逻辑（如将<code>times()</code>方法的实现从“硬编码”改为“真正的乘法运算”），同时保持测试通过。</li></ol><h4 id="五、TDD的优势：为什么选择它？"><a href="#五、TDD的优势：为什么选择它？" class="headerlink" title="五、TDD的优势：为什么选择它？"></a><strong>五、TDD的优势：为什么选择它？</strong></h4><p>书中强调TDD的<strong>三大核心优势</strong>，解决传统开发的痛点：  </p><ol><li><strong>更高的代码质量</strong>：每个功能都有对应的测试覆盖，能快速发现回归错误（如修改一处代码不会破坏其他功能）。  </li><li><strong>更清晰的设计</strong>：测试先行迫使开发者从“用户角度”思考问题（如“这个方法应该返回什么？”“这个类的职责是什么？”），避免过度设计（如不会提前添加“可能用不到”的功能）。  </li><li><strong>更快的反馈</strong>：测试能即时验证代码的正确性，减少后期调试的时间（如“写完一个测试，立刻知道功能是否正确”）。</li></ol><h4 id="六、扩展思考：TDD与设计的关系"><a href="#六、扩展思考：TDD与设计的关系" class="headerlink" title="六、扩展思考：TDD与设计的关系"></a><strong>六、扩展思考：TDD与设计的关系</strong></h4><p>书中提到，TDD不是“测试技术”，而是<strong>设计技术</strong>。通过测试先行，开发者能更早地发现设计问题（如“这个类的方法太多了，需要拆分”“这个接口的职责不清晰”），并在重构阶段优化设计。例如，在“Money值对象”的案例中，通过测试驱动，最终得到了<strong>高内聚、低耦合</strong>的设计（<code>Dollar</code>类只负责美元的计算，<code>Money</code>类负责通用的货币操作）。</p><h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a><strong>总结</strong></h4><p>《Test-Driven Development: By Example》不仅是一本TDD工具书，更是一本<strong>“如何思考设计”的哲学书</strong>。它通过“红-绿-重构”的循环、两大核心规则和具体案例，教会开发者如何用测试驱动设计，编写更健壮、可维护的代码。对于想要提升代码质量的开发者来说，这本书是“必读书单”的TOP1。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Refactoring</title>
      <link href="/2025/12/01/Refactoring/"/>
      <url>/2025/12/01/Refactoring/</url>
      
        <content type="html"><![CDATA[<h3 id="《Refactoring-Improving-the-Design-of-Existing-Code》核心内容总结"><a href="#《Refactoring-Improving-the-Design-of-Existing-Code》核心内容总结" class="headerlink" title="《Refactoring: Improving the Design of Existing Code》核心内容总结"></a>《Refactoring: Improving the Design of Existing Code》核心内容总结</h3><h4 id="一、书籍定位与目标读者"><a href="#一、书籍定位与目标读者" class="headerlink" title="一、书籍定位与目标读者"></a><strong>一、书籍定位与目标读者</strong></h4><p>《Refactoring: Improving the Design of Existing Code》是<strong>Martin Fowler</strong>（马丁·福勒）的经典软件开发书籍，1999年由Addison-Wesley出版（2019年推出20周年纪念版）。其核心目标是帮助开发者<strong>系统性地改善既有代码的设计</strong>，提升代码的可读性、可维护性与扩展性，适合有一定编程经验、希望解决“代码腐化”问题的开发者阅读。</p><h4 id="二、核心概念：重构的定义与价值"><a href="#二、核心概念：重构的定义与价值" class="headerlink" title="二、核心概念：重构的定义与价值"></a><strong>二、核心概念：重构的定义与价值</strong></h4><p><strong>重构（Refactoring）</strong> 是本书的核心主题，定义为：<strong>在不改变代码外在行为的前提下，对代码内部结构进行修改，以提高其可理解性、降低修改成本</strong>。<br>重构的核心价值在于：  </p><ul><li><strong>应对“代码腐化”</strong>：解决重复代码、过长函数、过大类等问题，避免代码变得难以理解和维护；  </li><li><strong>提升可扩展性</strong>：通过优化设计（如提取接口、使用多态），使代码更容易适应需求变化；  </li><li><strong>降低修改成本</strong>：减少因代码结构混乱导致的“霰弹式修改”（修改一处需要改动多处）；  </li><li><strong>改善团队协作</strong>：清晰的代码结构让团队成员更容易理解彼此的工作，减少沟通成本。</li></ul><h4 id="三、重构的时机与原则"><a href="#三、重构的时机与原则" class="headerlink" title="三、重构的时机与原则"></a><strong>三、重构的时机与原则</strong></h4><p><strong>何时重构？</strong>  </p><ul><li><strong>三次原则（Don Roberts准则）</strong>：第一次做某件事时只管去做；第二次做类似的事会产生反感，但仍可接受；第三次再做类似的事，就应该重构；  </li><li><strong>添加新功能前</strong>：重构现有代码，使新功能的添加更简单（如提取公共方法、消除重复代码）；  </li><li><strong>修补bug时</strong>：重构相关代码，避免bug再次出现（如简化复杂条件逻辑）；  </li><li><strong>代码评审时</strong>：通过重构消除代码异味（如过长参数列表、数据泥团），提升代码质量。</li></ul><p><strong>重构的原则</strong>：  </p><ul><li><strong>小步前进</strong>：每次重构只做一小部分，避免大规模修改导致的风险；  </li><li><strong>频繁测试</strong>：重构后立即运行测试，确保代码行为不变；  </li><li><strong>保留接口</strong>：尽量不修改公共接口（如方法签名），避免影响调用方；  </li><li><strong>避免过度设计</strong>：不要为了“完美”而引入不必要的抽象（如过早使用设计模式）。</li></ul><h4 id="四、常见代码“坏味道”与重构手法"><a href="#四、常见代码“坏味道”与重构手法" class="headerlink" title="四、常见代码“坏味道”与重构手法"></a><strong>四、常见代码“坏味道”与重构手法</strong></h4><p>本书详细列举了多种代码“坏味道”（Code Smells），并提供了对应的重构手法（Refactoring Techniques），以下是核心内容：  </p><h5 id="1-重复代码（Duplicated-Code）"><a href="#1-重复代码（Duplicated-Code）" class="headerlink" title="1. 重复代码（Duplicated Code）"></a><strong>1. 重复代码（Duplicated Code）</strong></h5><p><strong>问题</strong>：同一逻辑在多个地方重复（如不同子类的相同方法、不同模块的相同计算逻辑）。<br><strong>重构手法</strong>：  </p><ul><li><strong>提炼函数（Extract Method）</strong>：将重复代码提取为一个独立函数，通过函数调用替代重复代码；  </li><li><strong>提炼类（Extract Class）</strong>：如果重复代码涉及多个方法或字段，提取为一个新类，通过组合替代继承；  </li><li><strong>模板方法模式</strong>：如果重复代码有相似结构但细节不同，使用模板方法（父类定义算法骨架，子类实现具体步骤）。</li></ul><h5 id="2-过长函数（Long-Method）"><a href="#2-过长函数（Long-Method）" class="headerlink" title="2. 过长函数（Long Method）"></a><strong>2. 过长函数（Long Method）</strong></h5><p><strong>问题</strong>：函数过长（通常超过20行），难以理解其意图。<br><strong>重构手法</strong>：  </p><ul><li><strong>提炼函数（Extract Method）</strong>：将函数中的逻辑块（如循环、条件判断）提取为独立函数；  </li><li><strong>分解条件表达式（Decompose Conditional）</strong>：将复杂的if-else或switch语句拆分为多个小函数；  </li><li><strong>以查询取代临时变量（Replace Temp with Query）</strong>：将临时变量（如计算结果）替换为函数调用，减少函数参数。</li></ul><h5 id="3-过长参数列表（Long-Parameter-List）"><a href="#3-过长参数列表（Long-Parameter-List）" class="headerlink" title="3. 过长参数列表（Long Parameter List）"></a><strong>3. 过长参数列表（Long Parameter List）</strong></h5><p><strong>问题</strong>：函数参数过多（通常超过3个），难以理解和维护。<br><strong>重构手法</strong>：  </p><ul><li><strong>引入参数对象（Introduce Parameter Object）</strong>：将相关参数封装为一个对象（如<code>OrderDetails</code>），通过对象传递参数；  </li><li><strong>以函数取代参数（Replace Parameter with Methods）</strong>：如果参数是某个对象的属性，直接调用该对象的方法获取值；  </li><li><strong>保持对象完整（Preserve Whole Object）</strong>：如果参数是某个对象的部分属性，直接传递整个对象。</li></ul><h5 id="4-过大类（Large-Class）"><a href="#4-过大类（Large-Class）" class="headerlink" title="4. 过大类（Large Class）"></a><strong>4. 过大类（Large Class）</strong></h5><p><strong>问题</strong>：类包含过多字段或方法，职责不单一（如“上帝类”）。<br><strong>重构手法</strong>：  </p><ul><li><strong>提炼类（Extract Class）</strong>：将类的部分职责提取为新类（如将“订单处理”和“库存管理”分离）；  </li><li><strong>提炼子类（Extract Subclass）</strong>：如果类的部分行为只适用于特定场景，提取为子类（如<code>RegularOrder</code>和<code>VIPOrder</code>）；  </li><li><strong>接口隔离（Interface Segregation）</strong>：如果类实现了多个不相关的接口，将其拆分为多个小接口。</li></ul><h5 id="5-发散式变化（Divergent-Change）"><a href="#5-发散式变化（Divergent-Change）" class="headerlink" title="5. 发散式变化（Divergent Change）"></a><strong>5. 发散式变化（Divergent Change）</strong></h5><p><strong>问题</strong>：一个类因不同原因频繁修改（如“订单类”既修改价格计算逻辑，又修改库存逻辑）。<br><strong>重构手法</strong>：  </p><ul><li><strong>提炼类（Extract Class）</strong>：将不同职责的代码分离到不同类中（如<code>PriceCalculator</code>和<code>InventoryManager</code>）；  </li><li><strong>细粒度化（Split Responsibility）</strong>：将类的方法拆分为更小的、单一职责的方法。</li></ul><h5 id="6-霰弹式修改（Shotgun-Surgery）"><a href="#6-霰弹式修改（Shotgun-Surgery）" class="headerlink" title="6. 霰弹式修改（Shotgun Surgery）"></a><strong>6. 霰弹式修改（Shotgun Surgery）</strong></h5><p><strong>问题</strong>：修改一个功能需要改动多个类（如“修改订单状态”需要修改<code>Order</code>、<code>Inventory</code>、<code>Payment</code>等多个类）。<br><strong>重构手法</strong>：  </p><ul><li><strong>搬移函数（Move Method）</strong>：将相关方法从分散的类移动到同一个类中（如将“计算订单总价”方法从<code>Order</code>移动到<code>OrderCalculator</code>）；  </li><li><strong>收敛类（Consolidate Class）</strong>：将分散的类合并为一个类，减少类之间的依赖。</li></ul><h5 id="7-依恋情结（Feature-Envy）"><a href="#7-依恋情结（Feature-Envy）" class="headerlink" title="7. 依恋情结（Feature Envy）"></a><strong>7. 依恋情结（Feature Envy）</strong></h5><p><strong>问题</strong>：一个类的方法过度依赖另一个类的数据（如<code>Order</code>类频繁访问<code>Customer</code>类的<code>address</code>字段）。<br><strong>重构手法</strong>：  </p><ul><li><strong>搬移函数（Move Method）</strong>：将依赖其他类数据的方法移动到该类中（如将“获取客户地址”的方法从<code>Order</code>移动到<code>Customer</code>）；  </li><li><strong>隐藏委托关系（Hide Delegate）</strong>：通过代理模式隐藏类之间的委托关系（如<code>Order</code>类通过<code>Customer</code>类的代理获取地址）。</li></ul><h5 id="8-数据泥团（Data-Clumps）"><a href="#8-数据泥团（Data-Clumps）" class="headerlink" title="8. 数据泥团（Data Clumps）"></a><strong>8. 数据泥团（Data Clumps）</strong></h5><p><strong>问题</strong>：相同的数据在多个地方重复出现（如<code>name</code>、<code>address</code>、<code>phone</code>在多个类中重复）。<br><strong>重构手法</strong>：  </p><ul><li><strong>提炼类（Extract Class）</strong>：将数据封装为一个对象（如<code>CustomerInfo</code>），通过对象传递数据；  </li><li><strong>以函数取代参数（Replace Parameter with Methods）</strong>：如果数据是某个对象的属性，直接调用该对象的方法获取值。</li></ul><h5 id="9-基本类型偏执（Primitive-Obsession）"><a href="#9-基本类型偏执（Primitive-Obsession）" class="headerlink" title="9. 基本类型偏执（Primitive Obsession）"></a><strong>9. 基本类型偏执（Primitive Obsession）</strong></h5><p><strong>问题</strong>：使用基本类型（如<code>int</code>、<code>String</code>）代替对象，导致代码冗余（如用<code>int</code>表示“性别”，用<code>String</code>表示“地址”）。<br><strong>重构手法</strong>：  </p><ul><li><strong>以对象取代基本类型（Replace Data Value with Object）</strong>：将基本类型封装为对象（如<code>Gender</code>、<code>Address</code>），通过对象的方法处理数据；  </li><li><strong>枚举类型（Enum）</strong>：如果基本类型表示有限集合（如性别、状态），使用枚举类型替代。</li></ul><h5 id="10-switch语句过多（Switch-Statements）"><a href="#10-switch语句过多（Switch-Statements）" class="headerlink" title="10. switch语句过多（Switch Statements）"></a><strong>10. switch语句过多（Switch Statements）</strong></h5><p><strong>问题</strong>：大量使用switch语句处理多分支逻辑（如根据订单类型计算价格）。<br><strong>重构手法</strong>：  </p><ul><li><strong>多态（Polymorphism）</strong>：用子类替代switch语句（如<code>Order</code>类的子类<code>RegularOrder</code>、<code>VIPOrder</code>实现各自的<code>calculatePrice</code>方法）；  </li><li><strong>策略模式（Strategy Pattern）</strong>：将分支逻辑封装为独立的策略类，通过上下文类选择策略。</li></ul><h4 id="五、重构的实践建议"><a href="#五、重构的实践建议" class="headerlink" title="五、重构的实践建议"></a><strong>五、重构的实践建议</strong></h4><ul><li><strong>建立测试体系</strong>：重构前确保有完善的单元测试，重构后立即运行测试，避免引入bug；  </li><li><strong>使用自动化工具</strong>：利用IDE（如IntelliJ IDEA、Eclipse）的重构工具（如“Extract Method”“Rename”），减少手动修改的错误；  </li><li><strong>遵循命名规范</strong>：函数名应清晰表达其意图（如<code>calculateTotalPrice</code>比<code>calc</code>更易理解）；  </li><li><strong>避免过度重构</strong>：不要为了“完美”而重构，优先解决影响当前开发的问题。</li></ul><h4 id="六、总结"><a href="#六、总结" class="headerlink" title="六、总结"></a><strong>六、总结</strong></h4><p>《Refactoring: Improving the Design of Existing Code》是软件开发领域的经典之作，其核心思想是“通过重构改善代码设计，而非通过重写解决所有问题”。书中提供的重构手法和“坏味道”识别技巧，是开发者应对“代码腐化”的有力武器。通过持续重构，开发者可以保持代码的健康状态，提升开发效率，降低维护成本。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Domain Driven Design</title>
      <link href="/2025/12/01/Domain-Driven-Design/"/>
      <url>/2025/12/01/Domain-Driven-Design/</url>
      
        <content type="html"><![CDATA[<h3 id="《Domain-Driven-Design-Tackling-Complexity-in-the-Heart-of-Software》核心内容总结"><a href="#《Domain-Driven-Design-Tackling-Complexity-in-the-Heart-of-Software》核心内容总结" class="headerlink" title="《Domain-Driven Design: Tackling Complexity in the Heart of Software》核心内容总结"></a>《Domain-Driven Design: Tackling Complexity in the Heart of Software》核心内容总结</h3><h4 id="一、书籍定位与目标"><a href="#一、书籍定位与目标" class="headerlink" title="一、书籍定位与目标"></a><strong>一、书籍定位与目标</strong></h4><p>《Domain-Driven Design: Tackling Complexity in the Heart of Software》（以下简称《DDD》）是Eric Evans于2004年提出的<strong>领域驱动设计（Domain-Driven Design, DDD）</strong>经典著作，核心目标是解决<strong>复杂业务系统的软件设计问题</strong>。书中强调：<strong>软件的核心是业务，设计应围绕业务模型展开，而非技术实现</strong>。通过建立<strong>领域模型</strong>（Domain Model），将业务规则、流程与软件结构统一，帮助团队应对需求变更、提升系统可维护性。</p><h4 id="二、核心概念：领域与模型"><a href="#二、核心概念：领域与模型" class="headerlink" title="二、核心概念：领域与模型"></a><strong>二、核心概念：领域与模型</strong></h4><ol><li><strong>领域（Domain）</strong>：<br>指软件要解决的业务问题空间（如电商的“订单处理”、银行的“转账系统”）。领域是动态的，包含<strong>实体</strong>（如“用户”“商品”）、<strong>规则</strong>（如“订单总价&#x3D;商品价格×数量”）、<strong>流程</strong>（如“下单→支付→发货”），是DDD的“问题源”。  </li><li><strong>领域模型（Domain Model）</strong>：<br>是领域的<strong>抽象表示</strong>，通过<strong>对象</strong>（实体、值对象）、<strong>关系</strong>（关联、聚合）封装业务逻辑。模型的核心是<strong>业务语义</strong>，而非技术细节（如数据库表结构）。例如，“用户订阅专栏”的领域模型会包含“用户”（实体，唯一标识）、“订阅”（实体，关联用户与专栏）、“专栏”（实体，包含标题、价格）等对象，以及“订阅有效期”“取消订阅”等业务规则。</li></ol><h4 id="三、关键原则：模型驱动与统一语言"><a href="#三、关键原则：模型驱动与统一语言" class="headerlink" title="三、关键原则：模型驱动与统一语言"></a><strong>三、关键原则：模型驱动与统一语言</strong></h4><ol><li><strong>模型驱动设计（Model-Driven Design）</strong>：<br>强调<strong>模型是软件的核心</strong>，代码应直接反映模型（如“用户”类的方法应对应“用户”的业务行为，如<code>calculateTotalSubscriptionFee()</code>）。模型与代码的同步通过<strong>重构</strong>实现——当业务规则变化时，调整模型并同步修改代码，确保两者一致。  </li><li><strong>统一语言（Ubiquitous Language）</strong>：<br>是团队（开发人员、领域专家、测试人员）<strong>共享的业务词汇表</strong>，用于描述领域模型。例如，“订单”“用户”“支付”等术语在模型、代码、文档、沟通中应保持一致，避免“技术术语”与“业务术语”的混淆（如“订单”在代码中叫<code>Order</code>，在文档中叫“订单”，在沟通中叫“订单”）。统一语言是<strong>减少沟通成本、确保需求对齐</strong>的关键。</li></ol><h4 id="四、战略设计：划分问题边界"><a href="#四、战略设计：划分问题边界" class="headerlink" title="四、战略设计：划分问题边界"></a><strong>四、战略设计：划分问题边界</strong></h4><p>战略设计关注<strong>如何将复杂领域分解为可管理的部分</strong>，核心工具包括：  </p><ol><li><strong>限界上下文（Bounded Context）</strong>：<br>定义领域的<strong>边界</strong>，每个上下文包含一个独立的领域模型（如“订单上下文”“支付上下文”）。上下文之间通过<strong>上下文映射</strong>（如“合作关系”“共享内核”）交互，避免模型冲突。例如，“订单”在“订单上下文”中是核心模型，但在“支付上下文”中可能只是“支付对象”的一部分。  </li><li><strong>上下文映射（Context Map）</strong>：<br>描述限界上下文之间的关系，常见模式包括：  <ul><li><strong>合作关系</strong>（两个上下文紧密协作，如“订单”与“支付”）；  </li><li><strong>共享内核</strong>（两个上下文共享部分模型，如“用户”信息）；  </li><li><strong>防腐层</strong>（一个上下文通过适配器与另一个上下文交互，如“订单”与“第三方物流系统”的交互）。</li></ul></li></ol><h4 id="五、战术设计：细化模型细节"><a href="#五、战术设计：细化模型细节" class="headerlink" title="五、战术设计：细化模型细节"></a><strong>五、战术设计：细化模型细节</strong></h4><p>战术设计关注<strong>如何在限界上下文中实现领域模型</strong>，核心元素包括：  </p><ol><li><strong>实体（Entity）</strong>：<br>具有<strong>唯一标识</strong>（如用户ID、订单号）的对象，代表业务中的“独立个体”。实体的核心是“身份”，而非属性（如“用户”的“姓名”可变，但“用户ID”不变）。  </li><li><strong>值对象（Value Object）</strong>：<br>没有唯一标识的对象，用于描述事物的<strong>属性或状态</strong>（如“地址”“颜色”“金额”）。值对象是<strong>不可变的</strong>（创建后不能修改），通过“相等性”（如两个“地址”对象的“省”“市”“区”相同则认为相等）和“可替换性”（如用一个新的“地址”对象替换旧的）简化设计。  </li><li><strong>聚合（Aggregate）</strong>：<br>一组<strong>关联的实体与值对象</strong>的集合，作为一个<strong>事务边界</strong>（即一个聚合内的所有操作要么全部成功，要么全部失败）。每个聚合有一个<strong>聚合根</strong>（如“订单”是“订单项”“收货地址”的聚合根），外部只能通过聚合根访问内部对象（如“订单项”不能直接被修改，需通过“订单”的方法修改）。  </li><li><strong>领域服务（Domain Service）</strong>：<br>处理<strong>跨聚合的业务逻辑</strong>（如“计算订单总价”“验证订单有效性”）。领域服务是无状态的，仅协调聚合间的操作，不存储数据。  </li><li><strong>资源库（Repository）</strong>：<br>负责<strong>聚合的持久化与获取</strong>（如“订单Repository”负责从数据库中保存&#x2F;读取“订单”对象）。资源库的接口应定义在领域层，实现放在基础设施层（如用Hibernate实现）。</li></ol><h4 id="六、与DSL（领域特定语言）的关系"><a href="#六、与DSL（领域特定语言）的关系" class="headerlink" title="六、与DSL（领域特定语言）的关系"></a><strong>六、与DSL（领域特定语言）的关系</strong></h4><p>DSL是DDD的<strong>自然延伸</strong>，两者核心目标一致：<strong>用领域语言解决领域问题</strong>。  </p><ol><li><strong>DSL是领域模型的“代码化”</strong>：<br>DDD的领域模型是<strong>概念模型</strong>（如“用户”“订单”的抽象），而DSL是将这些概念转化为<strong>可执行的代码</strong>（如用SwiftUI定义“订单界面”的DSL，用SQL定义“订单查询”的DSL）。例如，SwiftUI的<code>@State</code>、<code>@Binding</code>等属性就是DSL，用于描述“订单状态”的变化。  </li><li><strong>DSL依赖统一语言</strong>：<br>DSL的语法与词汇应与DDD的<strong>统一语言</strong>一致（如“订单”“用户”等术语在DSL中应与模型中的定义一致）。例如，用SQL定义“订单查询”时，表名应叫<code>orders</code>（对应模型中的“Order”类），字段名应叫<code>user_id</code>（对应“Order”类的<code>userId</code>属性）。  </li><li><strong>DSL简化模型实现</strong>：<br>DSL通过<strong>高阶抽象</strong>（如“订单DSL”中的<code>createOrder()</code>方法）隐藏技术细节（如数据库操作、网络请求），让开发人员专注于业务逻辑。例如，用SQLAlchemy（Python的ORM框架）定义“订单”模型时，<code>Order</code>类的<code>save()</code>方法就是DSL，用于将模型保存到数据库。</li></ol><h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a><strong>总结</strong></h4><p>《DDD》的核心是<strong>“业务优先”</strong>，通过领域模型、统一语言、战略&#x2F;战术设计，将复杂业务转化为可维护的软件。DSL是DDD的“落地工具”，通过代码化领域模型，让业务逻辑更易表达、更易维护。两者的结合，能有效应对复杂系统的软件设计挑战。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Design Patterns</title>
      <link href="/2025/12/01/Design-Patterns/"/>
      <url>/2025/12/01/Design-Patterns/</url>
      
        <content type="html"><![CDATA[<h3 id="《Design-Patterns-Elements-of-Reusable-Object-Oriented-Software》核心内容总结"><a href="#《Design-Patterns-Elements-of-Reusable-Object-Oriented-Software》核心内容总结" class="headerlink" title="《Design Patterns: Elements of Reusable Object-Oriented Software》核心内容总结"></a>《Design Patterns: Elements of Reusable Object-Oriented Software》核心内容总结</h3><h4 id="一、书籍定位与目标"><a href="#一、书籍定位与目标" class="headerlink" title="一、书籍定位与目标"></a><strong>一、书籍定位与目标</strong></h4><p>《Design Patterns: Elements of Reusable Object-Oriented Software》（以下简称《Design Patterns》）是<strong>Erich Gamma、Richard Helm、Ralph Johnson、John Vlissides</strong>（四人合称“Gang of Four”，即“四人帮”）于1994年出版的<strong>面向对象设计领域经典著作</strong>。其核心目标是解决<strong>软件设计中重复出现的问题</strong>，通过总结和提炼这些问题的通用解决方案（即“设计模式”），帮助开发者提升代码的<strong>可复用性</strong>、<strong>可维护性</strong>和<strong>灵活性</strong>，推动面向对象设计从“经验驱动”向“体系化”转变。</p><h4 id="二、设计模式的核心定义与要素"><a href="#二、设计模式的核心定义与要素" class="headerlink" title="二、设计模式的核心定义与要素"></a><strong>二、设计模式的核心定义与要素</strong></h4><p>《Design Patterns》对“设计模式”的定义是：<strong>每一个模式描述了一个在我们周围不断重复发生的问题，以及该问题的解决方案的核心</strong>。这一定义强调了设计模式的<strong>通用性</strong>（解决重复问题）和<strong>本质性</strong>（聚焦问题核心，而非具体实现）。  </p><p>一个完整的设计模式通常包含以下四个基本要素：  </p><ul><li><strong>模式名称（Pattern Name）</strong>：一个简洁的助记名（如“单例模式”“工厂方法模式”），用于快速识别和沟通模式的核心意图；  </li><li><strong>问题（Problem）</strong>：描述模式的适用场景（即“何时使用该模式”），包括设计中需要解决的具体问题（如“如何创建对象而不暴露创建逻辑”“如何扩展对象功能而不修改原有代码”）；  </li><li><strong>解决方案（Solution）</strong>：描述模式的<strong>组成成分</strong>（如类、对象）、<strong>关系</strong>（如继承、组合）及<strong>职责分配</strong>（如“工厂类负责创建对象，客户端类通过工厂获取对象”），强调“如何做”而非“做什么”；  </li><li><strong>效果（Consequences）</strong>：分析模式应用的<strong>优缺点</strong>（如“提升扩展性但可能增加复杂度”“降低耦合度但可能影响性能”），帮助开发者在“权衡利弊”后选择合适的模式。</li></ul><h4 id="三、设计模式的三大分类"><a href="#三、设计模式的三大分类" class="headerlink" title="三、设计模式的三大分类"></a><strong>三、设计模式的三大分类</strong></h4><p>《Design Patterns》将23种经典设计模式分为<strong>三大类</strong>，覆盖了面向对象设计的不同场景和需求：  </p><h5 id="1-创建型模式（Creational-Patterns）"><a href="#1-创建型模式（Creational-Patterns）" class="headerlink" title="1. 创建型模式（Creational Patterns）"></a><strong>1. 创建型模式（Creational Patterns）</strong></h5><p>关注<strong>对象的创建过程</strong>，将对象的创建与使用分离，降低系统耦合度。主要包括：  </p><ul><li><strong>单例模式（Singleton）</strong>：确保一个类只有一个实例，并提供全局访问点（如“系统配置管理器”）；  </li><li><strong>工厂方法模式（Factory Method）</strong>：定义一个创建对象的接口，由子类决定实例化哪个类（如“日志记录器工厂”）；  </li><li><strong>抽象工厂模式（Abstract Factory）</strong>：提供一个接口，用于创建<strong>相关或依赖对象的家族</strong>（如“跨平台的UI组件工厂”）；  </li><li><strong>建造者模式（Builder）</strong>：将复杂对象的构建与表示分离，通过“逐步构建”方式创建对象（如“文档生成器”）；  </li><li><strong>原型模式（Prototype）</strong>：通过克隆现有对象来创建新对象（如“游戏中的角色克隆”）。</li></ul><h5 id="2-结构型模式（Structural-Patterns）"><a href="#2-结构型模式（Structural-Patterns）" class="headerlink" title="2. 结构型模式（Structural Patterns）"></a><strong>2. 结构型模式（Structural Patterns）</strong></h5><p>关注<strong>类和对象的组合方式</strong>，通过继承或组合实现功能的扩展。主要包括：  </p><ul><li><strong>适配器模式（Adapter）</strong>：将一个类的接口转换成客户希望的另一个接口（如“旧系统与新系统的接口适配”）；  </li><li><strong>桥接模式（Bridge）</strong>：将<strong>抽象部分</strong>与<strong>实现部分</strong>分离，使两者可以独立变化（如“图形绘制中的形状与颜色分离”）；  </li><li><strong>装饰器模式（Decorator）</strong>：动态地给对象添加额外职责（如“给文本添加边框、颜色等效果”）；  </li><li><strong>外观模式（Facade）</strong>：为子系统提供<strong>统一的简化接口</strong>（如“电商系统的订单处理外观”）；  </li><li><strong>享元模式（Flyweight）</strong>：通过<strong>共享技术</strong>复用大量细粒度对象（如“文本编辑器中的字符缓存”）。</li></ul><h5 id="3-行为型模式（Behavioral-Patterns）"><a href="#3-行为型模式（Behavioral-Patterns）" class="headerlink" title="3. 行为型模式（Behavioral Patterns）"></a><strong>3. 行为型模式（Behavioral Patterns）</strong></h5><p>关注<strong>对象之间的通信与协作</strong>，解决“对象间如何交互”的问题。主要包括：  </p><ul><li><strong>策略模式（Strategy）</strong>：定义一系列算法，将每个算法封装起来并使其可以相互替换（如“排序算法的动态切换”）；  </li><li><strong>模板方法模式（Template Method）</strong>：定义一个操作中的<strong>算法骨架</strong>，将某些步骤延迟到子类中（如“文档处理的通用流程”）；  </li><li><strong>观察者模式（Observer）</strong>：定义对象间的一对多依赖关系，当一个对象状态改变时，所有依赖它的对象都会收到通知（如“事件监听机制”）；  </li><li><strong>迭代器模式（Iterator）</strong>：提供一种方法顺序访问聚合对象中的各个元素，而不暴露其内部表示（如“集合的遍历”）；  </li><li><strong>中介者模式（Mediator）</strong>：通过一个中介对象封装一系列对象交互，减少对象间的直接依赖（如“聊天室中的消息转发”）。</li></ul><h4 id="四、面向对象设计的七大原则"><a href="#四、面向对象设计的七大原则" class="headerlink" title="四、面向对象设计的七大原则"></a><strong>四、面向对象设计的七大原则</strong></h4><p>《Design Patterns》的底层逻辑是<strong>七大面向对象设计原则</strong>，这些原则是设计模式的“灵魂”，指导着模式的定义和应用：  </p><ul><li><strong>开闭原则（Open Closed Principle, OCP）</strong>：软件实体（类、模块、函数）应对<strong>扩展开放</strong>，对<strong>修改关闭</strong>（即“新增功能时不修改原有代码”）；  </li><li><strong>里氏代换原则（Liskov Substitution Principle, LSP）</strong>：任何基类可以出现的地方，子类一定可以出现（即“子类必须能够替换基类，且不影响功能”）；  </li><li><strong>依赖倒转原则（Dependency Inversion Principle, DIP）</strong>：高层模块不应依赖低层模块，两者都应依赖<strong>抽象</strong>（即“面向接口编程，而非面向实现”）；  </li><li><strong>接口隔离原则（Interface Segregation Principle, ISP）</strong>：客户端不应依赖它不需要的接口（即“接口应细化，避免‘胖接口’”）；  </li><li><strong>迪米特法则（Law of Demeter, LoD）</strong>：一个实体应尽量少地与其他实体发生相互作用（即“减少耦合，避免‘牵一发而动全身’”）；  </li><li><strong>合成复用原则（Composite Reuse Principle, CRP）</strong>：优先使用<strong>组合&#x2F;聚合</strong>（而非继承）实现复用（即“通过对象组合扩展功能，而非通过继承扩展类”）；  </li><li><strong>单一职责原则（Single Responsibility Principle, SRP）</strong>：一个类应只有一个引起它变化的原因（即“避免‘万能类’，职责单一”）。</li></ul><h4 id="五、设计模式的价值与意义"><a href="#五、设计模式的价值与意义" class="headerlink" title="五、设计模式的价值与意义"></a><strong>五、设计模式的价值与意义</strong></h4><p>《Design Patterns》的价值在于<strong>将“经验”转化为“体系”</strong>：  </p><ul><li><strong>提升代码复用</strong>：通过模式复用已有的解决方案，避免重复劳动（如“工厂模式”可复用于多个需要创建对象的场景）；  </li><li><strong>增强可维护性</strong>：模式使代码结构更清晰（如“单一职责原则”让类的职责更明确），修改时只需调整局部代码，不会影响整体；  </li><li><strong>提高灵活性</strong>：模式支持“扩展而非修改”（如“开闭原则”让系统能轻松应对新需求，如新增一种产品类型时，只需添加新的工厂类）；  </li><li><strong>促进团队协作</strong>：模式是“通用语言”，团队成员能快速理解彼此的设计意图（如“观察者模式”能让开发者快速识别“事件驱动”的设计逻辑）。</li></ul><p>《Design Patterns: Elements of Reusable Object-Oriented Software》不仅是一本“设计模式手册”，更是一本“面向对象设计哲学书”。它教会开发者的不仅是“如何使用模式”，更是“如何思考设计”——通过“问题-解决方案-权衡”的逻辑，让设计更合理、更可持续。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Coding Interview</title>
      <link href="/2025/12/01/Coding-Interview/"/>
      <url>/2025/12/01/Coding-Interview/</url>
      
        <content type="html"><![CDATA[<h3 id="《Cracking-the-Coding-Interview-189-Programming-Questions-and-Solutions》核心内容总结"><a href="#《Cracking-the-Coding-Interview-189-Programming-Questions-and-Solutions》核心内容总结" class="headerlink" title="《Cracking the Coding Interview: 189 Programming Questions and Solutions》核心内容总结"></a>《Cracking the Coding Interview: 189 Programming Questions and Solutions》核心内容总结</h3><h4 id="一、书籍定位与目标读者"><a href="#一、书籍定位与目标读者" class="headerlink" title="一、书籍定位与目标读者"></a><strong>一、书籍定位与目标读者</strong></h4><p>《Cracking the Coding Interview: 189 Programming Questions and Solutions》（以下简称《Cracking the Coding Interview》）是<strong>Gayle Laakmann McDowell</strong>（盖尔·拉夫曼·麦克道尔）的经典编程面试指南，面向<strong>应届毕业生、1-2年经验程序员</strong>及<strong>准备跳槽的开发者</strong>，核心目标是帮助读者<strong>系统准备编程面试</strong>，掌握解决实际面试问题的能力。</p><h4 id="二、核心内容框架"><a href="#二、核心内容框架" class="headerlink" title="二、核心内容框架"></a><strong>二、核心内容框架</strong></h4><p>书籍采用“<strong>理论+实践</strong>”的结构，覆盖面试全流程及关键知识点，核心框架如下：  </p><ol><li><p><strong>面试流程与策略</strong>：  </p><ul><li>介绍面试的<strong>常见问题类型</strong>（数据结构、算法、逻辑、系统设计等）；  </li><li>提供<strong>面试准备策略</strong>（如如何写简历、如何回答行为问题）；  </li><li>解析<strong>顶级公司（Google、Microsoft、Amazon等）的面试流程</strong>（如技术面、系统设计面、行为面）。</li></ul></li><li><p><strong>数据结构与算法</strong>：  </p><ul><li><strong>重点章节</strong>：数组与字符串、链表、栈与队列、树与图、排序与搜索、递归与动态规划；  </li><li><strong>内容特点</strong>：每个章节包含<strong>基础概念讲解</strong>（如数组的O(1)访问、链表的递归特性）、<strong>常见面试问题</strong>（如“反转数组”“判断链表是否有环”“二叉树的中序遍历”）及<strong>解题思路分析</strong>（如“如何用双指针解决数组问题”“如何用递归简化树的问题”）。</li></ul></li><li><p><strong>系统设计与可扩展性</strong>：  </p><ul><li>针对<strong>高级职位</strong>，讲解系统设计的核心原则（如“高内聚低耦合”“可扩展性”）；  </li><li>提供<strong>系统设计案例</strong>（如“设计一个分布式缓存系统”“设计一个支持高并发的Web服务”），帮助读者掌握<strong>从需求到架构的设计能力</strong>。</li></ul></li><li><p><strong>行为与软技能</strong>：  </p><ul><li>强调<strong>行为面试</strong>的重要性（如“请描述一个你解决复杂问题的经历”“如何与团队协作”）；  </li><li>提供<strong>行为面试技巧</strong>（如“使用STAR法则（情境-任务-行动-结果）描述经历”“如何突出自己的贡献”），帮助读者提升<strong>沟通与团队协作能力</strong>。</li></ul></li></ol><h4 id="三、关键亮点与特色"><a href="#三、关键亮点与特色" class="headerlink" title="三、关键亮点与特色"></a><strong>三、关键亮点与特色</strong></h4><ol><li><p><strong>真实面试题目</strong>：<br>书籍包含<strong>189道真实面试题目</strong>（涵盖易到难），均来自<strong>顶级科技公司（Google、Microsoft、Amazon等）的实际面试</strong>，每道题都有<strong>详细的解题思路</strong>（如“如何用哈希表优化查找效率”“如何用动态规划解决最大子数组和问题”）和<strong>代码实现</strong>（以Java为主）。  </p></li><li><p><strong>解题策略与技巧</strong>：  </p><ul><li>提供<strong>七步解题法</strong>（倾听问题→举例形象化→暴力穷举→优化（BUD原则：瓶颈、不必要工作、重复工作）→走一遍流程→实现代码→测试），帮助读者<strong>系统解决算法问题</strong>；  </li><li>强调<strong>优化思维</strong>（如“如何用空间换时间”“如何减少重复计算”），提升代码效率。</li></ul></li><li><p><strong>多语言支持</strong>：<br>虽然代码示例以Java为主，但书中强调<strong>算法与数据结构的通用性</strong>，读者可轻松将其转换为其他语言（如Python、C++）。</p></li></ol><h4 id="四、适用场景与读者反馈"><a href="#四、适用场景与读者反馈" class="headerlink" title="四、适用场景与读者反馈"></a><strong>四、适用场景与读者反馈</strong></h4><ul><li><p><strong>适用场景</strong>：  </p><ul><li>应届毕业生<strong>准备第一份技术工作</strong>；  </li><li>1-2年经验程序员<strong>跳槽到更好的公司</strong>；  </li><li>开发者<strong>提升算法与数据结构能力</strong>。</li></ul></li><li><p><strong>读者反馈</strong>：<br>书籍被广泛推荐为<strong>编程面试的“必读书”</strong>，读者评价其“<strong>内容全面、题目经典、解题思路清晰</strong>”，尤其适合<strong>非科班出身</strong>或<strong>算法基础薄弱</strong>的开发者。</p></li></ul><h4 id="五、总结"><a href="#五、总结" class="headerlink" title="五、总结"></a><strong>五、总结</strong></h4><p>《Cracking the Coding Interview: 189 Programming Questions and Solutions》是<strong>编程面试领域的经典之作</strong>，其核心价值在于<strong>将“面试经验”转化为“可学习的知识”</strong>，通过“真实题目+解题策略+系统设计”的组合，帮助读者全面提升面试能力。无论是应届生还是有一定经验的开发者，都能从中受益。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Clean Code</title>
      <link href="/2025/12/01/Clean-Code/"/>
      <url>/2025/12/01/Clean-Code/</url>
      
        <content type="html"><![CDATA[<h3 id="《Clean-Code-A-Handbook-of-Agile-Software-Craftsmanship》核心内容总结"><a href="#《Clean-Code-A-Handbook-of-Agile-Software-Craftsmanship》核心内容总结" class="headerlink" title="《Clean Code: A Handbook of Agile Software Craftsmanship》核心内容总结"></a>《Clean Code: A Handbook of Agile Software Craftsmanship》核心内容总结</h3><h4 id="一、什么是整洁代码？"><a href="#一、什么是整洁代码？" class="headerlink" title="一、什么是整洁代码？"></a><strong>一、什么是整洁代码？</strong></h4><p>整洁代码是<strong>简单、直接、能清晰传达意图</strong>的代码，是专业开发者的标志。其核心特征包括：  </p><ul><li><strong>可读性</strong>：像散文一样易读，无需额外注释即可理解逻辑；  </li><li><strong>单一职责</strong>：每个函数&#x2F;类只做一件事，避免“上帝类”；  </li><li><strong>无重复代码</strong>：遵循DRY（Don’t Repeat Yourself）原则，减少冗余；  </li><li><strong>易测试</strong>：支持自动化测试，确保行为符合预期；  </li><li><strong>低依赖</strong>：模块间松耦合，便于维护和扩展。</li></ul><h4 id="二、关键原则与实践"><a href="#二、关键原则与实践" class="headerlink" title="二、关键原则与实践"></a><strong>二、关键原则与实践</strong></h4><h5 id="1-有意义的命名"><a href="#1-有意义的命名" class="headerlink" title="1. 有意义的命名"></a>1. <strong>有意义的命名</strong></h5><p>命名是代码的“沟通工具”，需遵循：  </p><ul><li><strong>意图揭示</strong>：名称应明确“为什么存在”“做什么”（如<code>calculateDiscount()</code>比<code>calc()</code>更清晰）；  </li><li><strong>避免误导</strong>：不使用模糊名称（如<code>temp</code>、<code>data</code>），避免类型编码（如<code>strName</code>）；  </li><li><strong>可搜索</strong>：用具体名词（如<code>customerAddress</code>）而非抽象词（如<code>info</code>）；  </li><li><strong>发音友好</strong>：便于团队讨论（如<code>getDeveloperName()</code>比<code>gdn()</code>更易读）。</li></ul><h5 id="2-函数设计"><a href="#2-函数设计" class="headerlink" title="2. 函数设计"></a>2. <strong>函数设计</strong></h5><p>函数是代码的“基本单元”，需满足：  </p><ul><li><strong>短小精悍</strong>：理想行数≤20行，避免嵌套（如<code>if/else</code>层级≤2）；  </li><li><strong>单一职责</strong>：一个函数只做一件事（如<code>validateUser()</code>不应同时处理登录逻辑）；  </li><li><strong>参数简洁</strong>：参数≤3个，避免“标志参数”（如<code>isUpdate</code>，应拆分为独立函数）；  </li><li><strong>无副作用</strong>：不修改外部状态（如不直接修改全局变量）。</li></ul><h5 id="3-类与模块设计"><a href="#3-类与模块设计" class="headerlink" title="3. 类与模块设计"></a>3. <strong>类与模块设计</strong></h5><ul><li><strong>单一职责原则（SRP）</strong>：每个类只负责一个功能（如<code>Order</code>类不应处理支付逻辑）；  </li><li><strong>开放&#x2F;封闭原则（OCP）</strong>：对扩展开放，对修改封闭（如通过接口扩展功能，而非修改原有代码）；  </li><li><strong>依赖反转原则（DIP）</strong>：依赖抽象而非具体实现（如用<code>PaymentGateway</code>接口而非直接调用<code>Stripe</code>类）。</li></ul><h5 id="4-测试驱动开发（TDD）"><a href="#4-测试驱动开发（TDD）" class="headerlink" title="4. 测试驱动开发（TDD）"></a>4. <strong>测试驱动开发（TDD）</strong></h5><p>TDD是“测试先行”的开发模式，流程为：  </p><ol><li><strong>写失败测试</strong>：先写测试用例（预期行为）；  </li><li><strong>写最小代码</strong>：仅写通过测试的最小代码；  </li><li><strong>重构</strong>：优化代码（如消除重复、简化逻辑）。<br>TDD的优势：<strong>减少bug、提高代码可测试性、促进设计优化</strong>。</li></ol><h5 id="5-错误处理"><a href="#5-错误处理" class="headerlink" title="5. 错误处理"></a>5. <strong>错误处理</strong></h5><ul><li><strong>优雅处理</strong>：用异常而非返回码（如<code>throw new InvalidInputException()</code>比返回<code>-1</code>更清晰）；  </li><li>**避免大<code>try/catch</code>**：将错误处理限制在最小范围（如只在业务逻辑层捕获异常）；  </li><li><strong>明确错误信息</strong>：提供有用的错误消息（如“Invalid email format”比“Error”更有用）。</li></ul><h5 id="6-注释与文档"><a href="#6-注释与文档" class="headerlink" title="6. 注释与文档"></a>6. <strong>注释与文档</strong></h5><ul><li><strong>最小化注释</strong>：优先用代码表达意图（如<code>calculateTotal()</code>比注释“计算总价”更清晰）；  </li><li><strong>解释“为什么”</strong>：注释应说明“为什么做”而非“做什么”（如“避免空指针异常”比“检查空值”更有用）；  </li><li><strong>保持更新</strong>：代码修改后，同步更新注释（避免“僵尸注释”）。</li></ul><h5 id="7-代码格式与结构"><a href="#7-代码格式与结构" class="headerlink" title="7. 代码格式与结构"></a>7. <strong>代码格式与结构</strong></h5><ul><li><strong>一致风格</strong>：遵循团队约定的格式（如缩进、换行、命名规范）；  </li><li><strong>垂直分离</strong>：相关代码放在一起（如变量声明靠近使用位置，函数按调用顺序排列）；  </li><li><strong>水平对齐</strong>：避免不必要的对齐（如<code>=</code>对齐），保持代码简洁。</li></ul><h4 id="三、代码异味与重构"><a href="#三、代码异味与重构" class="headerlink" title="三、代码异味与重构"></a><strong>三、代码异味与重构</strong></h4><p>代码异味是“代码质量下降的信号”，常见类型及重构方法：  </p><ul><li><strong>重复代码</strong>：提取公共方法（如将<code>calculateTax()</code>提取为独立函数）；  </li><li><strong>长方法</strong>：拆分为小函数（如将<code>processOrder()</code>拆分为<code>validateOrder()</code>、<code>calculateTotal()</code>等）；  </li><li><strong>大类</strong>：拆分为小类（如将<code>OrderManager</code>拆分为<code>OrderValidator</code>、<code>OrderCalculator</code>等）；  </li><li><strong>不当继承</strong>：用组合替代继承（如用<code>HasPaymentMethod</code>接口替代<code>extends PaymentMethod</code>）。</li></ul><h4 id="四、设计原则与模式"><a href="#四、设计原则与模式" class="headerlink" title="四、设计原则与模式"></a><strong>四、设计原则与模式</strong></h4><ul><li><strong>SOLID原则</strong>：  <ul><li><strong>SRP</strong>（单一职责）：每个类只做一件事；  </li><li><strong>OCP</strong>（开放&#x2F;封闭）：对扩展开放，对修改封闭；  </li><li><strong>LSP</strong>（里氏替换）：子类必须能替换父类；  </li><li><strong>ISP</strong>（接口隔离）：接口应小而专注；  </li><li><strong>DIP</strong>（依赖反转）：依赖抽象而非具体。</li></ul></li><li><strong>常用模式</strong>：  <ul><li><strong>工厂模式</strong>：创建对象（如<code>PaymentFactory</code>创建不同支付方式）；  </li><li><strong>策略模式</strong>：选择算法（如<code>SortingStrategy</code>支持冒泡排序、快速排序）；  </li><li><strong>观察者模式</strong>：事件驱动（如<code>OrderPlacedEvent</code>通知库存系统）。</li></ul></li></ul><h4 id="五、测试与可维护性"><a href="#五、测试与可维护性" class="headerlink" title="五、测试与可维护性"></a><strong>五、测试与可维护性</strong></h4><ul><li><strong>测试金字塔</strong>：单元测试（70%）&gt; 集成测试（20%）&gt; 端到端测试（10%）；  </li><li><strong>测试原则</strong>：  <ul><li><strong>独立</strong>：测试不依赖外部系统（如用Mock对象替代数据库）；  </li><li><strong>可重复</strong>：测试结果一致（如不依赖随机数据）；  </li><li><strong>快速</strong>：测试执行时间短（如避免长时间运行的集成测试）。</li></ul></li><li><strong>可维护性技巧</strong>：  <ul><li><strong>模块化</strong>：将代码拆分为小模块（如微服务架构）；  </li><li><strong>低耦合</strong>：减少模块间依赖（如用接口替代直接调用）；  </li><li><strong>文档化</strong>：用注释说明“为什么做”（如<code>// 用于处理支付超时</code>）。</li></ul></li></ul><h4 id="六、总结"><a href="#六、总结" class="headerlink" title="六、总结"></a><strong>六、总结</strong></h4><p>《Clean Code: A Handbook of Agile Software Craftsmanship》的核心是“<strong>代码是写给人看的，其次才是机器</strong>”。通过遵循<strong>有意义的命名、单一职责、TDD、SOLID原则</strong>等实践，开发者能写出<strong>易读、易维护、可扩展</strong>的代码，提升团队协作效率，减少技术债务。这本书不仅是技术手册，更是“软件工艺”的体现，适合所有级别的开发者阅读。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Android课题研究</title>
      <link href="/2024/09/18/Android%E8%AF%BE%E9%A2%98%E7%A0%94%E7%A9%B6/"/>
      <url>/2024/09/18/Android%E8%AF%BE%E9%A2%98%E7%A0%94%E7%A9%B6/</url>
      
        <content type="html"><![CDATA[<p>MVP 即 Minimum Viable Product，通过做出能满足最基本功能的产品，不断接受用户反馈，快速迭代，直到做出真正符合需求的好产品。</p><h2 id="一、Android应用架构治理"><a href="#一、Android应用架构治理" class="headerlink" title="一、Android应用架构治理"></a>一、Android应用架构治理</h2><ol><li>对源码进行依赖分析、静态检查、自动化重构，构建合理的组件&#x2F;模块化方案</li><li>编写Gradle&#x2F;AS插件，在编译时优化构建及插桩处理</li><li>对构建过程和产物进行IR分析（bytecode、Smali），提升应用安全性稳定性</li><li>规范和清晰的源码结构</li><li>完善CI&#x2F;CD流水线</li><li>以更加深入底层的方式，分析APK</li></ol><h2 id="二、Android应用质量治理"><a href="#二、Android应用质量治理" class="headerlink" title="二、Android应用质量治理"></a>二、Android应用质量治理</h2><p>切入点初步定三个</p><h3 id="1-高性能"><a href="#1-高性能" class="headerlink" title="1. 高性能"></a>1. 高性能</h3><ul><li>描述：精简apk尺寸，提升启动速度，引入baseline、benchmark、jacoco、splitapks、lint、profile等用以优化应用质量</li><li>措施：<br>  a) 检查apk是否可精简，指定 cpu架构使用 splitapks 拆包<br>  b) profile测量启动速度<br>  c) baseline 打包（源码层面）<br>  d) benchmark 对代码进行基准化分析（源码层面）<br>  e) jacoco扫描代码覆盖率（源码层面）<br>  f) 封装更加强大符合实际使用的lint规则及lintFix方案，剔除坏味代码（源码层面）</li></ul><h3 id="2-高可靠"><a href="#2-高可靠" class="headerlink" title="2. 高可靠"></a>2. 高可靠</h3><ul><li>描述：检查应用是否加固（扫描apk），是否存在崩溃防护、错误上报、网络安全防护、文件加密存储及应用运行权限是否合规（扫描源码）</li><li>措施：封装相应的各类工具（gradle插件、扫描平台、上报监控平台）</li><li>拓展：融合应用灰度发布方案</li></ul><h3 id="3-高效交互"><a href="#3-高效交互" class="headerlink" title="3. 高效交互"></a>3. 高效交互</h3><ul><li>描述：前期埋点记录页面路径、操作留痕、功能曝光率等，常用功能提级减少交互路径方便用户操作，热区功能支持动态配置等，根据各大厂UI规范给app打分（配色、文字、图标、圆角、阴影等，APP提交运行截图）</li><li>措施：开发埋点上报插件，UI规范审查指南</li></ul><h2 id="三、可视化协同设计平台"><a href="#三、可视化协同设计平台" class="headerlink" title="三、可视化协同设计平台"></a>三、可视化协同设计平台</h2><ul><li>描述：一个用于开发原生（Android&#x2F;iOS）应用的低代码平台，通过拖拽实现可视化应用设计，提供实时预览，减少应用开发过程中产品设计开发的沟通成本，最大化保证应用交付时UI还原度</li><li>预期：包含一系列元组化的UI套件，Android和iOS是不同的两套UI代码。在这个基础上抽象一层UI描述文件。开发一个跨平台桌面端应用，包含仪表盘、我的、设置三个常规功能入口，实现项目管理、资源管理、账号管理三个基础模块。</li><li>目标：开发一个跨平台桌面端应用，通过拖拽符合设计规范的UI套件进行原型设计和UI创意设计。开发可以直接使用该应用生成的代码，只需进行少许功能完善联调即可。</li></ul><h2 id="四、Android应用性能优化"><a href="#四、Android应用性能优化" class="headerlink" title="四、Android应用性能优化"></a>四、Android应用性能优化</h2><ul><li>描述：应用运行时性能检测记录5个方面（包含CPU、帧率、内存、网络、启动时延），建立15项性能指标对应用进行优化。同时考虑使用2-3个性能监控工具，在开发过程中（或CI&#x2F;CD时）进行性能监控，及时发现问题。</li><li>预期：包含性能检测记录上报、影响性能的代码检测以及具体优化方案源码，使用三方工具对应用进行性能监控（内存泄漏、CPU占用率、网络状况、卡顿分析等），输出性能优化最佳实践。</li><li>目标：打造一套Android应用性能优化解决方案，以期在应用迭代过程中，始终保持良好的用户体验和稳定性。</li><li>风险：Android设备太过碎片化（厂商、定制操作系统、SDK版本、屏幕尺寸、CPU架构、组网等），有太多系统版本需要兼容（Android6.0~14 存在 11 个版本的SDK），源码可测性严重不足（不包含单元测试、集成测试、自动化测试用例）</li></ul><h3 id="1-性能检测"><a href="#1-性能检测" class="headerlink" title="1. 性能检测"></a>1. 性能检测</h3><ol><li>CPU使用情况</li><li>帧率优化&#x2F;卡顿统计</li><li>内存泄漏及资源占用管理</li><li>网络响应及弱网体验</li><li>启动速度和时延</li></ol><h3 id="2-性能指标"><a href="#2-性能指标" class="headerlink" title="2. 性能指标"></a>2. 性能指标</h3><ol><li>安装文件大小</li><li>Context对象泄漏</li><li>低配手机适配</li><li>网络请求加密</li><li>废弃API禁止使用</li><li>离线模式（提升用户体验）</li><li>帧率优化（适配高刷）</li><li>对象装箱和拆箱（低内存）</li><li>冷启动速度</li><li>布局加载耗时</li><li>内存使用率（减少gc）</li><li>多线程并发（响应速度）</li><li>应用架构治理</li><li>for循环加入内联方法</li><li>其他JVM调优方案</li></ol><h3 id="2-最佳实践"><a href="#2-最佳实践" class="headerlink" title="2. 最佳实践"></a>2. 最佳实践</h3><ol><li>多媒体文件缩量（本地和远端资源）</li><li>分配优先级按需拉取&#x2F;上传数据</li><li>定位&#x2F;通知&#x2F;屏幕唤醒等耗电管理</li><li>使用性能监控工具（兼容性及性能评分）</li></ol><h3 id="4-性能监控工具"><a href="#4-性能监控工具" class="headerlink" title="4. 性能监控工具"></a>4. 性能监控工具</h3><ol><li>Android Vitals（Crash 和 ANR）</li><li>JankStats Library（帧率、UI状态报告、卡顿报告）</li><li>Benchmark test（CI 流程中集成）</li><li>Android Profiler （内存、CPU、网络、耗电、其他手机资源）</li><li>Firebase Performance Monitoring（记录运行数据，启动耗时、屏幕渲染、网络请求）</li></ol><h3 id="5-挑战与瓶颈"><a href="#5-挑战与瓶颈" class="headerlink" title="5. 挑战与瓶颈"></a>5. 挑战与瓶颈</h3><ol><li>手机设备太过碎片化（厂商、定制操作系统、SDK版本、屏幕尺寸、CPU架构、组网）</li><li>太多Android系统版本需要兼容（6.0~14 存在 11 个版本的SDK）</li><li>功能稳定性测试不足（单元测试、集成测试、自动化测试）</li></ol><h3 id="6-总结"><a href="#6-总结" class="headerlink" title="6. 总结"></a>6. 总结</h3><p>应用迭代过程中始终保持稳定运行、高效用户体验，性能优化是不可或缺的一环。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>BaseViewModel with STATE</title>
      <link href="/2024/02/26/BaseViewModel-with-STATE/"/>
      <url>/2024/02/26/BaseViewModel-with-STATE/</url>
      
        <content type="html"><![CDATA[<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseViewModel</span>&lt;<span class="hljs-type">STATE: Parcelable</span>&gt;(<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> savedStateHandle: SavedStateHandle,<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> defaultState: STATE<br>): ViewModel() &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> KEY_STATE = <span class="hljs-string">&quot;state&quot;</span><br><br>    <span class="hljs-keyword">val</span> state: StateFlow&lt;STATE&gt; = savedStateHandle.getStateFlow(KEY_STATE, defaultState)<br><br>    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateState</span><span class="hljs-params">(newState: <span class="hljs-type">STATE</span>.() -&gt; <span class="hljs-type">STATE</span>)</span></span> &#123;<br>        <span class="hljs-comment">// see DataStore updateData</span><br>        <span class="hljs-comment">// get current state</span><br>        savedStateHandle.<span class="hljs-keyword">get</span>&lt;STATE&gt;(KEY_STATE)?.let &#123; state -&gt;<br>            <span class="hljs-comment">// simpan state baru ke savedStateHandle</span><br>            savedStateHandle[KEY_STATE] = newState(state)<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-meta">@Parcelize</span><br><span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyState</span>(<br>    <span class="hljs-keyword">val</span> text: String = <span class="hljs-string">&quot;&quot;</span><br>): Parcelable<br><br><span class="hljs-meta">@HiltViewModel</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyViewModel</span> <span class="hljs-meta">@Inject</span> <span class="hljs-keyword">constructor</span>(<br>    savedStateHandle: SavedStateHandle<br>): BaseViewModel&lt;MyState&gt;(<br>    savedStateHandle = savedStateHandle,<br>    defaultState = MyState()<br>) &#123;<br><br>    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateText</span><span class="hljs-params">(newText: <span class="hljs-type">String</span>)</span></span> &#123;<br>        updateState &#123;<br>            copy(<br>                text = newText<br>            )<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-meta">@Composable</span><br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">MyScreen</span><span class="hljs-params">(</span></span><br><span class="hljs-params"><span class="hljs-function">    viewModel: <span class="hljs-type">MyViewModel</span> = hiltViewModel()</span></span><br>) &#123;<br><br>    <span class="hljs-comment">// Observe state</span><br>    <span class="hljs-keyword">val</span> state <span class="hljs-keyword">by</span> viewModel.state.collectAsStateWithLifecycle()<br><br>    Box(<br>        contentAlignment = Alignment.Center,<br>        modifier = Modifier<br>            .fillMaxSize()<br>    ) &#123;<br>        OutlinedTextField(<br>            value = state.text,<br>            onValueChange = viewModel::updateText<br>        )<br>    &#125;<br>&#125;<br><br><span class="hljs-meta">@AndroidEntryPoint</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">ComponentActivity</span>() &#123;<br>    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> &#123;<br>        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)<br>        setContent &#123;<br>            ComposeResearchTheme &#123;<br>                Surface(<br>                    modifier = Modifier.fillMaxSize(),<br>                    color = MaterialTheme.colorScheme.background<br>                ) &#123;<br>                    MyScreen()<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ViewModel </tag>
            
            <tag> ViewState </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android PinEntryEditText</title>
      <link href="/2024/02/23/Android-PinEntryEditText/"/>
      <url>/2024/02/23/Android-PinEntryEditText/</url>
      
        <content type="html"><![CDATA[<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">com.yeahka.widget.safekeyboard.PinEntryEditText</span></span><br><span class="hljs-tag">    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">&quot;match_parent&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">&quot;wrap_content&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">android:inputType</span>=<span class="hljs-string">&quot;number&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">&quot;20sp&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">app:backgroundStyle</span>=<span class="hljs-string">&quot;outline&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">app:charSize</span>=<span class="hljs-string">&quot;40dp&quot;</span> /&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">com.yeahka.widget.safekeyboard.PinEntryEditText</span></span><br><span class="hljs-tag">    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">&quot;match_parent&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">&quot;wrap_content&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">android:inputType</span>=<span class="hljs-string">&quot;numberPassword&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">app:backgroundStyle</span>=<span class="hljs-string">&quot;fill&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">app:charSpace</span>=<span class="hljs-string">&quot;15dp&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">app:charSize</span>=<span class="hljs-string">&quot;45dp&quot;</span> /&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">com.yeahka.widget.safekeyboard.PinEntryEditText</span></span><br><span class="hljs-tag">    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">&quot;match_parent&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">&quot;wrap_content&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">android:inputType</span>=<span class="hljs-string">&quot;number&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">app:backgroundStyle</span>=<span class="hljs-string">&quot;underline&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">app:charSize</span>=<span class="hljs-string">&quot;40dp&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure><h2 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> android.content.Context;<br><span class="hljs-keyword">import</span> android.content.res.TypedArray;<br><span class="hljs-keyword">import</span> android.graphics.Canvas;<br><span class="hljs-keyword">import</span> android.graphics.Color;<br><span class="hljs-keyword">import</span> android.graphics.Paint;<br><span class="hljs-keyword">import</span> android.graphics.Typeface;<br><span class="hljs-keyword">import</span> android.text.Editable;<br><span class="hljs-keyword">import</span> android.text.InputFilter;<br><span class="hljs-keyword">import</span> android.text.InputType;<br><span class="hljs-keyword">import</span> android.text.TextPaint;<br><span class="hljs-keyword">import</span> android.text.method.DigitsKeyListener;<br><span class="hljs-keyword">import</span> android.util.AttributeSet;<br><span class="hljs-keyword">import</span> android.view.ActionMode;<br><span class="hljs-keyword">import</span> android.view.Menu;<br><span class="hljs-keyword">import</span> android.view.MenuItem;<br><span class="hljs-keyword">import</span> android.view.accessibility.AccessibilityNodeInfo;<br><br><span class="hljs-keyword">import</span> androidx.annotation.Nullable;<br><span class="hljs-keyword">import</span> androidx.appcompat.widget.AppCompatEditText;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PinEntryEditText</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AppCompatEditText</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">float</span> <span class="hljs-variable">mCharSize</span> <span class="hljs-operator">=</span> <span class="hljs-number">40</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">float</span> <span class="hljs-variable">mSpace</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">float</span> <span class="hljs-variable">mRadius</span> <span class="hljs-operator">=</span> <span class="hljs-number">8</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">mNumChars</span> <span class="hljs-operator">=</span> <span class="hljs-number">6</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">mBackgroundStyle</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">float</span> <span class="hljs-variable">mLineStroke</span> <span class="hljs-operator">=</span> <span class="hljs-number">0.5f</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">float</span> <span class="hljs-variable">mLineStrokeSelected</span> <span class="hljs-operator">=</span> <span class="hljs-number">0.5f</span>;<br>    <span class="hljs-keyword">private</span> AccessibilityNodeInfo accessibilityNodeInfo;<br>    <span class="hljs-keyword">private</span> OnClickListener mClickListener;<br>    <span class="hljs-keyword">private</span> Paint mLinesPaint;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">PinEntryEditText</span><span class="hljs-params">(Context context)</span> &#123;<br>        <span class="hljs-built_in">super</span>(context);<br>        init(context, <span class="hljs-literal">null</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">PinEntryEditText</span><span class="hljs-params">(Context context, AttributeSet attrs)</span> &#123;<br>        <span class="hljs-built_in">super</span>(context, attrs);<br>        init(context, attrs);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">PinEntryEditText</span><span class="hljs-params">(Context context, AttributeSet attrs, <span class="hljs-type">int</span> defStyleAttr)</span> &#123;<br>        <span class="hljs-built_in">super</span>(context, attrs, defStyleAttr);<br>        init(context, attrs);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onAttachedToWindow</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-built_in">super</span>.onAttachedToWindow();<br>        accessibilityNodeInfo = createAccessibilityNodeInfo();<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onDetachedFromWindow</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-built_in">super</span>.onDetachedFromWindow();<br>        accessibilityNodeInfo = <span class="hljs-literal">null</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(Context context, <span class="hljs-meta">@Nullable</span> AttributeSet attrs)</span> &#123;<br>        <span class="hljs-type">float</span> <span class="hljs-variable">multi</span> <span class="hljs-operator">=</span> context.getResources().getDisplayMetrics().density;<br>        mCharSize = multi * mCharSize; <span class="hljs-comment">//convert to pixels for our density</span><br>        mSpace = multi * mSpace; <span class="hljs-comment">//convert to pixels for our density</span><br>        mRadius = multi * mRadius;<br>        mLineStroke = multi * mLineStroke;<br>        mLineStrokeSelected = multi * mLineStrokeSelected;<br>        mLinesPaint = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Paint</span>(getPaint());<br>        mLinesPaint.setStrokeWidth(mLineStroke);<br>        setBackgroundResource(<span class="hljs-number">0</span>);<br>        setCursorVisible(<span class="hljs-literal">false</span>);<br>        setTextIsSelectable(<span class="hljs-literal">false</span>);<br>        setHint(<span class="hljs-string">&quot;&quot;</span>);<br>        setTypeface(Typeface.DEFAULT_BOLD);<br><br>        <span class="hljs-keyword">if</span> (attrs == <span class="hljs-literal">null</span>) &#123;<br>            setInputType(InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_VARIATION_PASSWORD);<br>            setKeyListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">DigitsKeyListener</span>());<br>            setFilters(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputFilter</span>[]&#123;<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputFilter</span>.LengthFilter(mNumChars)&#125;);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            mNumChars = attrs.getAttributeIntValue(android.R.attr.maxLength, mNumChars);<br>            <span class="hljs-comment">//noinspection resource</span><br>            <span class="hljs-type">TypedArray</span> <span class="hljs-variable">typedArray</span> <span class="hljs-operator">=</span> context.obtainStyledAttributes(attrs, R.styleable.PinEntryEditText);<br>            mBackgroundStyle = typedArray.getInt(R.styleable.PinEntryEditText_backgroundStyle, mBackgroundStyle);<br>            mCharSize = typedArray.getDimensionPixelSize(R.styleable.PinEntryEditText_charSize, (<span class="hljs-type">int</span>) mCharSize);<br>            mSpace = typedArray.getDimensionPixelSize(R.styleable.PinEntryEditText_charSpace, (<span class="hljs-type">int</span>) mSpace);<br>            typedArray.recycle();<br>        &#125;<br>        <span class="hljs-keyword">if</span> (mBackgroundStyle == <span class="hljs-number">2</span>) &#123;<br>            mLinesPaint.setStyle(Paint.Style.FILL);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            mLinesPaint.setStyle(Paint.Style.STROKE);<br>        &#125;<br>        <span class="hljs-keyword">if</span> (isPassword()) &#123;<br>            getPaint().setFakeBoldText(<span class="hljs-literal">true</span>);<br>        &#125;<br>        <span class="hljs-comment">//Disable copy paste</span><br>        <span class="hljs-built_in">super</span>.setCustomSelectionActionModeCallback(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ActionMode</span>.Callback() &#123;<br>            <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">onPrepareActionMode</span><span class="hljs-params">(ActionMode mode, Menu menu)</span> &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            &#125;<br><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onDestroyActionMode</span><span class="hljs-params">(ActionMode mode)</span> &#123;<br>            &#125;<br><br>            <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">onCreateActionMode</span><span class="hljs-params">(ActionMode mode, Menu menu)</span> &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            &#125;<br><br>            <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">onActionItemClicked</span><span class="hljs-params">(ActionMode mode, MenuItem item)</span> &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            &#125;<br>        &#125;);<br>        <span class="hljs-comment">// When tapped, move cursor to end of text.</span><br>        <span class="hljs-built_in">super</span>.setOnClickListener(v -&gt; &#123;<br>            <span class="hljs-type">Editable</span> <span class="hljs-variable">text</span> <span class="hljs-operator">=</span> getText();<br>            <span class="hljs-keyword">if</span> (text != <span class="hljs-literal">null</span>) &#123;<br>                setSelection(text.length());<br>            &#125;<br>            <span class="hljs-keyword">if</span> (mClickListener != <span class="hljs-literal">null</span>) &#123;<br>                mClickListener.onClick(v);<br>            &#125;<br>        &#125;);<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isPassword</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> accessibilityNodeInfo != <span class="hljs-literal">null</span> &amp;&amp; accessibilityNodeInfo.isPassword();<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setOnClickListener</span><span class="hljs-params">(OnClickListener l)</span> &#123;<br>        mClickListener = l;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setCustomSelectionActionModeCallback</span><span class="hljs-params">(ActionMode.Callback actionModeCallback)</span> &#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">&quot;setCustomSelectionActionModeCallback() not supported.&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onMeasure</span><span class="hljs-params">(<span class="hljs-type">int</span> widthMeasureSpec, <span class="hljs-type">int</span> heightMeasureSpec)</span> &#123;<br>        <span class="hljs-built_in">super</span>.onMeasure(widthMeasureSpec, heightMeasureSpec);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">width</span> <span class="hljs-operator">=</span> getMeasuredWidth();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">height</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>) mCharSize + getPaddingTop() + getPaddingBottom();<br>        System.out.println(<span class="hljs-string">&quot;onMeasure: &quot;</span> + width + <span class="hljs-string">&quot;,&quot;</span> + height);<br>        setMeasuredDimension(width, height);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onDraw</span><span class="hljs-params">(Canvas canvas)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">availableWidth</span> <span class="hljs-operator">=</span> getWidth() - getPaddingRight() - getPaddingLeft();<br>        <span class="hljs-type">float</span> <span class="hljs-variable">space</span> <span class="hljs-operator">=</span> mSpace * (mNumChars - <span class="hljs-number">1</span>);<br>        <span class="hljs-type">float</span> <span class="hljs-variable">charWidth</span> <span class="hljs-operator">=</span> mCharSize * mNumChars;<br>        <span class="hljs-keyword">if</span> (availableWidth &lt; charWidth) &#123;<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (availableWidth - charWidth &lt; space) &#123;<br>            space = availableWidth - charWidth;<br>            mSpace = space / (mNumChars - <span class="hljs-number">1</span>);<br>        &#125;<br>        <span class="hljs-type">float</span> <span class="hljs-variable">leftOffset</span> <span class="hljs-operator">=</span> (availableWidth - charWidth - space) / <span class="hljs-number">2</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">startX</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>) (getPaddingLeft() + leftOffset);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">bottom</span> <span class="hljs-operator">=</span> getHeight() - getPaddingBottom();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">top</span> <span class="hljs-operator">=</span> getPaddingTop();<br>        <span class="hljs-type">Editable</span> <span class="hljs-variable">text</span> <span class="hljs-operator">=</span> getText();<br>        <span class="hljs-keyword">if</span> (text == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">textLength</span> <span class="hljs-operator">=</span> text.length();<br>        <span class="hljs-type">TextPaint</span> <span class="hljs-variable">textPaint</span> <span class="hljs-operator">=</span> getPaint();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; mNumChars; i++) &#123;<br>            updateColorForLines(i == textLength);<br><br>            <span class="hljs-keyword">if</span> (mBackgroundStyle == <span class="hljs-number">0</span>) &#123;<br>                canvas.drawLine(startX, bottom, startX + mCharSize, bottom, mLinesPaint);<br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (mBackgroundStyle == <span class="hljs-number">1</span>) &#123;<br>                canvas.drawRoundRect(startX, top, startX + mCharSize, bottom, mRadius, mRadius, mLinesPaint);<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                canvas.drawRoundRect(startX, top, startX + mCharSize, bottom, mRadius, mRadius, mLinesPaint);<br>            &#125;<br><br>            <span class="hljs-keyword">if</span> (textLength &gt; i) &#123;<br>                <span class="hljs-type">float</span> textWidth;<br>                <span class="hljs-type">boolean</span> <span class="hljs-variable">isPassword</span> <span class="hljs-operator">=</span> isPassword();<br>                <span class="hljs-keyword">if</span> (isPassword) &#123;<br>                    textWidth = textPaint.measureText(<span class="hljs-string">&quot;•&quot;</span>);<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    textWidth = textPaint.measureText(text.charAt(i) + <span class="hljs-string">&quot;&quot;</span>);<br>                &#125;<br>                Paint.<span class="hljs-type">FontMetrics</span> <span class="hljs-variable">metrics</span> <span class="hljs-operator">=</span> textPaint.getFontMetrics();<br>                <span class="hljs-type">float</span> <span class="hljs-variable">textHeight</span> <span class="hljs-operator">=</span> metrics.bottom - metrics.top;<br>                <span class="hljs-type">float</span> <span class="hljs-variable">middle</span> <span class="hljs-operator">=</span> startX + mCharSize / <span class="hljs-number">2</span>;<br>                <span class="hljs-type">float</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> middle - textWidth / <span class="hljs-number">2</span>;<br>                <span class="hljs-type">float</span> <span class="hljs-variable">y</span> <span class="hljs-operator">=</span> bottom - mCharSize / <span class="hljs-number">2</span> + textHeight / <span class="hljs-number">2</span> - metrics.descent;<br>                <span class="hljs-type">String</span> <span class="hljs-variable">ch</span> <span class="hljs-operator">=</span> isPassword ? <span class="hljs-string">&quot;•&quot;</span> : Character.toString(text.charAt(i));<br>                canvas.drawText(ch, x, y, textPaint);<br>            &#125;<br><br>            <span class="hljs-keyword">if</span> (mSpace &lt; <span class="hljs-number">0</span>) &#123;<br>                startX += (<span class="hljs-type">int</span>) (mCharSize * <span class="hljs-number">2</span>);<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                startX += (<span class="hljs-type">int</span>) (mCharSize + mSpace);<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> next Is the current char the next character to be input?</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateColorForLines</span><span class="hljs-params">(<span class="hljs-type">boolean</span> next)</span> &#123;<br>        <span class="hljs-keyword">if</span> (isFocused()) &#123;<br>            mLinesPaint.setStrokeWidth(mLineStrokeSelected);<br>            <span class="hljs-keyword">if</span> (mBackgroundStyle == <span class="hljs-number">2</span>) &#123;<br>                mLinesPaint.setColor(Color.parseColor(<span class="hljs-string">&quot;#ffF4F6F8&quot;</span>));<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                mLinesPaint.setColor(Color.parseColor(<span class="hljs-string">&quot;#666666&quot;</span>));<br>                <span class="hljs-keyword">if</span> (next) &#123;<br>                    mLinesPaint.setColor(Color.parseColor(<span class="hljs-string">&quot;#008CFF&quot;</span>));<br>                &#125;<br>            &#125;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            mLinesPaint.setStrokeWidth(mLineStroke);<br>            <span class="hljs-keyword">if</span> (mBackgroundStyle == <span class="hljs-number">2</span>) &#123;<br>                mLinesPaint.setColor(Color.parseColor(<span class="hljs-string">&quot;#ffF4F6F8&quot;</span>));<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                mLinesPaint.setColor(Color.parseColor(<span class="hljs-string">&quot;#666666&quot;</span>));<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">declare-styleable</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;PinEntryEditText&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">attr</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;charSpace&quot;</span> <span class="hljs-attr">format</span>=<span class="hljs-string">&quot;dimension&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">attr</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;charSize&quot;</span> <span class="hljs-attr">format</span>=<span class="hljs-string">&quot;dimension&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">attr</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;backgroundStyle&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">enum</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;underline&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;0&quot;</span> /&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">enum</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;outline&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;1&quot;</span> /&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">enum</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;fill&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;2&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">attr</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">declare-styleable</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="弹出系统键盘"><a href="#弹出系统键盘" class="headerlink" title="弹出系统键盘"></a>弹出系统键盘</h2><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-comment">// 部分Android 10 无效</span><br>WindowInsetsControllerCompat(window, it).show(WindowInsetsCompat.Type.ime())<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pin </tag>
            
            <tag> EditText </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git commit message</title>
      <link href="/2024/02/23/Git-commit-message/"/>
      <url>/2024/02/23/Git-commit-message/</url>
      
        <content type="html"><![CDATA[<h2 id="Git提交描述规范"><a href="#Git提交描述规范" class="headerlink" title="Git提交描述规范"></a>Git提交描述规范</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs text">type(&lt;scope&gt;):&lt;空格&gt;&lt;subject&gt;&lt;空格&gt;#&lt;github-ref-id&gt;<br>&lt;换行&gt;<br>&lt;body&gt;<br>&lt;换行&gt;<br>&lt;footer&gt;<br></code></pre></td></tr></table></figure><h3 id="type"><a href="#type" class="headerlink" title="type"></a>type</h3><table><thead><tr><th>name</th><th>description</th></tr></thead><tbody><tr><td>feat</td><td>新功能（feature）</td></tr><tr><td>fix</td><td>修复bug</td></tr><tr><td>docs</td><td>仅仅修改了文档（documentation）</td></tr><tr><td>style</td><td>仅仅是对格式进行修改，如逗号、缩进、空格等。不改变代码逻辑</td></tr><tr><td>refactor</td><td>重构（即不是新增功能，也不是修改bug的代码变动）</td></tr><tr><td>perf</td><td>优化相关，如提升性能、用户体验等</td></tr><tr><td>test</td><td>测试用例，包括单元测试、集成测试</td></tr><tr><td>chore</td><td>改变构建流程、或者增加依赖库、工具等</td></tr><tr><td>revert</td><td>版本回滚</td></tr></tbody></table><h3 id="scope"><a href="#scope" class="headerlink" title="scope"></a>scope</h3><blockquote><p>用于说明 commit 影响的范围，比如数据层、控制层、视图层等等，视项目不同而不同。</p></blockquote><h3 id="subject"><a href="#subject" class="headerlink" title="subject"></a>subject</h3><blockquote><p>commit 目的的简短描述，不超过50个字符</p></blockquote><ul><li>以动词开头，使用第一人称现在时，比如change，而不是changed或changes</li><li>第一个字母小写</li><li>结尾不加句号</li></ul><h3 id="github-ref-id"><a href="#github-ref-id" class="headerlink" title="github-ref-id"></a>github-ref-id</h3><blockquote><p>关联bug修复或者已完成特性，issue or feature</p></blockquote><h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs text">fix(ui): Ensure Range headers adhere more closely to RFC 2616 #2310<br><br>To add new dependency use `range-parser`to compute the range.<br>It is more well-tested in the wild.<br><br>BREAKING CHANGE:<br>port-runner command line option has changed to runner-port.<br>To migrate your project, change all the commands,<br>where you use --port-runner to --runner-port.<br>content_paste<br></code></pre></td></tr></table></figure><h2 id="emoji-指南"><a href="#emoji-指南" class="headerlink" title="emoji 指南"></a>emoji 指南</h2><p><a href="https://gitmoji.js.org/">gitmoji</a></p><table><thead><tr><th>emoji</th><th>emoji 代码</th><th>commit 说明</th></tr></thead><tbody><tr><td>调色板</td><td>:art:</td><td>改进代码结构&#x2F;代码格式</td></tr><tr><td>火焰</td><td>:fire:</td><td>移除代码或文件</td></tr><tr><td>bug</td><td>:bug:</td><td>修复 bug</td></tr><tr><td>急救车</td><td>:ambulance:</td><td>重要补丁</td></tr><tr><td>火花</td><td>:sparkles:</td><td>引入新功能</td></tr><tr><td>备忘录</td><td>:memo:</td><td>撰写文档</td></tr><tr><td>火箭</td><td>:rocket:</td><td>部署功能</td></tr><tr><td>口红</td><td>:lipstick:</td><td>更新 UI 和样式文件</td></tr><tr><td>庆祝</td><td>:tada:</td><td>初次提交</td></tr><tr><td>白色复选框</td><td>:white_check_mark:</td><td>增加测试</td></tr><tr><td>锁</td><td>:lock:</td><td>修复安全问题</td></tr><tr><td>苹果</td><td>:apple:</td><td>修复 macOS 下的问题</td></tr><tr><td>企鹅</td><td>:penguin:</td><td>修复 Linux 下的问题</td></tr><tr><td>旗帜</td><td>:checked_flag:</td><td>修复 Windows 下的问题</td></tr><tr><td>书签</td><td>:bookmark:</td><td>发行&#x2F;版本标签</td></tr><tr><td>警车灯</td><td>:rotating_light:</td><td>移除 linter 警告</td></tr><tr><td>施工</td><td>:construction:</td><td>工作进行中</td></tr><tr><td>绿心</td><td>:green_heart:</td><td>修复 CI 构建问题</td></tr><tr><td>下降箭头</td><td>:arrow_down:</td><td>降级依赖</td></tr><tr><td>上升箭头</td><td>:arrow_up:</td><td>升级依赖</td></tr><tr><td>工人</td><td>:construction_worker:</td><td>添加 CI 构建系统</td></tr><tr><td>上升趋势图</td><td>:chart_with_upwards_trend:</td><td>添加分析或跟踪代</td></tr><tr><td>锤子</td><td>:hammer:</td><td>重大重构</td></tr><tr><td>减号</td><td>:heavy_minus_sign:</td><td>减少一个依赖</td></tr><tr><td>鲸鱼</td><td>:whale:</td><td>Docker 相关工作</td></tr><tr><td>加号</td><td>:heavy_plug_sign:</td><td>增加一个依赖</td></tr><tr><td>扳手</td><td>:wrench:</td><td>修改配置文件</td></tr><tr><td>地球</td><td>:globe_with_meridians:</td><td>国际化与本地化</td></tr><tr><td>铅笔</td><td>:pencil2:</td><td>修复 typo</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> commit message </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android bitmap trim white</title>
      <link href="/2024/02/23/Android-bitmap-trim-white/"/>
      <url>/2024/02/23/Android-bitmap-trim-white/</url>
      
        <content type="html"><![CDATA[<h2 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h2><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 去除多余白框</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">trimBitmap</span><span class="hljs-params">(bitmap: <span class="hljs-type">Bitmap</span>)</span></span>: Bitmap &#123;<br>    <span class="hljs-keyword">var</span> top = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">var</span> bottom = bitmap.height - <span class="hljs-number">1</span><br>    <span class="hljs-keyword">var</span> left = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">var</span> right = bitmap.width - <span class="hljs-number">1</span><br>    <span class="hljs-comment">// 从顶部开始扫描，找到第一个非白色像素的行</span><br>    <span class="hljs-keyword">while</span> (top &lt; bitmap.height &amp;&amp; isRowWhite(bitmap, top)) &#123;<br>        top++<br>    &#125;<br>    <span class="hljs-comment">// 从底部开始扫描，找到第一个非白色像素的行</span><br>    <span class="hljs-keyword">while</span> (bottom &gt;= top &amp;&amp; isRowWhite(bitmap, bottom)) &#123;<br>        bottom--<br>    &#125;<br>    <span class="hljs-comment">// 从左侧开始扫描，找到第一个非白色像素的列</span><br>    <span class="hljs-keyword">while</span> (left &lt; bitmap.width &amp;&amp; isColumnWhite(bitmap, left, top, bottom)) &#123;<br>        left++<br>    &#125;<br>    <span class="hljs-comment">// 从右侧开始扫描，找到第一个非白色像素的列</span><br>    <span class="hljs-keyword">while</span> (right &gt;= left &amp;&amp; isColumnWhite(bitmap, right, top, bottom)) &#123;<br>        right--<br>    &#125;<br>    <span class="hljs-comment">// 裁剪图像</span><br>    <span class="hljs-keyword">return</span> Bitmap.createBitmap(bitmap, left, top, right - left + <span class="hljs-number">1</span>, bottom - top + <span class="hljs-number">1</span>)<br>&#125;<br><br><span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">isRowWhite</span><span class="hljs-params">(bitmap: <span class="hljs-type">Bitmap</span>, row: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Boolean</span> &#123;<br>    <span class="hljs-keyword">for</span> (x <span class="hljs-keyword">in</span> <span class="hljs-number">0</span> until bitmap.width) &#123;<br>        <span class="hljs-keyword">if</span> (bitmap.hasColor(x, row)) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>&#125;<br><br><span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">isColumnWhite</span><span class="hljs-params">(bitmap: <span class="hljs-type">Bitmap</span>, column: <span class="hljs-type">Int</span>, top: <span class="hljs-type">Int</span>, bottom: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Boolean</span> &#123;<br>    <span class="hljs-keyword">for</span> (y <span class="hljs-keyword">in</span> top..bottom) &#123;<br>        <span class="hljs-keyword">if</span> (bitmap.hasColor(column, y)) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>&#125;<br><br><span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> Bitmap.<span class="hljs-title">hasColor</span><span class="hljs-params">(x: <span class="hljs-type">Int</span>, y: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Boolean</span> &#123;<br>    <span class="hljs-keyword">val</span> p = getPixel(x, y)<br>    <span class="hljs-keyword">return</span> p != Color.WHITE &amp;&amp; p != Color.TRANSPARENT<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bitmap </tag>
            
            <tag> clip </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android bitmap add watermark</title>
      <link href="/2024/02/23/Android-bitmap-add-watermark/"/>
      <url>/2024/02/23/Android-bitmap-add-watermark/</url>
      
        <content type="html"><![CDATA[<h2 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h2><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-comment">// 支持上下左右</span><br>addWatermark(originalBitmap, <span class="hljs-string">&quot;@grivos&quot;</span>, WatermarkOptions(Corner.BOTTOM_RIGHT))<br></code></pre></td></tr></table></figure><h2 id="实现源码"><a href="#实现源码" class="headerlink" title="实现源码"></a>实现源码</h2><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">import</span> android.graphics.*<br><span class="hljs-keyword">import</span> android.graphics.Paint.ANTI_ALIAS_FLAG<br><span class="hljs-keyword">import</span> android.graphics.Paint.DITHER_FLAG<br><span class="hljs-keyword">import</span> androidx.<span class="hljs-keyword">annotation</span>.ColorInt<br><br><br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">addWatermark</span><span class="hljs-params">(</span></span><br><span class="hljs-params"><span class="hljs-function">    bitmap: <span class="hljs-type">Bitmap</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">    watermarkText: <span class="hljs-type">String</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">    options: <span class="hljs-type">WatermarkOptions</span> = WatermarkOptions()</span></span><br>): Bitmap &#123;<br>    <span class="hljs-keyword">val</span> result = bitmap.copy(bitmap.config, <span class="hljs-literal">true</span>)<br>    <span class="hljs-keyword">val</span> canvas = Canvas(result)<br>    <span class="hljs-keyword">val</span> paint = Paint(ANTI_ALIAS_FLAG or DITHER_FLAG)<br>    paint.textAlign = <span class="hljs-keyword">when</span> (options.corner) &#123;<br>        Corner.TOP_LEFT,<br>        Corner.BOTTOM_LEFT -&gt; Paint.Align.LEFT<br>        Corner.TOP_RIGHT,<br>        Corner.BOTTOM_RIGHT -&gt; Paint.Align.RIGHT<br>    &#125;<br>    <span class="hljs-keyword">val</span> textSize = result.width * options.textSizeToWidthRatio<br>    paint.textSize = textSize<br>    paint.color = options.textColor<br>    <span class="hljs-keyword">if</span> (options.shadowColor != <span class="hljs-literal">null</span>) &#123;<br>        paint.setShadowLayer(textSize / <span class="hljs-number">2</span>, <span class="hljs-number">0f</span>, <span class="hljs-number">0f</span>, options.shadowColor)<br>    &#125;<br>    <span class="hljs-keyword">if</span> (options.typeface != <span class="hljs-literal">null</span>) &#123;<br>        paint.typeface = options.typeface<br>    &#125;<br>    <span class="hljs-keyword">val</span> padding = result.width * options.paddingToWidthRatio<br>    <span class="hljs-keyword">val</span> coordinates =<br>        calculateCoordinates(watermarkText, paint, options, canvas.width, canvas.height, padding)<br>    canvas.drawText(watermarkText, coordinates.x, coordinates.y, paint)<br>    <span class="hljs-keyword">return</span> result<br>&#125;<br><br><span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">calculateCoordinates</span><span class="hljs-params">(</span></span><br><span class="hljs-params"><span class="hljs-function">    watermarkText: <span class="hljs-type">String</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">    paint: <span class="hljs-type">Paint</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">    options: <span class="hljs-type">WatermarkOptions</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">    width: <span class="hljs-type">Int</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">    height: <span class="hljs-type">Int</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">    padding: <span class="hljs-type">Float</span></span></span><br><span class="hljs-params"><span class="hljs-function">)</span></span>: PointF &#123;<br>    <span class="hljs-keyword">val</span> x = <span class="hljs-keyword">when</span> (options.corner) &#123;<br>        Corner.TOP_LEFT,<br>        Corner.BOTTOM_LEFT -&gt; &#123;<br>            padding<br>        &#125;<br>        Corner.TOP_RIGHT,<br>        Corner.BOTTOM_RIGHT -&gt; &#123;<br>            width - padding<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">val</span> y = <span class="hljs-keyword">when</span> (options.corner) &#123;<br>        Corner.BOTTOM_LEFT,<br>        Corner.BOTTOM_RIGHT -&gt; &#123;<br>            height - padding<br>        &#125;<br>        Corner.TOP_LEFT,<br>        Corner.TOP_RIGHT -&gt; &#123;<br>            <span class="hljs-keyword">val</span> bounds = Rect()<br>            paint.getTextBounds(watermarkText, <span class="hljs-number">0</span>, watermarkText.length, bounds)<br>            <span class="hljs-keyword">val</span> textHeight = bounds.height()<br>            textHeight + padding<br><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> PointF(x, y)<br>&#125;<br><br><span class="hljs-keyword">enum</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Corner</span> &#123;<br>    TOP_LEFT,<br>    TOP_RIGHT,<br>    BOTTOM_LEFT,<br>    BOTTOM_RIGHT,<br>&#125;<br><br><span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WatermarkOptions</span>(<br>    <span class="hljs-keyword">val</span> corner: Corner = Corner.BOTTOM_RIGHT,<br>    <span class="hljs-keyword">val</span> textSizeToWidthRatio: <span class="hljs-built_in">Float</span> = <span class="hljs-number">0.04f</span>,<br>    <span class="hljs-keyword">val</span> paddingToWidthRatio: <span class="hljs-built_in">Float</span> = <span class="hljs-number">0.03f</span>,<br>    <span class="hljs-meta">@ColorInt</span> <span class="hljs-keyword">val</span> textColor: <span class="hljs-built_in">Int</span> = Color.WHITE,<br>    <span class="hljs-meta">@ColorInt</span> <span class="hljs-keyword">val</span> shadowColor: <span class="hljs-built_in">Int</span>? = Color.BLACK,<br>    <span class="hljs-keyword">val</span> typeface: Typeface? = <span class="hljs-literal">null</span><br>)<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bitmap </tag>
            
            <tag> watermark </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gradle resolution rules</title>
      <link href="/2023/04/16/gradle-resolution-rules/"/>
      <url>/2023/04/16/gradle-resolution-rules/</url>
      
        <content type="html"><![CDATA[<p><a href="https://docs.gradle.org/current/userguide/resolution_rules.html">Customizing resolution of a dependency directly</a></p><h2 id="use-variant-define-attributes"><a href="#use-variant-define-attributes" class="headerlink" title="use variant define attributes"></a>use variant define attributes</h2><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs groovy">configurations.all &#123;<br>    resolutionStrategy.dependencySubstitution &#123;<br>        substitute(variant(module(<span class="hljs-string">&quot;com.google.guava:guava:28.2-jre&quot;</span>)) &#123;<br>            attributes &#123;<br>                attribute(Category.CATEGORY_ATTRIBUTE, objects.named(Category.REGULAR_PLATFORM))<br>            &#125;<br>        &#125;).using(module(<span class="hljs-string">&quot;com.google.guava:guava:28.2-jre&quot;</span>))<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="specify-capabilities"><a href="#specify-capabilities" class="headerlink" title="specify capabilities"></a>specify capabilities</h2><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs groovy">configurations.testCompileClasspath &#123;<br>    resolutionStrategy.dependencySubstitution &#123;<br>        substitute(module(<span class="hljs-string">&quot;com.acme:lib:1.0&quot;</span>)).using(variant(module(<span class="hljs-string">&quot;com.acme:lib:1.0&quot;</span>)) &#123;<br>            capabilities &#123;<br>                requireCapability(<span class="hljs-string">&quot;com.acme:lib-test-fixtures&quot;</span>)<br>            &#125;<br>        &#125;)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Gradle </category>
          
      </categories>
      
      
        <tags>
            
            <tag> gradle </tag>
            
            <tag> dependency </tag>
            
            <tag> resolutionStrategy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>clean .git folder</title>
      <link href="/2023/04/16/clean-git-folder/"/>
      <url>/2023/04/16/clean-git-folder/</url>
      
        <content type="html"><![CDATA[<p><a href="https://stackoverflow.com/questions/5277467/how-can-i-clean-my-git-folder-cleaned-up-my-project-directory-but-git-is-sti">clean .git folder</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">git reflog expire --expire=now --all<br>git repack -ad  <span class="hljs-comment"># Remove dangling objects from packfiles</span><br>git prune       <span class="hljs-comment"># Remove dangling loose objects</span><br><br>git gc --aggressive --prune=now<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> clean </tag>
            
            <tag> gc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>android fastlane</title>
      <link href="/2023/04/16/android-fastlane/"/>
      <url>/2023/04/16/android-fastlane/</url>
      
        <content type="html"><![CDATA[<p><a href="https://docs.fastlane.tools/actions/gradle/">fastlane gradle</a></p><p><a href="https://docs.fastlane.tools/actions/build_android_app/">build android app</a></p><p>fastlane action gradle</p><h2 id="打包"><a href="#打包" class="headerlink" title="打包"></a>打包</h2><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs ruby">gradle(<br>  <span class="hljs-symbol">task:</span> <span class="hljs-string">&quot;packTstAndProRelease&quot;</span>,<br>  <span class="hljs-comment">#tasks: [&quot;clean&quot;, &quot;assemble&quot;]</span><br>  <span class="hljs-symbol">flavor:</span> <span class="hljs-string">&quot;&quot;</span>,<br>  <span class="hljs-symbol">build_type:</span> <span class="hljs-string">&quot;Release&quot;</span>,<br>  <span class="hljs-symbol">print_command:</span> <span class="hljs-literal">false</span>,<br>  <span class="hljs-symbol">print_command_output:</span> <span class="hljs-literal">false</span>,<br>  <span class="hljs-comment">#flags: &quot;--exitcode --xml file.xml&quot;</span><br>  <span class="hljs-comment"># 配置属性</span><br>  <span class="hljs-symbol">properties:</span> &#123;<br>    <span class="hljs-comment"># 强制修改版本号 </span><br>    <span class="hljs-string">&quot;android.injected.version.code&quot;</span> =&gt; <span class="hljs-number">100</span>,<br>    <span class="hljs-string">&quot;android.injected.version.name&quot;</span> =&gt; <span class="hljs-string">&quot;1.0.0&quot;</span>,<br>    <span class="hljs-comment"># 打包签名</span><br>    <span class="hljs-string">&quot;android.injected.signing.store.file&quot;</span> =&gt; <span class="hljs-string">&quot;keystore.jks&quot;</span>,<br>    <span class="hljs-string">&quot;android.injected.signing.store.password&quot;</span> =&gt; <span class="hljs-string">&quot;store_password&quot;</span>,<br>    <span class="hljs-string">&quot;android.injected.signing.key.alias&quot;</span> =&gt; <span class="hljs-string">&quot;key_alias&quot;</span>,<br>    <span class="hljs-string">&quot;android.injected.signing.key.password&quot;</span> =&gt; <span class="hljs-string">&quot;key_password&quot;</span>,<br>  &#125;<br>)<br></code></pre></td></tr></table></figure><h2 id="清理"><a href="#清理" class="headerlink" title="清理"></a>清理</h2><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ruby">gradle(<br>  <span class="hljs-symbol">task:</span> <span class="hljs-string">&quot;clean&quot;</span><br>)<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> fastlane </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>android clean architecture</title>
      <link href="/2023/04/16/android-clean-architecture/"/>
      <url>/2023/04/16/android-clean-architecture/</url>
      
        <content type="html"><![CDATA[<h3 id="android-clean-architecture"><a href="#android-clean-architecture" class="headerlink" title="android clean architecture"></a>android clean architecture</h3><p><a href="https://github.com/sanogueralorenzo/Android-Kotlin-Clean-Architecture">Android-Kotlin-Clean-Architecture</a></p><ul><li>Maintainance of the project gets easierWhen we add more and more code to a project, the project gets more and more complicated and as a result, maintaining the project gets harder, adding new features require more time and energy and fixing bugs get cumbersome. In fact, this is not even a linear relationship but rather an exponential one! So more code equals more complexity equals more headaches!Using a modular approach greatly reduces this problem because instead of having one big project we have multiple smaller one that easier to manage.</li><li>Modules can be reusedIf you have more than one project, it is very likely that some code is repeated between them, by using a modular approach you can write your code just once and use them as many times as you want. This will hugely decrease the development time, especially when you want to make some changes to the code.</li><li>You write better code and better APIsWorking with modular approach forces you to think more about the code and relationship between the different parts, hence letting you write better code.</li><li>You can take advantage of open source communityYou probably don’t want to share your whole project on the internet and even if you do that may not be very helpful to other developers but you can share the parts of your project that are more general, like the part that crops the photo or uploads files or whatever. By doing this you get all the benefits of open sourcing without exposing your project or your idea to the world.</li></ul><h3 id="android-clean-architecture-sample"><a href="#android-clean-architecture-sample" class="headerlink" title="android clean architecture sample"></a>android clean architecture sample</h3><ol><li><a href="https://github.com/chrisbanes/tivi">Tivi</a></li><li><a href="https://github.com/android10/Android-CleanArchitecture">Android-CleanArchitecture</a></li><li><a href="https://github.com/skydoves/Sample-MVVM-CleanArchitecture">Sample-MVVM-CleanArchitecture</a></li><li><a href="https://github.com/android/architecture-components-samples/tree/master/GithubBrowserSample">GithubBrowserSample</a></li><li><a href="https://github.com/android/plaid">Plaid</a></li><li><a href="https://github.com/guilhermebferreira/Simple-Clean-Architecture-Example">Simple-Clean-Architecture-Example</a></li><li><a href="https://github.com/futurice/android-best-practices/tree/master/templates/project-templates/android-sample-app">Android-Sample-App</a></li><li><a href="https://github.com/android10/Android-CleanArchitecture/tree/rxjava2">RxAndroidCleanArchitecture</a></li><li><a href="https://github.com/richardbruno/MarvelHeroes">MarvelHeroes</a></li><li><a href="https://github.com/bufferapp/android-clean-boilerplate">Android-Clean-Boilerplate</a></li><li><a href="https://github.com/android10/Android-CleanArchitecture/tree/rxjava2-kotlin-sample">CleanArchitectureRxJava</a></li><li><a href="https://github.com/tausiqd/news-android-clean-architecture">news-android-clean-architecture</a></li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>chinese copywriting tutorial</title>
      <link href="/2023/04/15/chinese-copywriting-tutorial/"/>
      <url>/2023/04/15/chinese-copywriting-tutorial/</url>
      
        <content type="html"><![CDATA[<h1 id="中文文案排版指北"><a href="#中文文案排版指北" class="headerlink" title="中文文案排版指北"></a><a href="https://github.com/sparanoid/chinese-copywriting-guidelines/raw/master/README.zh-Hans.md">中文文案排版指北</a></h1><p>统一中文文案、排版的相关用法，降低团队成员之间的沟通成本，增强网站气质。</p><hr><h2 id="空格"><a href="#空格" class="headerlink" title="空格"></a>空格</h2><blockquote><p>「有研究显示，打字的时候不喜欢在中文和英文之间加空格的人，感情路都走得很辛苦，有七成的比例会在 34 岁的时候跟自己不爱的人结婚，而其余三成的人最后只能把遗产留给自己的猫。毕竟爱情跟书写都需要适时地留白。</p><p>与大家共勉之。」——<a href="https://github.com/vinta/pangu.js">vinta&#x2F;paranoid-auto-spacing</a></p></blockquote><h3 id="中英文之间需要增加空格"><a href="#中英文之间需要增加空格" class="headerlink" title="中英文之间需要增加空格"></a>中英文之间需要增加空格</h3><p>正确：</p><blockquote><p>在 LeanCloud 上，数据存储是围绕 <code>AVObject</code> 进行的。</p></blockquote><p>错误：</p><blockquote><p>在LeanCloud上，数据存储是围绕<code>AVObject</code>进行的。</p><p>在 LeanCloud上，数据存储是围绕<code>AVObject</code> 进行的。</p></blockquote><p>完整的正确用法：</p><blockquote><p>在 LeanCloud 上，数据存储是围绕 <code>AVObject</code> 进行的。每个 <code>AVObject</code> 都包含了与 JSON 兼容的 key-value 对应的数据。数据是 schema-free 的，你不需要在每个 <code>AVObject</code> 上提前指定存在哪些键，只要直接设定对应的 key-value 即可。</p></blockquote><p>例外：「豆瓣FM」等产品名词，按照官方所定义的格式书写。</p><h3 id="中文与数字之间需要增加空格"><a href="#中文与数字之间需要增加空格" class="headerlink" title="中文与数字之间需要增加空格"></a>中文与数字之间需要增加空格</h3><p>正确：</p><blockquote><p>今天出去买菜花了 5000 元。</p></blockquote><p>错误：</p><blockquote><p>今天出去买菜花了 5000元。</p><p>今天出去买菜花了5000元。</p></blockquote><h3 id="数字与单位之间需要增加空格"><a href="#数字与单位之间需要增加空格" class="headerlink" title="数字与单位之间需要增加空格"></a>数字与单位之间需要增加空格</h3><p>正确：</p><blockquote><p>我家的光纤入屋宽带有 10 Gbps，SSD 一共有 20 TB</p></blockquote><p>错误：</p><blockquote><p>我家的光纤入屋宽带有 10Gbps，SSD 一共有 20TB</p></blockquote><p>例外：度数／百分比与数字之间不需要增加空格：</p><p>正确：</p><blockquote><p>角度为 90° 的角，就是直角。</p><p>新 MacBook Pro 有 15% 的 CPU 性能提升。</p></blockquote><p>错误：</p><blockquote><p>角度为 90 ° 的角，就是直角。</p><p>新 MacBook Pro 有 15 % 的 CPU 性能提升。</p></blockquote><h3 id="全角标点与其他字符之间不加空格"><a href="#全角标点与其他字符之间不加空格" class="headerlink" title="全角标点与其他字符之间不加空格"></a>全角标点与其他字符之间不加空格</h3><p>正确：</p><blockquote><p>刚刚买了一部 iPhone，好开心！</p></blockquote><p>错误：</p><blockquote><p>刚刚买了一部 iPhone ，好开心！</p><p>刚刚买了一部 iPhone， 好开心！</p></blockquote><h3 id="用-text-spacing-来挽救？"><a href="#用-text-spacing-来挽救？" class="headerlink" title="用 text-spacing 来挽救？"></a>用 <code>text-spacing</code> 来挽救？</h3><p>CSS Text Module Level 4 的 <a href="https://www.w3.org/TR/css-text-4/#text-spacing-property"><code>text-spacing</code></a> 和 Microsoft 的 <a href="https://msdn.microsoft.com/library/ms531164(v=vs.85).aspx"><code>-ms-text-autospace</code></a> 可以实现自动为中英文之间增加空白。不过目前并未普及，另外在其他应用场景，例如 macOS、iOS、Windows 等用户界面目前并不存在这个特性，所以请继续保持随手加空格的习惯。</p><h2 id="标点符号"><a href="#标点符号" class="headerlink" title="标点符号"></a>标点符号</h2><h3 id="不重复使用标点符号"><a href="#不重复使用标点符号" class="headerlink" title="不重复使用标点符号"></a>不重复使用标点符号</h3><p>即使中国大陆的标点符号用法允许重复使用标点符号，但是这么做会破坏句子的美观性。</p><p>正确：</p><blockquote><p>德国队竟然战胜了巴西队！</p><p>她竟然对你说「喵」？！</p></blockquote><p>错误：</p><blockquote><p>德国队竟然战胜了巴西队！！</p><p>德国队竟然战胜了巴西队！！！！！！！！</p><p>她竟然对你说「喵」？？！！</p><p>她竟然对你说「喵」？！？！？？！！</p></blockquote><h2 id="全角和半角"><a href="#全角和半角" class="headerlink" title="全角和半角"></a>全角和半角</h2><p>不明白什么是全角（全形）与半角（半形）符号？请查看维基百科条目『<a href="https://zh.wikipedia.org/wiki/%E5%85%A8%E5%BD%A2%E5%92%8C%E5%8D%8A%E5%BD%A2">全角和半角</a>』。</p><h3 id="使用全角中文标点"><a href="#使用全角中文标点" class="headerlink" title="使用全角中文标点"></a>使用全角中文标点</h3><p>正确：</p><blockquote><p>嗨！你知道嘛？今天前台的小妹跟我说「喵」了哎！</p><p>核磁共振成像（NMRI）是什么原理都不知道？JFGI！</p></blockquote><p>错误：</p><blockquote><p>嗨! 你知道嘛? 今天前台的小妹跟我说 “喵” 了哎！</p><p>嗨!你知道嘛?今天前台的小妹跟我说”喵”了哎！</p><p>核磁共振成像 (NMRI) 是什么原理都不知道? JFGI!</p><p>核磁共振成像(NMRI)是什么原理都不知道?JFGI!</p></blockquote><h3 id="数字使用半角字符"><a href="#数字使用半角字符" class="headerlink" title="数字使用半角字符"></a>数字使用半角字符</h3><p>正确：</p><blockquote><p>这个蛋糕只卖 1000 元。</p></blockquote><p>错误：</p><blockquote><p>这个蛋糕只卖 １０００ 元。</p></blockquote><p>例外：在设计稿、宣传海报中如出现极少量数字的情形时，为方便文字对齐，是可以使用全角数字的。</p><h3 id="遇到完整的英文整句、特殊名词，其内容使用半角标点"><a href="#遇到完整的英文整句、特殊名词，其内容使用半角标点" class="headerlink" title="遇到完整的英文整句、特殊名词，其内容使用半角标点"></a>遇到完整的英文整句、特殊名词，其内容使用半角标点</h3><p>正确：</p><blockquote><p>乔布斯那句话是怎么说的？「Stay hungry, stay foolish.」</p><p>推荐你阅读《Hackers &amp; Painters: Big Ideas from the Computer Age》，非常的有趣。</p></blockquote><p>错误：</p><blockquote><p>乔布斯那句话是怎么说的？「Stay hungry，stay foolish。」</p><p>推荐你阅读《Hackers＆Painters：Big Ideas from the Computer Age》，非常的有趣。</p></blockquote><h2 id="名词"><a href="#名词" class="headerlink" title="名词"></a>名词</h2><h3 id="专有名词使用正确的大小写"><a href="#专有名词使用正确的大小写" class="headerlink" title="专有名词使用正确的大小写"></a>专有名词使用正确的大小写</h3><p>大小写相关用法原属于英文书写范畴，不属于本 wiki 讨论内容，在这里只对部分易错用法进行简述。</p><p>正确：</p><blockquote><p>使用 GitHub 登录</p><p>我们的客户有 GitHub、Foursquare、Microsoft Corporation、Google、Facebook, Inc.。</p></blockquote><p>错误：</p><blockquote><p>使用 github 登录</p><p>使用 GITHUB 登录</p><p>使用 Github 登录</p><p>使用 gitHub 登录</p><p>使用 gｲんĤЦ8 登录</p><p>我们的客户有 github、foursquare、microsoft corporation、google、facebook, inc.。</p><p>我们的客户有 GITHUB、FOURSQUARE、MICROSOFT CORPORATION、GOOGLE、FACEBOOK, INC.。</p><p>我们的客户有 Github、FourSquare、MicroSoft Corporation、Google、FaceBook, Inc.。</p><p>我们的客户有 gitHub、fourSquare、microSoft Corporation、google、faceBook, Inc.。</p><p>我们的客户有 gｲんĤЦ8、ｷouЯƧquﾑгє、๓เςг๏ร๏Ŧt ς๏гק๏гคtเ๏ภn、900913、ƒ4ᄃëв๏๏к, IПᄃ.。</p></blockquote><p>注意：当网页中需要配合整体视觉风格而出现全部大写／小写的情形，HTML 中请使用标淮的大小写规范进行书写；并通过 <code>text-transform: uppercase;</code>／<code>text-transform: lowercase;</code> 对表现形式进行定义。</p><h3 id="不要使用不地道的缩写"><a href="#不要使用不地道的缩写" class="headerlink" title="不要使用不地道的缩写"></a>不要使用不地道的缩写</h3><p>正确：</p><blockquote><p>我们需要一位熟悉 TypeScript、HTML5，至少理解一种框架（如 React、Next.js）的前端开发者。</p></blockquote><p>错误：</p><blockquote><p>我们需要一位熟悉 Ts、h5，至少理解一种框架（如 RJS、nextjs）的 FED。</p></blockquote><h2 id="争议"><a href="#争议" class="headerlink" title="争议"></a>争议</h2><p>以下用法略带有个人色彩，即：无论是否遵循下述规则，从语法的角度来讲都是<strong>正确</strong>的。</p><h3 id="链接之间增加空格"><a href="#链接之间增加空格" class="headerlink" title="链接之间增加空格"></a>链接之间增加空格</h3><p>用法：</p><blockquote><p>请 <a href="#">提交一个 issue</a> 并分配给相关同事。</p><p>访问我们网站的最新动态，请 <a href="#">点击这里</a> 进行订阅！</p></blockquote><p>对比用法：</p><blockquote><p>请<a href="#">提交一个 issue</a>并分配给相关同事。</p><p>访问我们网站的最新动态，请<a href="#">点击这里</a>进行订阅！</p></blockquote><h3 id="简体中文使用直角引号"><a href="#简体中文使用直角引号" class="headerlink" title="简体中文使用直角引号"></a>简体中文使用直角引号</h3><p>用法：</p><blockquote><p>「老师，『有条不紊』的『紊』是什么意思？」</p></blockquote><p>对比用法：</p><blockquote><p>“老师，‘有条不紊’的‘紊’是什么意思？”</p></blockquote><h2 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h2><table><thead><tr><th>仓库</th><th>系列</th><th>语言</th></tr></thead><tbody><tr><td><a href="https://github.com/vinta/pangu.js">pangu.js</a></td><td>pangu</td><td>JavaScript</td></tr><tr><td><a href="https://github.com/vinta/pangu">pangu-go</a></td><td>pangu</td><td>Go</td></tr><tr><td><a href="https://github.com/vinta/pangu.java">pangu.java</a></td><td>pangu</td><td>Java</td></tr><tr><td><a href="https://github.com/vinta/pangu.py">pangu.py</a></td><td>pangu</td><td>Python</td></tr><tr><td><a href="https://github.com/dlackty/pangu.rb">pangu.rb</a></td><td>pangu</td><td>Ruby</td></tr><tr><td><a href="https://github.com/cchlorine/pangu.php">pangu.php</a></td><td>pangu</td><td>PHP</td></tr><tr><td><a href="https://github.com/hotoo/pangu.vim">pangu.vim</a></td><td>pangu</td><td>Vim</td></tr><tr><td><a href="https://github.com/serkodev/vue-pangu">vue-pangu</a></td><td>pangu</td><td>Vue.js (Web Converter)</td></tr><tr><td><a href="https://github.com/huacnlee/autocorrect">autocorrect</a></td><td>autocorrect</td><td>Rust, WASM, CLI tool</td></tr><tr><td><a href="https://github.com/huacnlee/autocorrect/tree/main/autocorrect-node">autocorrect-node</a></td><td>autocorrect</td><td>Node.js</td></tr><tr><td><a href="https://github.com/huacnlee/autocorrect/tree/main/autocorrect-py">autocorrect-py</a></td><td>autocorrect</td><td>Python</td></tr><tr><td><a href="https://github.com/huacnlee/autocorrect/tree/main/autocorrect-rb">autocorrect-rb</a></td><td>autocorrect</td><td>Ruby</td></tr><tr><td><a href="https://github.com/huacnlee/autocorrect/tree/main/autocorrect-java">autocorrect-java</a></td><td>autocorrect</td><td>Java</td></tr><tr><td><a href="https://github.com/longbridgeapp/autocorrect">autocorrect-go</a></td><td>autocorrect</td><td>Go</td></tr><tr><td><a href="https://github.com/NauxLiu/auto-correct">autocorrect-php</a></td><td>autocorrect</td><td>PHP</td></tr><tr><td><a href="https://marketplace.visualstudio.com/items?itemName=huacnlee.autocorrect">autocorrect-vscode</a></td><td>autocorrect</td><td>VS Code Extension</td></tr><tr><td><a href="https://plugins.jetbrains.com/plugin/20244-autocorrect">autocorrect-idea-plugin</a></td><td>autocorrect</td><td>Intellij Platform Plugin</td></tr><tr><td><a href="https://github.com/jxlwqq/chinese-typesetting">jxlwqq&#x2F;chinese-typesetting</a></td><td>other</td><td>PHP</td></tr><tr><td><a href="https://github.com/sparanoid/space-lover">sparanoid&#x2F;space-lover</a></td><td>other</td><td>PHP (WordPress)</td></tr><tr><td><a href="https://github.com/sparanoid/grunt-auto-spacing">sparanoid&#x2F;grunt-auto-spacing</a></td><td>other</td><td>Node.js (Grunt)</td></tr><tr><td><a href="https://github.com/hjiang/scripts/blob/master/add-space-between-latin-and-cjk">hjiang&#x2F;scripts&#x2F;add-space-between-latin-and-cjk</a></td><td>other</td><td>Python</td></tr><tr><td><a href="https://github.com/hustcc/hint">hustcc&#x2F;hint</a></td><td>other</td><td>Python</td></tr><tr><td><a href="https://github.com/n0vad3v/Tekorrect">n0vad3v&#x2F;Tekorrect</a></td><td>other</td><td>Python</td></tr></tbody></table><h2 id="谁在这样做？"><a href="#谁在这样做？" class="headerlink" title="谁在这样做？"></a>谁在这样做？</h2><table><thead><tr><th>网站</th><th>文案</th><th>UGC</th></tr></thead><tbody><tr><td><a href="https://www.apple.com/cn/">Apple 中国</a></td><td>是</td><td>N&#x2F;A</td></tr><tr><td><a href="https://www.apple.com/hk/">Apple 香港</a></td><td>是</td><td>N&#x2F;A</td></tr><tr><td><a href="https://www.apple.com/tw/">Apple 台湾</a></td><td>是</td><td>N&#x2F;A</td></tr><tr><td><a href="https://www.microsoft.com/zh-cn/">Microsoft 中国</a></td><td>是</td><td>N&#x2F;A</td></tr><tr><td><a href="https://www.microsoft.com/zh-hk/">Microsoft 香港</a></td><td>是</td><td>N&#x2F;A</td></tr><tr><td><a href="https://www.microsoft.com/zh-tw/">Microsoft 台湾</a></td><td>是</td><td>N&#x2F;A</td></tr><tr><td><a href="https://leancloud.cn/">LeanCloud</a></td><td>是</td><td>N&#x2F;A</td></tr><tr><td><a href="https://www.v2ex.com/">V2EX</a></td><td>是</td><td>是</td></tr><tr><td><a href="https://apple4us.com/">Apple4us</a></td><td>是</td><td>N&#x2F;A</td></tr><tr><td><a href="https://ruby-china.org/">Ruby China</a></td><td>是</td><td>是</td></tr><tr><td><a href="https://sspai.com/">少数派</a></td><td>是</td><td>N&#x2F;A</td></tr></tbody></table><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><ul><li><a href="https://www.thoughtco.com/guidelines-for-using-capital-letters-1691724">Guidelines for Using Capital Letters - ThoughtCo.</a></li><li><a href="https://en.wikipedia.org/wiki/Letter_case">Letter case - Wikipedia</a></li><li><a href="https://en.oxforddictionaries.com/grammar/punctuation">Punctuation - Oxford Dictionaries</a></li><li><a href="https://owl.english.purdue.edu/owl/section/1/6/">Punctuation - The Purdue OWL</a></li><li><a href="https://www.wikihow.com/Use-English-Punctuation-Correctly">How to Use English Punctuation Correctly - wikiHow</a></li><li><a href="https://zh.opensuse.org/index.php?title=Help:%E6%A0%BC%E5%BC%8F">格式 - openSUSE</a></li><li><a href="https://zh.wikipedia.org/wiki/%E5%85%A8%E5%BD%A2%E5%92%8C%E5%8D%8A%E5%BD%A2">全形和半形 - 维基百科</a></li><li><a href="https://zh.wikipedia.org/wiki/%E5%BC%95%E8%99%9F">引号 - 维基百科</a></li><li><a href="https://zh.wikipedia.org/wiki/%E7%96%91%E5%95%8F%E9%A9%9A%E5%98%86%E8%99%9F">疑问惊叹号 - 维基百科</a></li></ul><h2 id="Forks"><a href="#Forks" class="headerlink" title="Forks"></a>Forks</h2><p>衍生项目的用法可能与本项目存在差异。</p><ul><li><a href="https://github.com/mzlogin/chinese-copywriting-guidelines">mzlogin&#x2F;chinese-copywriting-guidelines</a></li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>nowinandroid</title>
      <link href="/2023/04/07/nowinandroid/"/>
      <url>/2023/04/07/nowinandroid/</url>
      
        <content type="html"><![CDATA[<h2 id="APP设计"><a href="#APP设计" class="headerlink" title="APP设计"></a>APP设计</h2><ul><li>全部 Kotlin 代码 (包括 Gradle 脚本)</li><li>使用 <a href="https://developer.android.com/jetpack/compose?hl=zh-cn">Jetpack Compose</a> 构建 UI</li><li>采用 <a href="https://m3.material.io/">Material 3</a> 设计</li></ul><blockquote><p>页面包括：介绍、样式说明、组件、布局示例，更多内容请参考 <a href="https://www.qomg.fun/docs/nowinandroidcasestudy.pdf">Now In Android Case Study</a>。</p><p>Material 3 主题色彩定制可以在 <a href="https://m3.material.io/theme-builder#/custom">Material Theme Builder</a> 上找到。</p></blockquote><h2 id="架构学习"><a href="#架构学习" class="headerlink" title="架构学习"></a>架构学习</h2><ul><li><a href="https://developer.android.com/jetpack/guide?hl=zh-cn#recommended-app-arch">官方架构指南</a></li><li><a href="https://developer.android.com/jetpack/guide/data-layer">数据层</a></li><li><a href="https://developer.android.com/jetpack/guide/domain-layer">领域层</a></li><li><a href="https://developer.android.com/jetpack/guide/ui-layer">UI 层</a></li><li><a href="https://developer.android.com/jetpack/guide/ui-layer#udf">单向数据流</a></li></ul><h2 id="代码示例"><a href="#代码示例" class="headerlink" title="代码示例"></a>代码示例</h2><p><img src="https://www.qomg.fun/images/nowinandroidlayers.png" alt="主题订阅" title="主题订阅"></p><p>TODO<br>UDF 有助于实现以下几点：</p><ul><li>数据一致性。界面只有一个可信来源。</li><li>可测试性。状态来源是独立的，因此可独立于界面进行测试。</li><li>可维护性。状态的更改遵循明确定义的模式，即状态更改是用户事件及其数据拉取来源共同作用的结果。</li></ul><h2 id="模块化学习"><a href="#模块化学习" class="headerlink" title="模块化学习"></a>模块化学习</h2><ul><li>可扩展性，低耦合（屏蔽差异）</li><li>并行开发，尽量少代码冲突（统一套依赖版本管理体系）</li><li>责任链，谁开发谁负责</li><li>封装，代码隔离（便于使用、减少细节暴露）</li><li>构建速度，减少编译时间（模块化编译）</li><li>多种版本，根据需要进行业务模块集成打包</li><li>代码复用，减少重复开发</li></ul><p><img src="https://www.qomg.fun/images/modularization-graph.drawio.png" alt="模块关系图" title="模块关系图"></p><h2 id="模块化代码示例"><a href="#模块化代码示例" class="headerlink" title="模块化代码示例"></a>模块化代码示例</h2><ul><li>依赖注入，处理依赖关系</li><li>网络封装</li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>projectDependencyGraph</title>
      <link href="/2023/04/06/projectdependencygraph/"/>
      <url>/2023/04/06/projectdependencygraph/</url>
      
        <content type="html"><![CDATA[<p><a href="https://github.com/JakeWharton/SdkSearch/raw/master/gradle/projectDependencyGraph.gradle">projectDependencyGraph.gradle</a></p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><code class="hljs groovy">task projectDependencyGraph &#123;<br>  doLast &#123;<br>    <span class="hljs-keyword">def</span> dot = <span class="hljs-keyword">new</span> File(rootProject.buildDir, <span class="hljs-string">&#x27;reports/dependency-graph/project.dot&#x27;</span>)<br>    dot.parentFile.mkdirs()<br>    dot.delete()<br><br>    dot &lt;&lt; <span class="hljs-string">&#x27;digraph &#123;\n&#x27;</span><br>    dot &lt;&lt; <span class="hljs-string">&quot;  graph [label=\&quot;$&#123;rootProject.name&#125;\\n \&quot;,labelloc=t,fontsize=30,ranksep=1.4];\n&quot;</span><br>    dot &lt;&lt; <span class="hljs-string">&#x27;  node [style=filled, fillcolor=&quot;#bbbbbb&quot;];\n&#x27;</span><br>    dot &lt;&lt; <span class="hljs-string">&#x27;  rankdir=TB;\n&#x27;</span><br><br>    <span class="hljs-keyword">def</span> rootProjects = []<br>    <span class="hljs-keyword">def</span> queue = [rootProject]<br>    <span class="hljs-keyword">while</span> (!queue.isEmpty()) &#123;<br>      <span class="hljs-keyword">def</span> project = queue.remove(<span class="hljs-number">0</span>)<br>      rootProjects.add(project)<br>      queue.addAll(project.childProjects.values())<br>    &#125;<br><br>    <span class="hljs-keyword">def</span> projects = <span class="hljs-keyword">new</span> LinkedHashSet&lt;Project&gt;()<br>    <span class="hljs-keyword">def</span> dependencies = <span class="hljs-keyword">new</span> LinkedHashMap&lt;Tuple2&lt;Project, Project&gt;, List&lt;String&gt;&gt;()<br>    <span class="hljs-keyword">def</span> multiplatformProjects = []<br>    <span class="hljs-keyword">def</span> jsProjects = []<br>    <span class="hljs-keyword">def</span> androidProjects = []<br>    <span class="hljs-keyword">def</span> javaProjects = []<br><br>    queue = [rootProject]<br>    <span class="hljs-keyword">while</span> (!queue.isEmpty()) &#123;<br>      <span class="hljs-keyword">def</span> project = queue.remove(<span class="hljs-number">0</span>)<br>      queue.addAll(project.childProjects.values())<br><br>      <span class="hljs-keyword">if</span> (project.plugins.hasPlugin(<span class="hljs-string">&#x27;org.jetbrains.kotlin.multiplatform&#x27;</span>)) &#123;<br>        multiplatformProjects.add(project)<br>      &#125;<br>      <span class="hljs-keyword">if</span> (project.plugins.hasPlugin(<span class="hljs-string">&#x27;org.jetbrains.kotlin.js&#x27;</span>)) &#123;<br>        jsProjects.add(project)<br>      &#125;<br>      <span class="hljs-keyword">if</span> (project.plugins.hasPlugin(<span class="hljs-string">&#x27;com.android.library&#x27;</span>) || project.plugins.hasPlugin(<span class="hljs-string">&#x27;com.android.application&#x27;</span>)) &#123;<br>        androidProjects.add(project)<br>      &#125;<br>      <span class="hljs-keyword">if</span> (project.plugins.hasPlugin(<span class="hljs-string">&#x27;java-library&#x27;</span>) || project.plugins.hasPlugin(<span class="hljs-string">&#x27;java&#x27;</span>)) &#123;<br>        javaProjects.add(project)<br>      &#125;<br><br>      project.configurations.all &#123; config -&gt;<br>        config.dependencies<br>                .withType(ProjectDependency)<br>                .collect &#123; it.dependencyProject &#125;<br>                .each &#123; dependency -&gt;<br>          projects.add(project)<br>          projects.add(dependency)<br>          rootProjects.remove(dependency)<br><br>          <span class="hljs-keyword">def</span> graphKey = <span class="hljs-keyword">new</span> Tuple2&lt;Project, Project&gt;(project, dependency)<br>          <span class="hljs-keyword">def</span> traits = dependencies.computeIfAbsent(graphKey) &#123; <span class="hljs-keyword">new</span> ArrayList&lt;String&gt;() &#125;<br><br>          <span class="hljs-keyword">if</span> (config.name.toLowerCase().endsWith(<span class="hljs-string">&#x27;implementation&#x27;</span>)) &#123;<br>            traits.add(<span class="hljs-string">&#x27;style=dotted&#x27;</span>)<br>          &#125;<br>        &#125;<br>      &#125;<br>    &#125;<br><br>    projects = projects.sort &#123; it.path &#125;<br><br>    dot &lt;&lt; <span class="hljs-string">&#x27;\n  # Projects\n\n&#x27;</span><br>    <span class="hljs-keyword">for</span> (project <span class="hljs-keyword">in</span> projects) &#123;<br>      <span class="hljs-keyword">def</span> traits = []<br><br>      <span class="hljs-keyword">if</span> (rootProjects.contains(project)) &#123;<br>        traits.add(<span class="hljs-string">&#x27;shape=box&#x27;</span>)<br>      &#125;<br><br>      <span class="hljs-keyword">if</span> (multiplatformProjects.contains(project)) &#123;<br>        traits.add(<span class="hljs-string">&#x27;fillcolor=&quot;#ffd2b3&quot;&#x27;</span>)<br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (jsProjects.contains(project)) &#123;<br>        traits.add(<span class="hljs-string">&#x27;fillcolor=&quot;#ffffba&quot;&#x27;</span>)<br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (androidProjects.contains(project)) &#123;<br>        traits.add(<span class="hljs-string">&#x27;fillcolor=&quot;#baffc9&quot;&#x27;</span>)<br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (javaProjects.contains(project)) &#123;<br>        traits.add(<span class="hljs-string">&#x27;fillcolor=&quot;#ffb3ba&quot;&#x27;</span>)<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        traits.add(<span class="hljs-string">&#x27;fillcolor=&quot;#eeeeee&quot;&#x27;</span>)<br>      &#125;<br><br>      dot &lt;&lt; <span class="hljs-string">&quot;  \&quot;$&#123;project.path&#125;\&quot; [$&#123;traits.join(&quot;</span>, <span class="hljs-string">&quot;)&#125;];\n&quot;</span><br>    &#125;<br><br>    dot &lt;&lt; <span class="hljs-string">&#x27;\n  &#123;rank = same;&#x27;</span><br>    <span class="hljs-keyword">for</span> (project <span class="hljs-keyword">in</span> projects) &#123;<br>      <span class="hljs-keyword">if</span> (rootProjects.contains(project)) &#123;<br>        dot &lt;&lt; <span class="hljs-string">&quot; \&quot;$&#123;project.path&#125;\&quot;;&quot;</span><br>      &#125;<br>    &#125;<br>    dot &lt;&lt; <span class="hljs-string">&#x27;&#125;\n&#x27;</span><br><br>    dot &lt;&lt; <span class="hljs-string">&#x27;\n  # Dependencies\n\n&#x27;</span><br>    dependencies.forEach &#123; key, traits -&gt;<br>      dot &lt;&lt; <span class="hljs-string">&quot;  \&quot;$&#123;key.first.path&#125;\&quot; -&gt; \&quot;$&#123;key.second.path&#125;\&quot;&quot;</span><br>      <span class="hljs-keyword">if</span> (!traits.isEmpty()) &#123;<br>        dot &lt;&lt; <span class="hljs-string">&quot; [$&#123;traits.join(&quot;</span>, <span class="hljs-string">&quot;)&#125;]&quot;</span><br>      &#125;<br>      dot &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span><br>    &#125;<br><br>    dot &lt;&lt; <span class="hljs-string">&#x27;&#125;\n&#x27;</span><br><br>    <span class="hljs-keyword">def</span> p = <span class="hljs-string">&#x27;dot -Tpng -O project.dot&#x27;</span>.execute([], dot.parentFile)<br>    p.waitFor()<br>    <span class="hljs-keyword">if</span> (p.exitValue() != <span class="hljs-number">0</span>) &#123;<br>      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(p.errorStream.text)<br>    &#125;<br><br>    println(<span class="hljs-string">&quot;Project module dependency graph created at $&#123;dot.absolutePath&#125;.png&quot;</span>)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Flutter进阶学习</title>
      <link href="/2022/12/19/flutter-learning/"/>
      <url>/2022/12/19/flutter-learning/</url>
      
        <content type="html"><![CDATA[<h1 id="Flutter进阶学习"><a href="#Flutter进阶学习" class="headerlink" title="Flutter进阶学习"></a>Flutter进阶学习</h1><h2 id="1、创建flutter组件使用示例项目"><a href="#1、创建flutter组件使用示例项目" class="headerlink" title="1、创建flutter组件使用示例项目"></a>1、创建flutter组件使用示例项目</h2><p>学习 <a href="https://api.flutter.dev/">Flutter SDK</a></p><span id="more"></span><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">flutter create --list-samples=samples.json<br><span class="hljs-built_in">cat</span> samples.json<br></code></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>     <span class="hljs-attr">&quot;sourcePath&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;lib/src/widgets/basic.dart&quot;</span><span class="hljs-punctuation">,</span><br>     <span class="hljs-attr">&quot;sourceLine&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1596</span><span class="hljs-punctuation">,</span><br>     <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;material.FittedBox.1&quot;</span><span class="hljs-punctuation">,</span><br>     <span class="hljs-attr">&quot;channel&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;stable&quot;</span><span class="hljs-punctuation">,</span><br>     <span class="hljs-attr">&quot;serial&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1&quot;</span><span class="hljs-punctuation">,</span><br>     <span class="hljs-attr">&quot;package&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;flutter&quot;</span><span class="hljs-punctuation">,</span><br>     <span class="hljs-attr">&quot;library&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;material&quot;</span><span class="hljs-punctuation">,</span><br>     <span class="hljs-attr">&quot;element&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;FittedBox&quot;</span><span class="hljs-punctuation">,</span><br>     <span class="hljs-attr">&quot;file&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;material.FittedBox.1.dart&quot;</span><span class="hljs-punctuation">,</span><br>     <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;In this example, the image is stretched to fill the entire [Container], which would\nnot happen normally without using FittedBox.&quot;</span><br> <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br> ...<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># samples.json 中 id</span><br>flutter create -sample=material.FittedBox.1 sample_fittedbox<br>code sample_fittedbox<br>flutter pub get<br>flutter run<br></code></pre></td></tr></table></figure><h2 id="2、app示例源码"><a href="#2、app示例源码" class="headerlink" title="2、app示例源码"></a>2、app示例源码</h2><p><a href="https://flutter.github.io/samples/#">官方示例代码库</a></p><h2 id="3、好用的工具包"><a href="#3、好用的工具包" class="headerlink" title="3、好用的工具包"></a>3、好用的工具包</h2><ul><li><p>模块化开发 flutter_modular</p></li><li><p>权限 permission_handler</p></li><li><p>图库 image_picker</p></li><li><p>相册 image_gallery_saver</p></li><li><p>外链 url_launcher</p></li><li><p>存储 path</p></li><li><p>网络 dio</p></li><li><p>日志 logger_flutter</p></li><li><p>动画 lottie</p></li><li><p>日历 table_calendar｜syncfusion_flutter_calendar</p></li><li><p>唯一值 uuid</p></li><li><p>二维码 qr_flutter</p></li><li><p>本地化 easy_localization</p></li><li><p>对话框 awesome_dialog</p></li><li><p>列表头 flutter_sticky_header</p></li><li><p>图片加载 image</p></li><li><p>屏幕适配 flutter_screenutil</p></li><li><p>应用信息 package_info_plus</p></li><li><p>设备信息 device_info_plus</p></li><li><p>组件绘制 after_layout</p></li><li><p>日期选择 syncfusion_flutter_datepicker</p></li><li><p>手写签名 signature</p></li><li><p>多行文本 readmore</p></li><li><p>日期格式化 date_format</p></li><li><p>网络请求包</p><ul><li>rxdart</li><li>dio</li><li>retrofit</li><li>json_annotation</li><li>json_serializable</li></ul></li></ul><h2 id="4、dart包使用"><a href="#4、dart包使用" class="headerlink" title="4、dart包使用"></a>4、dart包使用</h2><ul><li>collection</li><li>convert</li></ul><h2 id="5、关键字使用"><a href="#5、关键字使用" class="headerlink" title="5、关键字使用"></a>5、关键字使用</h2><ul><li><p>extension on 扩展</p>  <figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs dart">http.<span class="hljs-keyword">get</span>().mapFromResponse&lt;A, B&gt;((json) =&gt; xxx);<br><br><span class="hljs-keyword">extension</span> <span class="hljs-keyword">on</span> Future&lt;http.Response&gt; &#123;<br>    Future&lt;R&gt; mapFromResponse&lt;R, T&gt;(R <span class="hljs-built_in">Function</span>(T) jsonParser) <span class="hljs-keyword">async</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-keyword">final</span> response = <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>;<br>            <span class="hljs-keyword">if</span> (response.statusCode == <span class="hljs-number">200</span>) &#123;<br>                <span class="hljs-keyword">return</span> jsonParser(jsonDecode(response.body));<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-keyword">throw</span> GenericHttpException();<br>            &#125;<br>        &#125; <span class="hljs-keyword">on</span> SocketException &#123;<br>            <span class="hljs-keyword">throw</span> NoConnectionException();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> flutter </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Flutter UME tutorial</title>
      <link href="/2021/11/14/Flutter-UME-tutorial/"/>
      <url>/2021/11/14/Flutter-UME-tutorial/</url>
      
        <content type="html"><![CDATA[<h1 id="Flutter应用内调试工具UME上手"><a href="#Flutter应用内调试工具UME上手" class="headerlink" title="Flutter应用内调试工具UME上手"></a>Flutter应用内调试工具UME上手</h1><p><img src="/images/ume-banner.png"></p><span id="more"></span><h2 id="组件地址"><a href="#组件地址" class="headerlink" title="组件地址"></a>组件地址</h2><p>Pub 地址：</p><p><a href="https://pub.dev/packages/flutter_ume">https://pub.dev/packages/flutter_ume</a><br><a href="https://pub.flutter-io.cn/packages/flutter_ume">https://pub.flutter-io.cn/packages/flutter_ume</a></p><p>GitHub 地址：</p><p><a href="https://github.com/bytedance/flutter_ume">https://github.com/bytedance/flutter_ume</a></p><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>UME (读音：油米~) 是一个 Flutter 调试工具包，内部集成了丰富的调试小工具，设计UI、网络、监控、性能、logger 等，无论是研发、PM、还是 QA 均能使用。</p><ul><li><p>方便PM 、设计、 QA在验收过程中，查看页面内容尺寸、颜色、对齐，反馈时提供设备信息、日志等。</p></li><li><p>方便开发者调试时查看组件信息、组件渲染树、快速CodeReview、性能表现、查看内存、CPU信息等。</p></li></ul><img src="/images/ume-panel.png" alt="功能截图" style="zoom:50%;" /><h2 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h2><h3 id="WidgetInfo"><a href="#WidgetInfo" class="headerlink" title="WidgetInfo"></a>WidgetInfo</h3><p>查看当前选中 widget 的名称、尺寸、源码路径及所在行</p><img src="/images/ume-widget-info.png" alt="ume-widget-info" style="zoom:50%;" /><h3 id="WidgetDetail"><a href="#WidgetDetail" class="headerlink" title="WidgetDetail"></a>WidgetDetail</h3><p>查看当前选中 widget 的树层级，以及它 renderObject 的详细 build 链</p><img src="/images/ume-widget-detail-chain.png" alt="ume-widget-detail-chain" style="zoom:50%;" /><img src="/images/ume-widget-detail-desc.png" alt="ume-widget-detail-desc" style="zoom:50%;" /><h3 id="ColorSucker"><a href="#ColorSucker" class="headerlink" title="ColorSucker"></a>ColorSucker</h3><p>查看到当前页面任何像素的颜色，方便调试 UI。</p><img src="/images/ume-color-sucker.png" alt="ume-color-sucker" style="zoom:50%;" /><h3 id="AlignRuler"><a href="#AlignRuler" class="headerlink" title="AlignRuler"></a>AlignRuler</h3><p>测量当前 widget 所在屏幕的一个坐标位置，开启吸附开关后可以自动吸附最近 widget。</p><img src="/images/ume-align-ruler.png" alt="ume-align-ruler" style="zoom:50%;" /><h3 id="PerfOverlay"><a href="#PerfOverlay" class="headerlink" title="PerfOverlay"></a>PerfOverlay</h3><p>性能图层，raster 线程的性能情况在上面，UI 线程显示在下面。垂直的绿色条条代表的是当前帧。</p><blockquote><p>更多内容请参考 <a href="https://flutter.cn/docs/perf/rendering/ui-performance">Flutter官方-性能分析</a></p></blockquote><img src="/images/ume-perf-overlay.png" alt="ume-perf-overlay" style="zoom:50%;" /><h3 id="ShowCode"><a href="#ShowCode" class="headerlink" title="ShowCode"></a>ShowCode</h3><p>查看到当前页面的页面代码。</p><img src="/images/ume-show-code.png" alt="ume-show-code" style="zoom:50%;" /><h3 id="MemoryInfo"><a href="#MemoryInfo" class="headerlink" title="MemoryInfo"></a>MemoryInfo</h3><p>查看当前Dart VM 对象所占用情况。</p><img src="/images/ume-memory-info.png" alt="ume-memory-info" style="zoom:50%;" /><h3 id="CPUInfo"><a href="#CPUInfo" class="headerlink" title="CPUInfo"></a>CPUInfo</h3><p>查看当前Dart VM 对象所占用情况。</p><img src="/images/ume-cpu-info.png" alt="ume-cpu-info" style="zoom:50%;" /><h3 id="DeviceInfo"><a href="#DeviceInfo" class="headerlink" title="DeviceInfo"></a>DeviceInfo</h3><p>查看当前设备具体信息，名称、系统版本、是否真实设备、内核版本。</p><img src="/images/ume-device-info.png" alt="ume-device-info" style="zoom:50%;" /><h3 id="Console"><a href="#Console" class="headerlink" title="Console"></a>Console</h3><p>展示使用 <code>debugPrint</code> 函数打印的日志。</p><img src="/images/ume-console.png" alt="ume-console" style="zoom:50%;" /><h3 id="DioInspector"><a href="#DioInspector" class="headerlink" title="DioInspector"></a>DioInspector</h3><p>查看 <code>dio</code> 网络请求的日志。</p><img src="/images/ume-dio-inspector.png" alt="ume-dio-inspector" style="zoom:50%;" /><h3 id="自研组件"><a href="#自研组件" class="headerlink" title="自研组件"></a><a href="../custom-plugin">自研组件</a></h3><img src="/images/ume-analysis.png" alt="ume-analysis" style="zoom:50%;" /><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><blockquote><p>TODO</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> flutter </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ume </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>flutter ume custom plugin</title>
      <link href="/2021/11/14/custom-plugin/"/>
      <url>/2021/11/14/custom-plugin/</url>
      
        <content type="html"><![CDATA[<h2 id="flutter-ume-自定义插件"><a href="#flutter-ume-自定义插件" class="headerlink" title="flutter ume 自定义插件"></a>flutter ume 自定义插件</h2><ol><li><p><code>flutter create -t package flutter_ume_kit_analysis</code> 创建一个插件包</p></li><li><p>修改插件包的 <code>pubspec.yaml</code>，添加依赖</p> <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">dependencies:</span><br>  <span class="hljs-attr">flutter_ume:</span> <span class="hljs-string">&#x27;&gt;=0.2.0 &lt;0.3.0&#x27;</span><br></code></pre></td></tr></table></figure></li></ol><span id="more"></span><ol start="3"><li><p>创建插件配置，实现 <code>Pluggable</code> 虚类</p> <figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter_ume/flutter_ume.dart&#x27;</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Analysis</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Pluggable</span> </span>&#123;<br>    Analysis(&#123;Key? key&#125;);<br><br>    <span class="hljs-meta">@override</span><br>    Widget buildWidget(BuildContext? context) &#123;<br>        <span class="hljs-keyword">return</span> Container(<br>            color: Colors.white,<br>            width: <span class="hljs-number">100</span>,<br>            height: <span class="hljs-number">100</span>,<br>            child: <span class="hljs-keyword">const</span> Center(child: Text(<span class="hljs-string">&#x27;TODO&#x27;</span>)),<br>        );<br>    &#125; <span class="hljs-comment">// 返回插件面板</span><br><br>    <span class="hljs-meta">@override</span><br>    <span class="hljs-built_in">String</span> <span class="hljs-keyword">get</span> name =&gt; <span class="hljs-string">&#x27;Analysis&#x27;</span>; <span class="hljs-comment">// 插件名称</span><br><br>    <span class="hljs-meta">@override</span><br>    <span class="hljs-built_in">String</span> <span class="hljs-keyword">get</span> displayName =&gt; <span class="hljs-string">&#x27;Analysis&#x27;</span>;<br><br>    <span class="hljs-meta">@override</span><br>    <span class="hljs-keyword">void</span> onTrigger() &#123;&#125; <span class="hljs-comment">// 点击插件面板图标时调用</span><br><br>    <span class="hljs-meta">@override</span><br>    ImageProvider&lt;<span class="hljs-built_in">Object</span>&gt; <span class="hljs-keyword">get</span> iconImageProvider =&gt;<br>        MemoryImage(base64Decode(iconData)); <span class="hljs-comment">// 插件图标</span><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>在工程中引入自定义插件</p><ol><li><p>修改 <code>pubspec.yaml</code>，添加依赖</p> <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">dev_dependencies:</span><br>  <span class="hljs-attr">flutter_ume_kit_analysis:</span><br>    <span class="hljs-attr">path:</span> <span class="hljs-string">path/to/flutter_ume_kit_analysis</span><br></code></pre></td></tr></table></figure></li><li><p>执行 <code>flutter pub get</code></p></li><li><p>引入包</p> <figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter_ume_kit_analysis/flutter_ume_kit_analysis.dart&#x27;</span>;<br></code></pre></td></tr></table></figure></li></ol></li><li><p>在工程中注册插件</p> <figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">if</span> (kDebugMode) &#123;<br>  PluginManager.instance<br>    ..register(Analysis());<br>  runApp(injectUMEWidget(child: MyApp(), enable: <span class="hljs-keyword">true</span>));<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>  runApp(MyApp());<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>运行代码</p></li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>android tools namespace</title>
      <link href="/2021/11/10/android-tools-namespace/"/>
      <url>/2021/11/10/android-tools-namespace/</url>
      
        <content type="html"><![CDATA[<h1 id="Tools命名空间属性说明"><a href="#Tools命名空间属性说明" class="headerlink" title="Tools命名空间属性说明"></a>Tools命名空间属性说明</h1><p><a href="https://developer.android.google.cn/studio/write/tool-attributes?hl=zh-cn">官方讲解</a></p><h2 id="tools-node"><a href="#tools-node" class="headerlink" title="tools:node"></a>tools:node</h2><p>tools:node&#x3D;”merge” 全部合并<br>tools:node&#x3D;”merge-only-attributes” 仅合并属性，内部节点移除<br>tools:node&#x3D;”remove” 移除该节点<br>tools:node&#x3D;”removeAll” 移除同一个父节点下所有同类型节点<br>tools:node&#x3D;”replace” 完全替换<br>tools:node&#x3D;”strict” 不匹配，构建失败</p><span id="more"></span><h2 id="tools-remove"><a href="#tools-remove" class="headerlink" title="tools:remove"></a>tools:remove</h2><p>tools:remove&#x3D;”attr1,attr2” 比如 tools:remove&#x3D;”android:theme,android:windowSoftInputMode”</p><h2 id="tools-strict"><a href="#tools-strict" class="headerlink" title="tools:strict"></a>tools:strict</h2><p>tools:strict&#x3D;”attr1,attr2” 比如 tools:strict&#x3D;”android:screenOrientation”</p><h2 id="tools-selector"><a href="#tools-selector" class="headerlink" title="tools:selector"></a>tools:selector</h2><p>tools:selector&#x3D;”packageName” 选择器，结合其他tools标记使用，比如</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">permission</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">&quot;com.example.MY_PERMISSION_0&quot;</span> </span><br><span class="hljs-tag">                      <span class="hljs-attr">tools:node</span>=<span class="hljs-string">&quot;remove&quot;</span> </span><br><span class="hljs-tag">                      <span class="hljs-attr">tools:selector</span>=<span class="hljs-string">&quot;com.example.submodule.p1&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure><h2 id="tools-overrideLibrary"><a href="#tools-overrideLibrary" class="headerlink" title="tools:overrideLibrary"></a>tools:overrideLibrary</h2><p>tools:overrideLibrary 覆盖 </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">uses-sdk</span> <span class="hljs-attr">tools:overrideLibrary</span>=<span class="hljs-string">&quot;com.example.lib1, com.example.lib2&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure><h2 id="tools-ignore"><a href="#tools-ignore" class="headerlink" title="tools:ignore"></a>tools:ignore</h2><p>tools:ignore&#x3D;”attr1,attr2” 忽略属性</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;show_all_apps&quot;</span> <span class="hljs-attr">tools:ignore</span>=<span class="hljs-string">&quot;MissingTranslation&quot;</span>&gt;</span>All<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">ImageView</span> <span class="hljs-attr">tools:ignore</span>=<span class="hljs-string">&quot;contentDescription&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">FrameLayout</span> <span class="hljs-attr">tools:ignore</span>=<span class="hljs-string">&quot;all&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">FrameLayout</span> <span class="hljs-attr">tools:ignore</span>=<span class="hljs-string">&quot;UnusedResources,NewApi,StringFormatInvalid&quot;</span> /&gt;</span> 根节点添加，如果该xml资源未使用不提示<br></code></pre></td></tr></table></figure><h2 id="tools-targetApi"><a href="#tools-targetApi" class="headerlink" title="tools:targetApi"></a>tools:targetApi</h2><p>tools:targetApi&#x3D;”14” tools:targetApi&#x3D;”ice_cream_sandwich” 目标平台版本</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">GridLayout</span> <span class="hljs-attr">tools:targetApi</span>=<span class="hljs-string">&quot;ice_cream_sandwich&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure><h2 id="tools-locale"><a href="#tools-locale" class="headerlink" title="tools:locale"></a>tools:locale</h2><p>tools:locale 指定时区，只能加给resources节点</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">resources</span> <span class="hljs-attr">xmlns:tools</span>=<span class="hljs-string">&quot;http://schemas.android.com/tools&quot;</span> <span class="hljs-attr">tools:locale</span>=<span class="hljs-string">&quot;zh&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="tools-shrinkMode"><a href="#tools-shrinkMode" class="headerlink" title="tools:shrinkMode"></a>tools:shrinkMode</h2><p>tools:shrinkMode 指定资源压缩模式，只能加给resources节点，需要build.gradle中android.buildTypes.release.shrinkResources &#x3D; true<br>tools:shrinkMode&#x3D;”safe”默认<br>tools:shrinkMode&#x3D;”strict”<br><code>res/raw/keep.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">resources</span> <span class="hljs-attr">xmlns:tools</span>=<span class="hljs-string">&quot;http://schemas.android.com/tools&quot;</span> <span class="hljs-attr">tools:shrinkMode</span>=<span class="hljs-string">&quot;strict&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="tools-keep-tools-discard"><a href="#tools-keep-tools-discard" class="headerlink" title="tools:keep &amp; tools:discard"></a>tools:keep &amp; tools:discard</h2><p>以下两个结合tools:shrinkMode&#x3D;”strict”使用<br>tools:keep&#x3D;”references” 保留 tools:keep&#x3D;”@layout&#x2F;list_item_*,@menu&#x2F;main_menus”<br>tools:discard&#x3D;”references”  移除 tools:discard&#x3D;”@layout&#x2F;unused*”</p><h2 id="tools-parentTag"><a href="#tools-parentTag" class="headerlink" title="tools:parentTag"></a>tools:parentTag</h2><p>tools:parentTag 父标签类型，结合merge使用</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">merge</span> <span class="hljs-attr">xmlns:tools</span>=<span class="hljs-string">&quot;http://schemas.android.com/tools&quot;</span></span><br><span class="hljs-tag">              <span class="hljs-attr">tools:parentTag</span>=<span class="hljs-string">&quot;android.widget.LinearLayout&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure><h2 id="tools-context"><a href="#tools-context" class="headerlink" title="tools:context"></a>tools:context</h2><p>tools:context&#x3D;”com.example.XXXActivity” 指定当前关联上下文，只能在根节点添加</p><h2 id="list"><a href="#list" class="headerlink" title="list"></a>list</h2><p>tools:itemCount&#x3D;”20”<br>tools:listheader&#x3D;”@layout&#x2F;list_header_0” 指定表头，仅AdapterView有效<br>tools:listitem&#x3D;”@layout&#x2F;list_item_0”<br>tools:listfooter&#x3D;”@layout&#x2F;list_footer_0” 指定表尾，仅AdapterView有效</p><h2 id="tools-layout"><a href="#tools-layout" class="headerlink" title="tools:layout"></a>tools:layout</h2><p>tools:layout&#x3D;”@layout&#x2F;some_layout”</p><h2 id="tools-showIn"><a href="#tools-showIn" class="headerlink" title="tools:showIn"></a>tools:showIn</h2><p>tools:showIn&#x3D;”@layout&#x2F;some_parent_layout” 在哪个布局中展示，通过include引入的布局的根节点添加</p><h2 id="tools-menu"><a href="#tools-menu" class="headerlink" title="tools:menu"></a>tools:menu</h2><p>tools:menu&#x3D;”menu1,menu2” 指定工具栏菜单，根节点添加</p><h2 id="tools-actionBarNavMode"><a href="#tools-actionBarNavMode" class="headerlink" title="tools:actionBarNavMode"></a>tools:actionBarNavMode</h2><p>ActionBar显示模式<br>tools:actionBarNavMode&#x3D;”standard”<br>tools:actionBarNavMode&#x3D;”tabs”<br>tools:actionBarNavMode&#x3D;”list”</p><h2 id="NumberPicker"><a href="#NumberPicker" class="headerlink" title="NumberPicker"></a>NumberPicker</h2><p>NumberPicker的最大最小值<br>tools:minValue<br>tools:maxValue</p><h2 id="DrawerLayout"><a href="#DrawerLayout" class="headerlink" title="DrawerLayout"></a>DrawerLayout</h2><p>tools:openDrawer&#x3D;”start”<br>tools:openDrawer&#x3D;”end”<br>tools:openDrawer&#x3D;”left”<br>tools:openDrawer&#x3D;”right”<br>&lt;androidx.drawerlayout.DrawerLayout tools:openDrawer&#x3D;”end”&#x2F;&gt;</p><h2 id="TextView"><a href="#TextView" class="headerlink" title="TextView"></a>TextView</h2><p>tools:text<br>@tools:sample&#x2F;*<br><TextView tools:text="@tools:sample/lorem"/></p><h2 id="tools-sample"><a href="#tools-sample" class="headerlink" title="@tools:sample"></a>@tools:sample</h2><p>@tools:sample&#x2F;full_names<br>@tools:sample&#x2F;first_names<br>@tools:sample&#x2F;last_names<br>@tools:sample&#x2F;cities<br>@tools:sample&#x2F;us_zipcodes<br>@tools:sample&#x2F;us_phones<br>@tools:sample&#x2F;lorem&#x2F;random<br>@tools:sample&#x2F;date&#x2F;day_of_week<br>@tools:sample&#x2F;date&#x2F;ddmmyy<br>@tools:sample&#x2F;date&#x2F;mmddyy<br>@tools:sample&#x2F;date&#x2F;hhmm<br>@tools:sample&#x2F;date&#x2F;hhmmss<br>@tools:sample&#x2F;avatars – drawables<br>@tools:sample&#x2F;backgrounds&#x2F;scenic – backgrounds</p><h2 id="sampledata"><a href="#sampledata" class="headerlink" title="sampledata"></a>sampledata</h2><p>app&#x2F;sampledata&#x2F;names<br><TextView tools:text="@sample/names"/></p><h2 id="ImageView"><a href="#ImageView" class="headerlink" title="ImageView"></a>ImageView</h2><p>tools:src<br>app&#x2F;sampledata&#x2F;avatars<br>app&#x2F;sampledata&#x2F;avatars&#x2F;avatar_1.xml<br>app&#x2F;sampledata&#x2F;avatars&#x2F;avatar_2.xml<br>app&#x2F;sampledata&#x2F;avatars&#x2F;avatar_3.xml<br>app&#x2F;sampledata&#x2F;avatars&#x2F;avatar_4.xml<br><ImageView tools:src="@sample/avatars"/></p><p><code>app/sampledata/users.json</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;city&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Hemel Hempstead, Hertfordshire, UK&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;avatar&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;@sample/avatars&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;city&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Brokenwind, Aberdeenshire, UK&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;avatar&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;@sample/avatars&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;city&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Málaga, España&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;avatar&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;@sample/avatars&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;city&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Batchelors Bump, Essex, UK&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;avatar&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;@sample/avatars&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">TextView</span> <span class="hljs-attr">tools:text</span>=<span class="hljs-string">&quot;@sample/users.json/data/city&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">ImageView</span> <span class="hljs-attr">tools:text</span>=<span class="hljs-string">&quot;@sample/users.json/data/avatar&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tools:ns </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android Annotation</title>
      <link href="/2021/11/10/Android-Annotation/"/>
      <url>/2021/11/10/Android-Annotation/</url>
      
        <content type="html"><![CDATA[<p>Android注解收集</p><p><a href="https://developer.android.google.cn/studio/write/annotations?hl=zh-cn">官方说明</a></p><p>@Nullable<br>@NonNull</p><span id="more"></span><p>@StringRes<br>@IdRes<br>@DrawableRes<br>@ColorRes<br>@DimenRes<br>@InterpolatorRes<br>@LayoutRes<br>@AnyRes</p><p>@ColorInt</p><p>@StringDef<br>@IntDef</p><p>@MainThread<br>@UiThread<br>@WorkerThread<br>@BinderThread<br>@AnyThread</p><p>@IntRange<br>@FloatRange<br>@Size</p><p>@TargeApi<br>@RequiresPermission<br>@RequiresPermission.Read<br>@RequiresPermission.Write</p><p>@Throws</p><p>@SdkConstant</p><p>@CheckResult<br>@CallSuper</p><p>@Keep</p><p>@VisibleForTesting</p><p>@RestrictTo</p><p>示例</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">import</span> android.support.<span class="hljs-keyword">annotation</span>.IntDef<br><span class="hljs-comment">//...</span><br><span class="hljs-comment">// Define the list of accepted constants and declare the NavigationMode annotation</span><br><span class="hljs-meta">@Retention(AnnotationRetention.SOURCE)</span><br><span class="hljs-meta">@IntDef(NAVIGATION_MODE_STANDARD, NAVIGATION_MODE_LIST, NAVIGATION_MODE_TABS)</span><br><span class="hljs-keyword">annotation</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NavigationMode</span><br><br><span class="hljs-comment">// Declare the constants</span><br><span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> NAVIGATION_MODE_STANDARD = <span class="hljs-number">0</span><br><span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> NAVIGATION_MODE_LIST = <span class="hljs-number">1</span><br><span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> NAVIGATION_MODE_TABS = <span class="hljs-number">2</span><br><br><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ActionBar</span> &#123;<br><br>    <span class="hljs-comment">// Decorate the target methods with the annotation</span><br>    <span class="hljs-comment">// Attach the annotation</span><br>    <span class="hljs-meta">@get:NavigationMode</span><br>    <span class="hljs-meta">@setparam:NavigationMode</span><br>    <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">var</span> navigationMode: <span class="hljs-built_in">Int</span><br><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-meta">@SdkConstant(SdkConstantType.ACTIVITY_INTENT_ACTION)</span><br><span class="hljs-meta">@RequiresPermission(Manifest.permission.CALL_PHONE)</span><br><span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> ACTION_CALL = <span class="hljs-string">&quot;android.intent.action.CALL&quot;</span><br></code></pre></td></tr></table></figure><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-meta">@CheckResult(suggest = <span class="hljs-string">&quot;#enforcePermission(String,int,int,String)&quot;</span>)</span><br><span class="hljs-keyword">abstract</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">checkPermission</span><span class="hljs-params">(permission: <span class="hljs-type">String</span>, pid: <span class="hljs-type">Int</span>, uid: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Int</span><br></code></pre></td></tr></table></figure><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-comment">// 对public方法或属性进行注解，限制访问</span><br><span class="hljs-meta">@RestrictTo(RestrictTo.Scope.SUBCLASSES)</span><br><span class="hljs-meta">@RestrictTo(RestrictTo.Scope.GROUP_ID)</span><br><span class="hljs-meta">@RestrictTo(RestrictTo.Scope.TESTS)</span><br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Annotation </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ml-kit</title>
      <link href="/2021/11/10/ml-kit/"/>
      <url>/2021/11/10/ml-kit/</url>
      
        <content type="html"><![CDATA[<h2 id="添加依赖"><a href="#添加依赖" class="headerlink" title="添加依赖"></a>添加依赖</h2><p>rootDir&#x2F;build.gradle</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">allprojects</span> &#123;<br>    <span class="hljs-keyword">repositories</span> &#123;<br>        ...<br>        google &#123; url <span class="hljs-string">&#x27;https://maven.aliyun.com/repository/google&#x27;</span> &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><span id="more"></span><p>module&#x2F;build.gradle </p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">dependencies</span> &#123;<br>    <span class="hljs-comment">// Barcode model</span><br>    api <span class="hljs-string">&#x27;com.google.mlkit:barcode-scanning:17.0.0&#x27;</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="扫码工具类"><a href="#扫码工具类" class="headerlink" title="扫码工具类"></a>扫码工具类</h2><p>BarcodeScannerProcessor.kt</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">import</span> android.graphics.Bitmap<br><span class="hljs-keyword">import</span> android.util.Log<br><span class="hljs-keyword">import</span> com.google.mlkit.vision.barcode.Barcode<br><span class="hljs-keyword">import</span> com.google.mlkit.vision.barcode.BarcodeScanner<br><span class="hljs-keyword">import</span> com.google.mlkit.vision.barcode.BarcodeScanning<br><span class="hljs-keyword">import</span> com.google.mlkit.vision.common.InputImage<br><span class="hljs-keyword">import</span> java.util.concurrent.Executors<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">BarcodeScannerProcessor</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> barcodeScanner: BarcodeScanner = BarcodeScanning.getClient()<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> executor = Executors.newSingleThreadExecutor()<br><br>    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">stop</span><span class="hljs-params">()</span></span> &#123;<br>        barcodeScanner.close()<br>        executor.shutdown()<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">processBitmap</span><span class="hljs-params">(bitmap: <span class="hljs-type">Bitmap</span>, onNext: (<span class="hljs-type">barcode</span>: <span class="hljs-type">Barcode</span>?) -&gt; <span class="hljs-type">Unit</span>)</span></span> &#123;<br>        <span class="hljs-keyword">val</span> image = InputImage.fromBitmap(bitmap, <span class="hljs-number">0</span>)<br>        barcodeScanner.process(image).continueWith(executor) &#123;<br>            <span class="hljs-keyword">val</span> barcodes = it.result<br>            <span class="hljs-keyword">if</span> (barcodes.isEmpty()) &#123;<br>                Log.v(<span class="hljs-string">&quot;BarcodeScanner&quot;</span>, <span class="hljs-string">&quot;No barcode has been detected&quot;</span>)<br>            &#125;<br>            onNext(barcodes.firstOrNull())<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">BarcodeScannerProcessor</span> <span class="hljs-variable">processor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BarcodeScannerProcessor</span>();<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">decodeByMlkit</span><span class="hljs-params">(Bitmap bitmap)</span> &#123;<br>processor.processBitmap(bitmap, (barcode) -&gt; &#123;<br>    <span class="hljs-keyword">if</span> (barcode != <span class="hljs-literal">null</span>) &#123;<br>    <span class="hljs-comment">// String text = barcode.getRawValue()</span><br>    <span class="hljs-comment">// byte[] bytes = barcode.getRawBytes()</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;);<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onScanDone</span><span class="hljs-params">()</span> &#123;<br>processor.stop();<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><p>TODO 待补充</p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mlkit </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gitlab - use emoji in commit message</title>
      <link href="/2021/11/10/gitlab-emoji/"/>
      <url>/2021/11/10/gitlab-emoji/</url>
      
        <content type="html"><![CDATA[<h2 id="commit-message-格式如下"><a href="#commit-message-格式如下" class="headerlink" title="commit message 格式如下"></a>commit message 格式如下</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">:emoji: 主题<br><br>提交信息主体<br><br>Ref &lt;###&gt;<br></code></pre></td></tr></table></figure><span id="more"></span><h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><p>初次提交</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git commit -m <span class="hljs-string">&quot;:tada: Initialize Repo&quot;</span><br></code></pre></td></tr></table></figure><h2 id="emoji说明"><a href="#emoji说明" class="headerlink" title="emoji说明"></a>emoji说明</h2><table><thead><tr><th>emoji</th><th>emoji 代码</th><th>commit 说明</th></tr></thead><tbody><tr><td>:art: (调色板)</td><td>:art:</td><td>改进代码结构&#x2F;代码格式</td></tr><tr><td>:fire: (火焰)</td><td>:fire:</td><td>移除代码或文件</td></tr><tr><td>:bug: (bug)</td><td>:bug:</td><td>修复 bug</td></tr><tr><td>:ambulance: (急救车)</td><td>:ambulance:</td><td>重要补丁</td></tr><tr><td>:sparkles: (火花)</td><td>:sparkles:</td><td>引入新功能</td></tr><tr><td>:memo: (备忘录)</td><td>:memo:</td><td>撰写文档</td></tr><tr><td>:rocket: (火箭)</td><td>:rocket:</td><td>部署功能</td></tr><tr><td>:lipstick: (口红)</td><td>:lipstick:</td><td>更新 UI 和样式文件</td></tr><tr><td>:tada: (庆祝)</td><td>:tada:</td><td>初次提交</td></tr><tr><td>:white_check_mark: (白色复选框)</td><td>:white_check_mark:</td><td>增加测试</td></tr><tr><td>:lock: (锁)</td><td>:lock:</td><td>修复安全问题</td></tr><tr><td>:apple: (苹果)</td><td>:apple:</td><td>修复 macOS 下的问题</td></tr><tr><td>:penguin: (企鹅)</td><td>:penguin:</td><td>修复 Linux 下的问题</td></tr><tr><td>:checkered_flag: (旗帜)</td><td>:checked_flag:</td><td>修复 Windows 下的问题</td></tr><tr><td>:bookmark: (书签)</td><td>:bookmark:</td><td>发行&#x2F;版本标签</td></tr><tr><td>:rotating_light: (警车灯)</td><td>:rotating_light:</td><td>移除 linter 警告</td></tr><tr><td>:construction: (施工)</td><td>:construction:</td><td>工作进行中</td></tr><tr><td>:green_heart: (绿心)</td><td>:green_heart:</td><td>修复 CI 构建问题</td></tr><tr><td>:arrow_down: (下降箭头)</td><td>:arrow_down:</td><td>降级依赖</td></tr><tr><td>:arrow_up: (上升箭头)</td><td>:arrow_up:</td><td>升级依赖</td></tr><tr><td>:construction_worker: (工人)</td><td>:construction_worker:</td><td>添加 CI 构建系统</td></tr><tr><td>:chart_with_upwards_trend: (上升趋势图)</td><td>:chart_with_upwards_trend:</td><td>添加分析或跟踪代码</td></tr><tr><td>:hammer: (锤子)</td><td>:hammer:</td><td>重大重构</td></tr><tr><td>:heavy_minus_sign: (减号)</td><td>:heavy_minus_sign:</td><td>减少一个依赖</td></tr><tr><td>:whale: (鲸鱼)</td><td>:whale:</td><td>Docker 相关工作</td></tr><tr><td>:heavy_plus_sign: (加号)</td><td>:heavy_plug_sign:</td><td>增加一个依赖</td></tr><tr><td>:wrench: (扳手)</td><td>:wrench:</td><td>修改配置文件</td></tr><tr><td>:globe_with_meridians: (地球)</td><td>:globe_with_meridians:</td><td>国际化与本地化</td></tr><tr><td>:pencil2: (铅笔)</td><td>:pencil2:</td><td>修复 typo</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> gitlab </category>
          
      </categories>
      
      
        <tags>
            
            <tag> emoji </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SQL Server UUID</title>
      <link href="/2020/12/30/SQLServerUUID/"/>
      <url>/2020/12/30/SQLServerUUID/</url>
      
        <content type="html"><![CDATA[<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">function</span> [dbo].uuid(<span class="hljs-variable">@id</span> <span class="hljs-type">varchar</span>(<span class="hljs-number">36</span>))<br><span class="hljs-keyword">returns</span> <span class="hljs-type">varchar</span>(<span class="hljs-number">48</span>)<br><span class="hljs-keyword">as</span><br><span class="hljs-keyword">begin</span><br> <span class="hljs-keyword">declare</span> <span class="hljs-variable">@ret</span> <span class="hljs-type">varchar</span>(<span class="hljs-number">48</span>)<br> <span class="hljs-keyword">select</span> <span class="hljs-variable">@ret</span><span class="hljs-operator">=</span>format(getdate(),<span class="hljs-string">&#x27;yyyyMMddHHmmss&#x27;</span>)<span class="hljs-operator">+</span><span class="hljs-built_in">lower</span>(replace(<span class="hljs-variable">@id</span>,<span class="hljs-string">&#x27;-&#x27;</span>,<span class="hljs-string">&#x27;&#x27;</span>))<br> <span class="hljs-keyword">return</span> <span class="hljs-variable">@ret</span><br><span class="hljs-keyword">end</span><br><br><span class="hljs-keyword">select</span> dbo.uuid(NEWID())<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> SQL Server </category>
          
      </categories>
      
      
        <tags>
            
            <tag> UUID </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker run MSSQL Server Linux</title>
      <link href="/2018/11/14/docker-run-mssql-server-linux/"/>
      <url>/2018/11/14/docker-run-mssql-server-linux/</url>
      
        <content type="html"><![CDATA[<h2 id="拉取镜像"><a href="#拉取镜像" class="headerlink" title="拉取镜像"></a>拉取镜像</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker pull microsoft/mssql-server-linux<br></code></pre></td></tr></table></figure><span id="more"></span><h2 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h2><p><strong>dont modify below string &lt;YourStrong!PasswOrd&gt;</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker run -e <span class="hljs-string">&#x27;ACCEPT_EULA=Y&#x27;</span> -e <span class="hljs-string">&#x27;SA_PASSWORD=&lt;YourStrong!PasswOrd&gt;&#x27;</span> \<br>-p 1433:1433 –name docker-sql-server -d microsoft/mssql-server-linux<br></code></pre></td></tr></table></figure><h2 id="修改密码"><a href="#修改密码" class="headerlink" title="修改密码"></a>修改密码</h2><p><strong>you should replace YourNewStrong!PasswOrd with your password</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker <span class="hljs-built_in">exec</span> -it docker-sql-server /opt/mssql-tools/bin/sqlcmd \<br>-S localhost -U SA -P <span class="hljs-string">&#x27;&lt;YourStrong!PasswOrd&gt;&#x27;</span> \<br>-Q <span class="hljs-string">&#x27;ALTER LOGIN SA WITH PASSWORD=&quot;YourNewStrong!PasswOrd&quot;&#x27;</span><br></code></pre></td></tr></table></figure><h2 id="重启-启动"><a href="#重启-启动" class="headerlink" title="重启&#x2F;启动"></a><del>重启&#x2F;启动</del></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker restart docker-sql-server<br></code></pre></td></tr></table></figure><h2 id="检查状态"><a href="#检查状态" class="headerlink" title="检查状态"></a>检查状态</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker ps -a<br></code></pre></td></tr></table></figure><h2 id="访问数据库"><a href="#访问数据库" class="headerlink" title="访问数据库"></a>访问数据库</h2><p>connect server with sql operations studio or navicat</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>SQL Server Migration</title>
      <link href="/2018/11/14/sql-server-migration/"/>
      <url>/2018/11/14/sql-server-migration/</url>
      
        <content type="html"><![CDATA[<h2 id="Add-Linked-Server"><a href="#Add-Linked-Server" class="headerlink" title="Add Linked Server"></a>Add Linked Server</h2><p><a href="https://docs.microsoft.com/en-us/sql/relational-databases/system-stored-procedures/sp-addlinkedserver-transact-sql?view=sql-server-2017">sp-addlinkedserver</a><br><a href="https://docs.microsoft.com/en-us/sql/relational-databases/system-stored-procedures/sp-addlinkedsrvlogin-transact-sql?view=sql-server-2017">sp-addlinkedsrvlogin</a></p><span id="more"></span><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql">use YourNewDBName<br>go<br><span class="hljs-keyword">exec</span> sp_addlinkedserver <span class="hljs-variable">@server</span> <span class="hljs-operator">=</span> N<span class="hljs-string">&#x27;YourLinkedServerName&#x27;</span>, <span class="hljs-variable">@srvproduct</span><span class="hljs-operator">=</span>N<span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-variable">@provider</span><span class="hljs-operator">=</span>N<span class="hljs-string">&#x27;SQLNCLI&#x27;</span>, <span class="hljs-variable">@datasrc</span><span class="hljs-operator">=</span>N<span class="hljs-string">&#x27;YourSqlServerIpAddress&#x27;</span><br><br><span class="hljs-keyword">exec</span> sp_addlinkedsrvlogin <span class="hljs-variable">@rmtsrvname</span><span class="hljs-operator">=</span>N<span class="hljs-string">&#x27;YourLinkedServerName&#x27;</span>,<span class="hljs-variable">@useself</span><span class="hljs-operator">=</span>N<span class="hljs-string">&#x27;False&#x27;</span>,<span class="hljs-variable">@locallogin</span><span class="hljs-operator">=</span><span class="hljs-keyword">NULL</span>,<span class="hljs-variable">@rmtuser</span><span class="hljs-operator">=</span>N<span class="hljs-string">&#x27;YourSAName&#x27;</span>,<span class="hljs-variable">@rmtpassword</span><span class="hljs-operator">=</span><span class="hljs-string">&#x27;YourPassword</span><br></code></pre></td></tr></table></figure><h2 id="Import-Data-which-nonempty"><a href="#Import-Data-which-nonempty" class="headerlink" title="Import Data (which nonempty)"></a>Import Data (which nonempty)</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">begin</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable">@tablename</span> <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>)<br><span class="hljs-keyword">declare</span> csr <span class="hljs-keyword">cursor</span><br><span class="hljs-keyword">for</span>(<br><span class="hljs-keyword">select</span> o.name<br><span class="hljs-keyword">from</span> [YourLinkedServerName].[YourOldDBName].sys.indexes <span class="hljs-keyword">as</span> i <br><span class="hljs-keyword">join</span> [YourLinkedServerName].[YourOldDBName].sys.objects <span class="hljs-keyword">as</span> o <span class="hljs-keyword">on</span> i.object_id <span class="hljs-operator">=</span> o.object_id<br><span class="hljs-keyword">join</span> [YourLinkedServerName].[YourOldDBName].sys.dm_db_partition_stats <span class="hljs-keyword">as</span> ddps <span class="hljs-keyword">on</span> i.object_id <span class="hljs-operator">=</span> ddps.object_id <span class="hljs-keyword">and</span> i.index_id <span class="hljs-operator">=</span> ddps.index_id <br><span class="hljs-keyword">where</span> i.index_id <span class="hljs-operator">&lt;</span> <span class="hljs-number">2</span> <span class="hljs-keyword">and</span> o.is_ms_shipped <span class="hljs-operator">=</span> <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> ddps.row_count <span class="hljs-operator">&gt;</span> <span class="hljs-number">0</span><br>)<br><span class="hljs-comment">--disable foreign key</span><br><span class="hljs-keyword">SET</span> FOREIGN_KEY_CHECKS<span class="hljs-operator">=</span><span class="hljs-number">0</span><br><span class="hljs-keyword">open</span> csr<br><span class="hljs-keyword">fetch</span> next <span class="hljs-keyword">from</span> csr <span class="hljs-keyword">into</span> <span class="hljs-variable">@tablename</span><br>while @<span class="hljs-variable">@FETCH_STATUS</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br><span class="hljs-keyword">begin</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable">@sqlstr</span> <span class="hljs-type">varchar</span>(<span class="hljs-number">200</span>)<br><span class="hljs-keyword">set</span> <span class="hljs-variable">@sqlstr</span> <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;insert into &#x27;</span> <span class="hljs-operator">+</span> <span class="hljs-variable">@tablename</span> <span class="hljs-operator">+</span> <span class="hljs-string">&#x27; select * from [YourLinkedServerName].[YourOldDBName].dbo.&#x27;</span> <span class="hljs-operator">+</span> <span class="hljs-variable">@tablename</span><br><span class="hljs-keyword">begin</span> try<br><span class="hljs-keyword">exec</span> (<span class="hljs-variable">@sqlstr</span>)<br><span class="hljs-keyword">end</span> try<br><span class="hljs-comment">-- WARNING catch without interrupt</span><br><span class="hljs-keyword">begin</span> catch<br><span class="hljs-comment">--composite primary key</span><br>print <span class="hljs-variable">@sqlstr</span><br><span class="hljs-keyword">end</span> catch<br><span class="hljs-keyword">fetch</span> next <span class="hljs-keyword">from</span> csr <span class="hljs-keyword">into</span> <span class="hljs-variable">@tablename</span><br><span class="hljs-keyword">end</span><br><span class="hljs-keyword">close</span> csr<br><span class="hljs-keyword">deallocate</span> csr<br><span class="hljs-comment">--enable foreign key</span><br><span class="hljs-keyword">SET</span> FOREIGN_KEY_CHECKS<span class="hljs-operator">=</span><span class="hljs-number">1</span><br><span class="hljs-keyword">end</span><br>GO<br></code></pre></td></tr></table></figure><h2 id="Be-aware-of-Composite-Primary-Key"><a href="#Be-aware-of-Composite-Primary-Key" class="headerlink" title="Be aware of Composite Primary Key"></a>Be aware of Composite Primary Key</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">set</span> IDENTITY_INSERT dbo.CompositePrimaryKeyTable <span class="hljs-keyword">ON</span><br><br><span class="hljs-keyword">insert into</span> dbo.CompositePrimaryKeyTable(PrimaryKey1,PrimaryKey2,OtherField,...)<br><span class="hljs-keyword">select</span> PrimaryKey1,PrimaryKey2,OtherField,... <span class="hljs-keyword">from</span> [YourLinkedServerName].[YourOldDBName]. dbo.CompositePrimaryKeyTable<br><br><span class="hljs-keyword">set</span> IDENTITY_INSERT dbo.CompositePrimaryKeyTable OFF<br></code></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>macosx snippets</title>
      <link href="/2018/11/14/macosx-snippets/"/>
      <url>/2018/11/14/macosx-snippets/</url>
      
        <content type="html"><![CDATA[<h2 id="MacBook快捷键"><a href="#MacBook快捷键" class="headerlink" title="MacBook快捷键"></a>MacBook快捷键</h2><table><thead><tr><th>按键</th><th>描述</th></tr></thead><tbody><tr><td>空格键</td><td>预览</td></tr><tr><td>cmd + ,</td><td>设置</td></tr><tr><td>cmd + -&#x2F;&#x3D;</td><td>缩小&#x2F;放大</td></tr><tr><td>ctrl + u</td><td>删除到行首(与zsh冲突, zsh中是删除整行)</td></tr><tr><td>ctrl + k</td><td>删除到行尾</td></tr><tr><td>ctrl + p&#x2F;n</td><td>上&#x2F;下移动一行或者前&#x2F;后一个命令</td></tr><tr><td>ctrl + b&#x2F;f</td><td>光标前&#x2F;后移char</td></tr><tr><td>esc + b&#x2F;f</td><td>光标前&#x2F;后移word</td></tr><tr><td>ctrl + a&#x2F;e</td><td>到行首&#x2F;行尾</td></tr><tr><td>ctrl + h&#x2F;d</td><td>删前&#x2F;后字符</td></tr><tr><td>ctrl + y</td><td>粘贴</td></tr><tr><td>ctrl + w</td><td>删除前一个单词</td></tr><tr><td>ctrl + d</td><td>删后一个单词</td></tr><tr><td>ctrl + _</td><td>撤销</td></tr><tr><td>ctrl + r</td><td>bck-i-search&#x2F;reverse-i-search, 输入关键字搜索历史命令</td></tr></tbody></table>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>adb snapshot</title>
      <link href="/2018/11/14/adb-snapshot/"/>
      <url>/2018/11/14/adb-snapshot/</url>
      
        <content type="html"><![CDATA[<h2 id="截图"><a href="#截图" class="headerlink" title="截图"></a>截图</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">alias</span> adbscreenshot=”adb -d shell screencap -p &gt; $(<span class="hljs-built_in">date</span> +”%Y-%m-%d%H-%M-%S”).png”<br><span class="hljs-built_in">alias</span> adbscreenshot=”adb -d shell screencap -p | perl -pe ‘s/\x0D\x0A/\x0A/g’ &gt; $(<span class="hljs-built_in">date</span> +”%Y-%m-%d%H-%M-%S”).png”<br></code></pre></td></tr></table></figure><span id="more"></span><h2 id="截屏"><a href="#截屏" class="headerlink" title="截屏"></a>截屏</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">adb exec-out screencap -p &gt; screen.png<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">adb shell screencap -p /sdcard/screencap.png<br>adb pull /sdcard/screencap.png<br></code></pre></td></tr></table></figure><h2 id="录屏"><a href="#录屏" class="headerlink" title="录屏"></a>录屏</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">adb shell screenrecord /sdcard/screen.mp4<br><span class="hljs-comment"># ^C 停止</span><br>adb pull /sdcard/screen.mp4<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">adb shell screenrecord –bit-rate 12000000 /sdcard/screen.mp4<br></code></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Kotlin functions</title>
      <link href="/2018/11/14/kotlin-functions/"/>
      <url>/2018/11/14/kotlin-functions/</url>
      
        <content type="html"><![CDATA[<ul><li>1、function member</li></ul><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">val</span> onClick: () -&gt; <span class="hljs-built_in">Unit</span> = …<br></code></pre></td></tr></table></figure><span id="more"></span><ul><li>2、nullable function</li></ul><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">val</span> intFunc: ((<span class="hljs-built_in">Int</span>, <span class="hljs-built_in">Int</span>) -&gt; <span class="hljs-built_in">Int</span>)? = <span class="hljs-literal">null</span><br></code></pre></td></tr></table></figure><ul><li>3、function type</li></ul><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">typealias</span> ClickHandler = (Button, ClickEvent) -&gt; <span class="hljs-built_in">Unit</span><br></code></pre></td></tr></table></figure><ul><li>4、anonymous function</li></ul><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-function"><span class="hljs-title">fun</span><span class="hljs-params">(s: <span class="hljs-type">String</span>)</span></span>: <span class="hljs-built_in">Int</span> &#123; <span class="hljs-keyword">return</span> s.toIntOrNull() ?: <span class="hljs-number">0</span> &#125;<br></code></pre></td></tr></table></figure><ul><li>5、lamda expression</li></ul><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">val</span> reminderFunc = &#123; index: <span class="hljs-built_in">Int</span> -&gt; index % <span class="hljs-number">2</span> &#125;<br></code></pre></td></tr></table></figure><ul><li>6、callable reference</li></ul><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">member function ::toString, String::toInt<br>member property List::size<br><span class="hljs-keyword">constructor</span> ::someConstructorFuncName<br></code></pre></td></tr></table></figure><ul><li>7、class function</li></ul><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">IntTransformer</span>: <span class="hljs-type"></span>(<span class="hljs-built_in">Int</span>) -&gt; <span class="hljs-built_in">Int</span> &#123;<br>    <span class="hljs-keyword">override</span> <span class="hljs-keyword">operator</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">invoke</span><span class="hljs-params">(x: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Int</span> = TODO()<br>&#125;<br><span class="hljs-keyword">val</span> intFunction: (<span class="hljs-built_in">Int</span>) -&gt; <span class="hljs-built_in">Int</span> = IntTransformer()<br></code></pre></td></tr></table></figure><ul><li>8、instance function</li></ul><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">val</span> repeatFun: String.(<span class="hljs-built_in">Int</span>) -&gt; String = &#123; times -&gt;<br>    <span class="hljs-keyword">this</span>.repeat(times)<br>&#125;<br><span class="hljs-keyword">val</span> twoParameters: (String, <span class="hljs-built_in">Int</span>) -&gt; String = repeatFun<br><span class="hljs-keyword">val</span> s1 = repeatFun(“str”, <span class="hljs-number">2</span>)<br><span class="hljs-keyword">val</span> s2 = “str”.repeatFun(<span class="hljs-number">2</span>)<br></code></pre></td></tr></table></figure><ul><li>9、builder function</li></ul><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">HTML</span> &#123;<br>    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">body</span><span class="hljs-params">()</span></span> &#123; … &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">html</span><span class="hljs-params">(<span class="hljs-keyword">init</span>: <span class="hljs-type">HTML</span>.() -&gt; <span class="hljs-type">Unit</span>)</span></span>: HTML &#123;<br>    <span class="hljs-keyword">val</span> html = HTML() <span class="hljs-comment">// create the receiver object</span><br>    html.<span class="hljs-keyword">init</span>() <span class="hljs-comment">// pass the receiver object to the lambda</span><br>    <span class="hljs-keyword">return</span> html<br>&#125;<br><br><span class="hljs-keyword">val</span> obj = html &#123; <span class="hljs-comment">// lambda with receiver begins here</span><br>    body() <span class="hljs-comment">// calling a method on the receiver object</span><br>&#125;<br></code></pre></td></tr></table></figure><ul><li>10、infix function</li></ul><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">HTML</span> &#123;<br>    <span class="hljs-keyword">infix</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">escape</span><span class="hljs-params">(escaper: (<span class="hljs-type">String</span>) -&gt; <span class="hljs-type">String</span>)</span></span>&#123;…&#125;<br>&#125;<br><span class="hljs-keyword">val</span> obj = HTML() escape &#123; s: String -&gt; “switch s case xxx”&#125;<br></code></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>IDEA Jetty</title>
      <link href="/2018/11/14/idea-jetty/"/>
      <url>/2018/11/14/idea-jetty/</url>
      
        <content type="html"><![CDATA[<h2 id="第一步、pom-xml-添加-eclipse-jetty-依赖"><a href="#第一步、pom-xml-添加-eclipse-jetty-依赖" class="headerlink" title="第一步、pom.xml 添加 eclipse-jetty 依赖"></a>第一步、<code>pom.xml</code> 添加 <code>eclipse-jetty</code> 依赖</h2><span id="more"></span><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.eclipse.jetty<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jetty-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>9.4.11.v20180605<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">webAppSourceDirectory</span>&gt;</span>src/main/webapp<span class="hljs-tag">&lt;/<span class="hljs-name">webAppSourceDirectory</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">scanIntervalSeconds</span>&gt;</span>60<span class="hljs-tag">&lt;/<span class="hljs-name">scanIntervalSeconds</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">stopKey</span>&gt;</span>foo<span class="hljs-tag">&lt;/<span class="hljs-name">stopKey</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">stopPort</span>&gt;</span>9090<span class="hljs-tag">&lt;/<span class="hljs-name">stopPort</span>&gt;</span><br>                   <span class="hljs-tag">&lt;<span class="hljs-name">jettyXml</span>&gt;</span>src/main/webapp/WEB-INF/jetty.xml<span class="hljs-tag">&lt;/<span class="hljs-name">jettyXml</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">httpConnector</span>&gt;</span><br>                       <span class="hljs-tag">&lt;<span class="hljs-name">port</span>&gt;</span>8080<span class="hljs-tag">&lt;/<span class="hljs-name">port</span>&gt;</span><br>                       <span class="hljs-tag">&lt;<span class="hljs-name">idleTimeout</span>&gt;</span>60000<span class="hljs-tag">&lt;/<span class="hljs-name">idleTimeout</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">httpConnector</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>               <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>               <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>               <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>               <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>                   <span class="hljs-tag">&lt;<span class="hljs-name">target</span>&gt;</span>1.7<span class="hljs-tag">&lt;/<span class="hljs-name">target</span>&gt;</span><br>                   <span class="hljs-tag">&lt;<span class="hljs-name">source</span>&gt;</span>1.7<span class="hljs-tag">&lt;/<span class="hljs-name">source</span>&gt;</span><br>                   <span class="hljs-tag">&lt;<span class="hljs-name">encoding</span>&gt;</span>utf-8<span class="hljs-tag">&lt;/<span class="hljs-name">encoding</span>&gt;</span><br>               <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br>           <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>               <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-clean-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>               <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">filesets</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">fileset</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/webapp/WEB-INF<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>classes<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">followSymlinks</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">followSymlinks</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">fileset</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filesets</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br><span class="hljs-comment">&lt;!-- 配置输出路径 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">outputDirectory</span>&gt;</span>src/main/webapp/WEB-INF/classes<span class="hljs-tag">&lt;/<span class="hljs-name">outputDirectory</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="第二步，创建-jetty-xml"><a href="#第二步，创建-jetty-xml" class="headerlink" title="第二步，创建 jetty.xml"></a>第二步，创建 <code>jetty.xml</code></h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span>?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">Configure</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//Jetty//Configure//EN&quot;</span> <span class="hljs-string">&quot;http://www.eclipse.org/jetty/configure.dtd&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">Configure</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;OtherServer&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.eclipse.jetty.server.Server&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">Call</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;addConnector&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">Arg</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">New</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.eclipse.jetty.server.ServerConnector&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">Arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;server&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">Ref</span> <span class="hljs-attr">refid</span>=<span class="hljs-string">&quot;OtherServer&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">Arg</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">Set</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;port&quot;</span>&gt;</span>8888<span class="hljs-tag">&lt;/<span class="hljs-name">Set</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">New</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">Arg</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">Call</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">Configure</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="第三步，创建-jetty-env-xml"><a href="#第三步，创建-jetty-env-xml" class="headerlink" title="第三步，创建 jetty-env.xml"></a>第三步，创建 <code>jetty-env.xml</code></h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">Configure</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&#x27;wac&#x27;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.eclipse.jetty.webapp.WebAppContext&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">Set</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;contextPath&quot;</span>&gt;</span>/ydzf<span class="hljs-tag">&lt;/<span class="hljs-name">Set</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">New</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;defaultDB&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.eclipse.jetty.plus.jndi.Resource&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">Arg</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">Ref</span> <span class="hljs-attr">refid</span>=<span class="hljs-string">&quot;wac&quot;</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Arg</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">Arg</span>&gt;</span>jdbc/default<span class="hljs-tag">&lt;/<span class="hljs-name">Arg</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">Arg</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">New</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.apache.tomcat.dbcp.dbcp.BasicDataSource&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">Set</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;validationQuery&quot;</span>&gt;</span>select 1<span class="hljs-tag">&lt;/<span class="hljs-name">Set</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">Set</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;maxActive&quot;</span>&gt;</span>10<span class="hljs-tag">&lt;/<span class="hljs-name">Set</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">Set</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;maxIdle&quot;</span>&gt;</span>30<span class="hljs-tag">&lt;/<span class="hljs-name">Set</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">Set</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;maxWait&quot;</span>&gt;</span>10000<span class="hljs-tag">&lt;/<span class="hljs-name">Set</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">Set</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span>&gt;</span>&#123;username&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">Set</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">Set</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span>&gt;</span>&#123;password&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">Set</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">Set</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driverClassName&quot;</span>&gt;</span>com.microsoft.sqlserver.jdbc.SQLServerDriver<span class="hljs-tag">&lt;/<span class="hljs-name">Set</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">Set</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span>&gt;</span>jdbc:sqlserver://&#123;host&#125;:&#123;port&#125;;databaseName=&#123;databaseName&#125;;user=&#123;username&#125;;password=&#123;password&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">Set</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">New</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">Arg</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">New</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">New</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;workflowDB&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.eclipse.jetty.plus.jndi.Resource&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">Arg</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">Ref</span> <span class="hljs-attr">refid</span>=<span class="hljs-string">&quot;wac&quot;</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Arg</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">Arg</span>&gt;</span>jdbc/workflow<span class="hljs-tag">&lt;/<span class="hljs-name">Arg</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">Arg</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">New</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.apache.tomcat.dbcp.dbcp.BasicDataSource&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">Set</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;validationQuery&quot;</span>&gt;</span>select 1<span class="hljs-tag">&lt;/<span class="hljs-name">Set</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">Set</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;maxActive&quot;</span>&gt;</span>10<span class="hljs-tag">&lt;/<span class="hljs-name">Set</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">Set</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;maxIdle&quot;</span>&gt;</span>30<span class="hljs-tag">&lt;/<span class="hljs-name">Set</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">Set</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;maxWait&quot;</span>&gt;</span>10000<span class="hljs-tag">&lt;/<span class="hljs-name">Set</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">Set</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span>&gt;</span>&#123;username&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">Set</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">Set</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span>&gt;</span>&#123;password&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">Set</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">Set</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driverClassName&quot;</span>&gt;</span>com.microsoft.sqlserver.jdbc.SQLServerDriver<span class="hljs-tag">&lt;/<span class="hljs-name">Set</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">Set</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span>&gt;</span>jdbc:sqlserver://&#123;host&#125;:&#123;port&#125;;databaseName=&#123;databaseName&#125;;user=&#123;username&#125;;password=&#123;password&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">Set</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">New</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">Arg</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">New</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">Configure</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>确保 pom.xml 里面有依赖 com.microsoft.sqlserver.jdbc.SQLServerDriver 等数据库连接</p></blockquote>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
