<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>mind pieces</title>
  
  <subtitle>messy thinking</subtitle>
  <link href="http://qomg.github.io/atom.xml" rel="self"/>
  
  <link href="http://qomg.github.io/"/>
  <updated>2024-02-23T07:24:34.873Z</updated>
  <id>http://qomg.github.io/</id>
  
  <author>
    <name>qomg</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Android PinEntryEditText</title>
    <link href="http://qomg.github.io/2024/02/23/Android-PinEntryEditText/"/>
    <id>http://qomg.github.io/2024/02/23/Android-PinEntryEditText/</id>
    <published>2024-02-23T07:18:57.000Z</published>
    <updated>2024-02-23T07:24:34.873Z</updated>
    
    <content type="html"><![CDATA[<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">com.yeahka.widget.safekeyboard.PinEntryEditText</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:inputType</span>=<span class="string">&quot;number&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:textSize</span>=<span class="string">&quot;20sp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:backgroundStyle</span>=<span class="string">&quot;outline&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:charSize</span>=<span class="string">&quot;40dp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">com.yeahka.widget.safekeyboard.PinEntryEditText</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:inputType</span>=<span class="string">&quot;numberPassword&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:backgroundStyle</span>=<span class="string">&quot;fill&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:charSpace</span>=<span class="string">&quot;15dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:charSize</span>=<span class="string">&quot;45dp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">com.yeahka.widget.safekeyboard.PinEntryEditText</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:inputType</span>=<span class="string">&quot;number&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:backgroundStyle</span>=<span class="string">&quot;underline&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:charSize</span>=<span class="string">&quot;40dp&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><h2 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.content.res.TypedArray;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Canvas;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Color;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Paint;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Typeface;</span><br><span class="line"><span class="keyword">import</span> android.text.Editable;</span><br><span class="line"><span class="keyword">import</span> android.text.InputFilter;</span><br><span class="line"><span class="keyword">import</span> android.text.InputType;</span><br><span class="line"><span class="keyword">import</span> android.text.TextPaint;</span><br><span class="line"><span class="keyword">import</span> android.text.method.DigitsKeyListener;</span><br><span class="line"><span class="keyword">import</span> android.util.AttributeSet;</span><br><span class="line"><span class="keyword">import</span> android.view.ActionMode;</span><br><span class="line"><span class="keyword">import</span> android.view.Menu;</span><br><span class="line"><span class="keyword">import</span> android.view.MenuItem;</span><br><span class="line"><span class="keyword">import</span> android.view.accessibility.AccessibilityNodeInfo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.annotation.Nullable;</span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.widget.AppCompatEditText;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PinEntryEditText</span> <span class="keyword">extends</span> <span class="title class_">AppCompatEditText</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">float</span> <span class="variable">mCharSize</span> <span class="operator">=</span> <span class="number">40</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">float</span> <span class="variable">mSpace</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">float</span> <span class="variable">mRadius</span> <span class="operator">=</span> <span class="number">8</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">mNumChars</span> <span class="operator">=</span> <span class="number">6</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">mBackgroundStyle</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">float</span> <span class="variable">mLineStroke</span> <span class="operator">=</span> <span class="number">0.5f</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">float</span> <span class="variable">mLineStrokeSelected</span> <span class="operator">=</span> <span class="number">0.5f</span>;</span><br><span class="line">    <span class="keyword">private</span> AccessibilityNodeInfo accessibilityNodeInfo;</span><br><span class="line">    <span class="keyword">private</span> OnClickListener mClickListener;</span><br><span class="line">    <span class="keyword">private</span> Paint mLinesPaint;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PinEntryEditText</span><span class="params">(Context context)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context);</span><br><span class="line">        init(context, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PinEntryEditText</span><span class="params">(Context context, AttributeSet attrs)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, attrs);</span><br><span class="line">        init(context, attrs);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PinEntryEditText</span><span class="params">(Context context, AttributeSet attrs, <span class="type">int</span> defStyleAttr)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, attrs, defStyleAttr);</span><br><span class="line">        init(context, attrs);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onAttachedToWindow</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onAttachedToWindow();</span><br><span class="line">        accessibilityNodeInfo = createAccessibilityNodeInfo();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onDetachedFromWindow</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onDetachedFromWindow();</span><br><span class="line">        accessibilityNodeInfo = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(Context context, <span class="meta">@Nullable</span> AttributeSet attrs)</span> &#123;</span><br><span class="line">        <span class="type">float</span> <span class="variable">multi</span> <span class="operator">=</span> context.getResources().getDisplayMetrics().density;</span><br><span class="line">        mCharSize = multi * mCharSize; <span class="comment">//convert to pixels for our density</span></span><br><span class="line">        mSpace = multi * mSpace; <span class="comment">//convert to pixels for our density</span></span><br><span class="line">        mRadius = multi * mRadius;</span><br><span class="line">        mLineStroke = multi * mLineStroke;</span><br><span class="line">        mLineStrokeSelected = multi * mLineStrokeSelected;</span><br><span class="line">        mLinesPaint = <span class="keyword">new</span> <span class="title class_">Paint</span>(getPaint());</span><br><span class="line">        mLinesPaint.setStrokeWidth(mLineStroke);</span><br><span class="line">        setBackgroundResource(<span class="number">0</span>);</span><br><span class="line">        setCursorVisible(<span class="literal">false</span>);</span><br><span class="line">        setTextIsSelectable(<span class="literal">false</span>);</span><br><span class="line">        setHint(<span class="string">&quot;&quot;</span>);</span><br><span class="line">        setTypeface(Typeface.DEFAULT_BOLD);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (attrs == <span class="literal">null</span>) &#123;</span><br><span class="line">            setInputType(InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_VARIATION_PASSWORD);</span><br><span class="line">            setKeyListener(<span class="keyword">new</span> <span class="title class_">DigitsKeyListener</span>());</span><br><span class="line">            setFilters(<span class="keyword">new</span> <span class="title class_">InputFilter</span>[]&#123;<span class="keyword">new</span> <span class="title class_">InputFilter</span>.LengthFilter(mNumChars)&#125;);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            mNumChars = attrs.getAttributeIntValue(android.R.attr.maxLength, mNumChars);</span><br><span class="line">            <span class="comment">//noinspection resource</span></span><br><span class="line">            <span class="type">TypedArray</span> <span class="variable">typedArray</span> <span class="operator">=</span> context.obtainStyledAttributes(attrs, R.styleable.PinEntryEditText);</span><br><span class="line">            mBackgroundStyle = typedArray.getInt(R.styleable.PinEntryEditText_backgroundStyle, mBackgroundStyle);</span><br><span class="line">            mCharSize = typedArray.getDimensionPixelSize(R.styleable.PinEntryEditText_charSize, (<span class="type">int</span>) mCharSize);</span><br><span class="line">            mSpace = typedArray.getDimensionPixelSize(R.styleable.PinEntryEditText_charSpace, (<span class="type">int</span>) mSpace);</span><br><span class="line">            typedArray.recycle();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (mBackgroundStyle == <span class="number">2</span>) &#123;</span><br><span class="line">            mLinesPaint.setStyle(Paint.Style.FILL);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            mLinesPaint.setStyle(Paint.Style.STROKE);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (isPassword()) &#123;</span><br><span class="line">            getPaint().setFakeBoldText(<span class="literal">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//Disable copy paste</span></span><br><span class="line">        <span class="built_in">super</span>.setCustomSelectionActionModeCallback(<span class="keyword">new</span> <span class="title class_">ActionMode</span>.Callback() &#123;</span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onPrepareActionMode</span><span class="params">(ActionMode mode, Menu menu)</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDestroyActionMode</span><span class="params">(ActionMode mode)</span> &#123;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onCreateActionMode</span><span class="params">(ActionMode mode, Menu menu)</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onActionItemClicked</span><span class="params">(ActionMode mode, MenuItem item)</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">// When tapped, move cursor to end of text.</span></span><br><span class="line">        <span class="built_in">super</span>.setOnClickListener(v -&gt; &#123;</span><br><span class="line">            <span class="type">Editable</span> <span class="variable">text</span> <span class="operator">=</span> getText();</span><br><span class="line">            <span class="keyword">if</span> (text != <span class="literal">null</span>) &#123;</span><br><span class="line">                setSelection(text.length());</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (mClickListener != <span class="literal">null</span>) &#123;</span><br><span class="line">                mClickListener.onClick(v);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">isPassword</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> accessibilityNodeInfo != <span class="literal">null</span> &amp;&amp; accessibilityNodeInfo.isPassword();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setOnClickListener</span><span class="params">(OnClickListener l)</span> &#123;</span><br><span class="line">        mClickListener = l;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCustomSelectionActionModeCallback</span><span class="params">(ActionMode.Callback actionModeCallback)</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;setCustomSelectionActionModeCallback() not supported.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onMeasure</span><span class="params">(<span class="type">int</span> widthMeasureSpec, <span class="type">int</span> heightMeasureSpec)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onMeasure(widthMeasureSpec, heightMeasureSpec);</span><br><span class="line">        <span class="type">int</span> <span class="variable">width</span> <span class="operator">=</span> getMeasuredWidth();</span><br><span class="line">        <span class="type">int</span> <span class="variable">height</span> <span class="operator">=</span> (<span class="type">int</span>) mCharSize + getPaddingTop() + getPaddingBottom();</span><br><span class="line">        System.out.println(<span class="string">&quot;onMeasure: &quot;</span> + width + <span class="string">&quot;,&quot;</span> + height);</span><br><span class="line">        setMeasuredDimension(width, height);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onDraw</span><span class="params">(Canvas canvas)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">availableWidth</span> <span class="operator">=</span> getWidth() - getPaddingRight() - getPaddingLeft();</span><br><span class="line">        <span class="type">float</span> <span class="variable">space</span> <span class="operator">=</span> mSpace * (mNumChars - <span class="number">1</span>);</span><br><span class="line">        <span class="type">float</span> <span class="variable">charWidth</span> <span class="operator">=</span> mCharSize * mNumChars;</span><br><span class="line">        <span class="keyword">if</span> (availableWidth &lt; charWidth) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (availableWidth - charWidth &lt; space) &#123;</span><br><span class="line">            space = availableWidth - charWidth;</span><br><span class="line">            mSpace = space / (mNumChars - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">float</span> <span class="variable">leftOffset</span> <span class="operator">=</span> (availableWidth - charWidth - space) / <span class="number">2</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">startX</span> <span class="operator">=</span> (<span class="type">int</span>) (getPaddingLeft() + leftOffset);</span><br><span class="line">        <span class="type">int</span> <span class="variable">bottom</span> <span class="operator">=</span> getHeight() - getPaddingBottom();</span><br><span class="line">        <span class="type">int</span> <span class="variable">top</span> <span class="operator">=</span> getPaddingTop();</span><br><span class="line">        <span class="type">Editable</span> <span class="variable">text</span> <span class="operator">=</span> getText();</span><br><span class="line">        <span class="keyword">if</span> (text == <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">textLength</span> <span class="operator">=</span> text.length();</span><br><span class="line">        <span class="type">TextPaint</span> <span class="variable">textPaint</span> <span class="operator">=</span> getPaint();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; mNumChars; i++) &#123;</span><br><span class="line">            updateColorForLines(i == textLength);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (mBackgroundStyle == <span class="number">0</span>) &#123;</span><br><span class="line">                canvas.drawLine(startX, bottom, startX + mCharSize, bottom, mLinesPaint);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (mBackgroundStyle == <span class="number">1</span>) &#123;</span><br><span class="line">                canvas.drawRoundRect(startX, top, startX + mCharSize, bottom, mRadius, mRadius, mLinesPaint);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                canvas.drawRoundRect(startX, top, startX + mCharSize, bottom, mRadius, mRadius, mLinesPaint);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (textLength &gt; i) &#123;</span><br><span class="line">                <span class="type">float</span> textWidth;</span><br><span class="line">                <span class="type">boolean</span> <span class="variable">isPassword</span> <span class="operator">=</span> isPassword();</span><br><span class="line">                <span class="keyword">if</span> (isPassword) &#123;</span><br><span class="line">                    textWidth = textPaint.measureText(<span class="string">&quot;•&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    textWidth = textPaint.measureText(text.charAt(i) + <span class="string">&quot;&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                Paint.<span class="type">FontMetrics</span> <span class="variable">metrics</span> <span class="operator">=</span> textPaint.getFontMetrics();</span><br><span class="line">                <span class="type">float</span> <span class="variable">textHeight</span> <span class="operator">=</span> metrics.bottom - metrics.top;</span><br><span class="line">                <span class="type">float</span> <span class="variable">middle</span> <span class="operator">=</span> startX + mCharSize / <span class="number">2</span>;</span><br><span class="line">                <span class="type">float</span> <span class="variable">x</span> <span class="operator">=</span> middle - textWidth / <span class="number">2</span>;</span><br><span class="line">                <span class="type">float</span> <span class="variable">y</span> <span class="operator">=</span> bottom - mCharSize / <span class="number">2</span> + textHeight / <span class="number">2</span> - metrics.descent;</span><br><span class="line">                <span class="type">String</span> <span class="variable">ch</span> <span class="operator">=</span> isPassword ? <span class="string">&quot;•&quot;</span> : Character.toString(text.charAt(i));</span><br><span class="line">                canvas.drawText(ch, x, y, textPaint);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (mSpace &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                startX += (<span class="type">int</span>) (mCharSize * <span class="number">2</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                startX += (<span class="type">int</span>) (mCharSize + mSpace);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> next Is the current char the next character to be input?</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">updateColorForLines</span><span class="params">(<span class="type">boolean</span> next)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isFocused()) &#123;</span><br><span class="line">            mLinesPaint.setStrokeWidth(mLineStrokeSelected);</span><br><span class="line">            <span class="keyword">if</span> (mBackgroundStyle == <span class="number">2</span>) &#123;</span><br><span class="line">                mLinesPaint.setColor(Color.parseColor(<span class="string">&quot;#ffF4F6F8&quot;</span>));</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                mLinesPaint.setColor(Color.parseColor(<span class="string">&quot;#666666&quot;</span>));</span><br><span class="line">                <span class="keyword">if</span> (next) &#123;</span><br><span class="line">                    mLinesPaint.setColor(Color.parseColor(<span class="string">&quot;#008CFF&quot;</span>));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            mLinesPaint.setStrokeWidth(mLineStroke);</span><br><span class="line">            <span class="keyword">if</span> (mBackgroundStyle == <span class="number">2</span>) &#123;</span><br><span class="line">                mLinesPaint.setColor(Color.parseColor(<span class="string">&quot;#ffF4F6F8&quot;</span>));</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                mLinesPaint.setColor(Color.parseColor(<span class="string">&quot;#666666&quot;</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">declare-styleable</span> <span class="attr">name</span>=<span class="string">&quot;PinEntryEditText&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">attr</span> <span class="attr">name</span>=<span class="string">&quot;charSpace&quot;</span> <span class="attr">format</span>=<span class="string">&quot;dimension&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">attr</span> <span class="attr">name</span>=<span class="string">&quot;charSize&quot;</span> <span class="attr">format</span>=<span class="string">&quot;dimension&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">attr</span> <span class="attr">name</span>=<span class="string">&quot;backgroundStyle&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">enum</span> <span class="attr">name</span>=<span class="string">&quot;underline&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">enum</span> <span class="attr">name</span>=<span class="string">&quot;outline&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">enum</span> <span class="attr">name</span>=<span class="string">&quot;fill&quot;</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">attr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">declare-styleable</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="弹出系统键盘"><a href="#弹出系统键盘" class="headerlink" title="弹出系统键盘"></a>弹出系统键盘</h2><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 部分Android 10 无效</span></span><br><span class="line">WindowInsetsControllerCompat(window, it).show(WindowInsetsCompat.Type.ime())</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;使用&quot;&gt;&lt;a href=&quot;#使用&quot; class=&quot;headerlink&quot; title=&quot;使用&quot;&gt;&lt;/a&gt;使用&lt;/h2&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span cl</summary>
      
    
    
    
    <category term="Android" scheme="http://qomg.github.io/categories/Android/"/>
    
    
    <category term="Pin" scheme="http://qomg.github.io/tags/Pin/"/>
    
    <category term="EditText" scheme="http://qomg.github.io/tags/EditText/"/>
    
  </entry>
  
  <entry>
    <title>Git commit message</title>
    <link href="http://qomg.github.io/2024/02/23/Git-commit-message/"/>
    <id>http://qomg.github.io/2024/02/23/Git-commit-message/</id>
    <published>2024-02-23T07:00:30.000Z</published>
    <updated>2024-02-23T07:17:03.382Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Git提交描述规范"><a href="#Git提交描述规范" class="headerlink" title="Git提交描述规范"></a>Git提交描述规范</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">type(&lt;scope&gt;):&lt;空格&gt;&lt;subject&gt;&lt;空格&gt;#&lt;github-ref-id&gt;</span><br><span class="line">&lt;换行&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;换行&gt;</span><br><span class="line">&lt;footer&gt;</span><br></pre></td></tr></table></figure><h3 id="type"><a href="#type" class="headerlink" title="type"></a>type</h3><table><thead><tr><th>name</th><th>description</th></tr></thead><tbody><tr><td>feat</td><td>新功能（feature）</td></tr><tr><td>fix</td><td>修复bug</td></tr><tr><td>docs</td><td>仅仅修改了文档（documentation）</td></tr><tr><td>style</td><td>仅仅是对格式进行修改，如逗号、缩进、空格等。不改变代码逻辑</td></tr><tr><td>refactor</td><td>重构（即不是新增功能，也不是修改bug的代码变动）</td></tr><tr><td>perf</td><td>优化相关，如提升性能、用户体验等</td></tr><tr><td>test</td><td>测试用例，包括单元测试、集成测试</td></tr><tr><td>chore</td><td>改变构建流程、或者增加依赖库、工具等</td></tr><tr><td>revert</td><td>版本回滚</td></tr></tbody></table><h3 id="scope"><a href="#scope" class="headerlink" title="scope"></a>scope</h3><blockquote><p>用于说明 commit 影响的范围，比如数据层、控制层、视图层等等，视项目不同而不同。</p></blockquote><h3 id="subject"><a href="#subject" class="headerlink" title="subject"></a>subject</h3><blockquote><p>commit 目的的简短描述，不超过50个字符</p></blockquote><ul><li>以动词开头，使用第一人称现在时，比如change，而不是changed或changes</li><li>第一个字母小写</li><li>结尾不加句号</li></ul><h3 id="github-ref-id"><a href="#github-ref-id" class="headerlink" title="github-ref-id"></a>github-ref-id</h3><blockquote><p>关联bug修复或者已完成特性，issue or feature</p></blockquote><h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">fix(ui): Ensure Range headers adhere more closely to RFC 2616 #2310</span><br><span class="line"></span><br><span class="line">To add new dependency use `range-parser`to compute the range.</span><br><span class="line">It is more well-tested in the wild.</span><br><span class="line"></span><br><span class="line">BREAKING CHANGE:</span><br><span class="line">port-runner command line option has changed to runner-port.</span><br><span class="line">To migrate your project, change all the commands,</span><br><span class="line">where you use --port-runner to --runner-port.</span><br><span class="line">content_paste</span><br></pre></td></tr></table></figure><h2 id="emoji-指南"><a href="#emoji-指南" class="headerlink" title="emoji 指南"></a>emoji 指南</h2><p><a href="https://gitmoji.js.org/">gitmoji</a></p><table><thead><tr><th>emoji</th><th>emoji 代码</th><th>commit 说明</th></tr></thead><tbody><tr><td>调色板</td><td>:art:</td><td>改进代码结构&#x2F;代码格式</td></tr><tr><td>火焰</td><td>:fire:</td><td>移除代码或文件</td></tr><tr><td>bug</td><td>:bug:</td><td>修复 bug</td></tr><tr><td>急救车</td><td>:ambulance:</td><td>重要补丁</td></tr><tr><td>火花</td><td>:sparkles:</td><td>引入新功能</td></tr><tr><td>备忘录</td><td>:memo:</td><td>撰写文档</td></tr><tr><td>火箭</td><td>:rocket:</td><td>部署功能</td></tr><tr><td>口红</td><td>:lipstick:</td><td>更新 UI 和样式文件</td></tr><tr><td>庆祝</td><td>:tada:</td><td>初次提交</td></tr><tr><td>白色复选框</td><td>:white_check_mark:</td><td>增加测试</td></tr><tr><td>锁</td><td>:lock:</td><td>修复安全问题</td></tr><tr><td>苹果</td><td>:apple:</td><td>修复 macOS 下的问题</td></tr><tr><td>企鹅</td><td>:penguin:</td><td>修复 Linux 下的问题</td></tr><tr><td>旗帜</td><td>:checked_flag:</td><td>修复 Windows 下的问题</td></tr><tr><td>书签</td><td>:bookmark:</td><td>发行&#x2F;版本标签</td></tr><tr><td>警车灯</td><td>:rotating_light:</td><td>移除 linter 警告</td></tr><tr><td>施工</td><td>:construction:</td><td>工作进行中</td></tr><tr><td>绿心</td><td>:green_heart:</td><td>修复 CI 构建问题</td></tr><tr><td>下降箭头</td><td>:arrow_down:</td><td>降级依赖</td></tr><tr><td>上升箭头</td><td>:arrow_up:</td><td>升级依赖</td></tr><tr><td>工人</td><td>:construction_worker:</td><td>添加 CI 构建系统</td></tr><tr><td>上升趋势图</td><td>:chart_with_upwards_trend:</td><td>添加分析或跟踪代</td></tr><tr><td>锤子</td><td>:hammer:</td><td>重大重构</td></tr><tr><td>减号</td><td>:heavy_minus_sign:</td><td>减少一个依赖</td></tr><tr><td>鲸鱼</td><td>:whale:</td><td>Docker 相关工作</td></tr><tr><td>加号</td><td>:heavy_plug_sign:</td><td>增加一个依赖</td></tr><tr><td>扳手</td><td>:wrench:</td><td>修改配置文件</td></tr><tr><td>地球</td><td>:globe_with_meridians:</td><td>国际化与本地化</td></tr><tr><td>铅笔</td><td>:pencil2:</td><td>修复 typo</td></tr></tbody></table>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Git提交描述规范&quot;&gt;&lt;a href=&quot;#Git提交描述规范&quot; class=&quot;headerlink&quot; title=&quot;Git提交描述规范&quot;&gt;&lt;/a&gt;Git提交描述规范&lt;/h2&gt;&lt;figure class=&quot;highlight text&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td</summary>
      
    
    
    
    <category term="Git" scheme="http://qomg.github.io/categories/Git/"/>
    
    
    <category term="commit message" scheme="http://qomg.github.io/tags/commit-message/"/>
    
  </entry>
  
  <entry>
    <title>Android bitmap trim white</title>
    <link href="http://qomg.github.io/2024/02/23/Android-bitmap-trim-white/"/>
    <id>http://qomg.github.io/2024/02/23/Android-bitmap-trim-white/</id>
    <published>2024-02-23T06:58:41.000Z</published>
    <updated>2024-02-23T06:59:19.386Z</updated>
    
    <content type="html"><![CDATA[<h2 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h2><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 去除多余白框</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">trimBitmap</span><span class="params">(bitmap: <span class="type">Bitmap</span>)</span></span>: Bitmap &#123;</span><br><span class="line">    <span class="keyword">var</span> top = <span class="number">0</span></span><br><span class="line">    <span class="keyword">var</span> bottom = bitmap.height - <span class="number">1</span></span><br><span class="line">    <span class="keyword">var</span> left = <span class="number">0</span></span><br><span class="line">    <span class="keyword">var</span> right = bitmap.width - <span class="number">1</span></span><br><span class="line">    <span class="comment">// 从顶部开始扫描，找到第一个非白色像素的行</span></span><br><span class="line">    <span class="keyword">while</span> (top &lt; bitmap.height &amp;&amp; isRowWhite(bitmap, top)) &#123;</span><br><span class="line">        top++</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 从底部开始扫描，找到第一个非白色像素的行</span></span><br><span class="line">    <span class="keyword">while</span> (bottom &gt;= top &amp;&amp; isRowWhite(bitmap, bottom)) &#123;</span><br><span class="line">        bottom--</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 从左侧开始扫描，找到第一个非白色像素的列</span></span><br><span class="line">    <span class="keyword">while</span> (left &lt; bitmap.width &amp;&amp; isColumnWhite(bitmap, left, top, bottom)) &#123;</span><br><span class="line">        left++</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 从右侧开始扫描，找到第一个非白色像素的列</span></span><br><span class="line">    <span class="keyword">while</span> (right &gt;= left &amp;&amp; isColumnWhite(bitmap, right, top, bottom)) &#123;</span><br><span class="line">        right--</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 裁剪图像</span></span><br><span class="line">    <span class="keyword">return</span> Bitmap.createBitmap(bitmap, left, top, right - left + <span class="number">1</span>, bottom - top + <span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">isRowWhite</span><span class="params">(bitmap: <span class="type">Bitmap</span>, row: <span class="type">Int</span>)</span></span>: <span class="built_in">Boolean</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (x <span class="keyword">in</span> <span class="number">0</span> until bitmap.width) &#123;</span><br><span class="line">        <span class="keyword">if</span> (bitmap.hasColor(x, row)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">isColumnWhite</span><span class="params">(bitmap: <span class="type">Bitmap</span>, column: <span class="type">Int</span>, top: <span class="type">Int</span>, bottom: <span class="type">Int</span>)</span></span>: <span class="built_in">Boolean</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (y <span class="keyword">in</span> top..bottom) &#123;</span><br><span class="line">        <span class="keyword">if</span> (bitmap.hasColor(column, y)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> Bitmap.<span class="title">hasColor</span><span class="params">(x: <span class="type">Int</span>, y: <span class="type">Int</span>)</span></span>: <span class="built_in">Boolean</span> &#123;</span><br><span class="line">    <span class="keyword">val</span> p = getPixel(x, y)</span><br><span class="line">    <span class="keyword">return</span> p != Color.WHITE &amp;&amp; p != Color.TRANSPARENT</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;源码&quot;&gt;&lt;a href=&quot;#源码&quot; class=&quot;headerlink&quot; title=&quot;源码&quot;&gt;&lt;/a&gt;源码&lt;/h2&gt;&lt;figure class=&quot;highlight kotlin&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span</summary>
      
    
    
    
    <category term="Android" scheme="http://qomg.github.io/categories/Android/"/>
    
    
    <category term="bitmap" scheme="http://qomg.github.io/tags/bitmap/"/>
    
    <category term="clip" scheme="http://qomg.github.io/tags/clip/"/>
    
  </entry>
  
  <entry>
    <title>Android bitmap add watermark</title>
    <link href="http://qomg.github.io/2024/02/23/Android-bitmap-add-watermark/"/>
    <id>http://qomg.github.io/2024/02/23/Android-bitmap-add-watermark/</id>
    <published>2024-02-23T06:49:43.000Z</published>
    <updated>2024-02-23T06:56:54.430Z</updated>
    
    <content type="html"><![CDATA[<h2 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h2><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 支持上下左右</span></span><br><span class="line">addWatermark(originalBitmap, <span class="string">&quot;@grivos&quot;</span>, WatermarkOptions(Corner.BOTTOM_RIGHT))</span><br></pre></td></tr></table></figure><h2 id="实现源码"><a href="#实现源码" class="headerlink" title="实现源码"></a>实现源码</h2><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.graphics.*</span><br><span class="line"><span class="keyword">import</span> android.graphics.Paint.ANTI_ALIAS_FLAG</span><br><span class="line"><span class="keyword">import</span> android.graphics.Paint.DITHER_FLAG</span><br><span class="line"><span class="keyword">import</span> androidx.<span class="keyword">annotation</span>.ColorInt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">addWatermark</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    bitmap: <span class="type">Bitmap</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">    watermarkText: <span class="type">String</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">    options: <span class="type">WatermarkOptions</span> = WatermarkOptions()</span></span></span><br><span class="line">): Bitmap &#123;</span><br><span class="line">    <span class="keyword">val</span> result = bitmap.copy(bitmap.config, <span class="literal">true</span>)</span><br><span class="line">    <span class="keyword">val</span> canvas = Canvas(result)</span><br><span class="line">    <span class="keyword">val</span> paint = Paint(ANTI_ALIAS_FLAG or DITHER_FLAG)</span><br><span class="line">    paint.textAlign = <span class="keyword">when</span> (options.corner) &#123;</span><br><span class="line">        Corner.TOP_LEFT,</span><br><span class="line">        Corner.BOTTOM_LEFT -&gt; Paint.Align.LEFT</span><br><span class="line">        Corner.TOP_RIGHT,</span><br><span class="line">        Corner.BOTTOM_RIGHT -&gt; Paint.Align.RIGHT</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">val</span> textSize = result.width * options.textSizeToWidthRatio</span><br><span class="line">    paint.textSize = textSize</span><br><span class="line">    paint.color = options.textColor</span><br><span class="line">    <span class="keyword">if</span> (options.shadowColor != <span class="literal">null</span>) &#123;</span><br><span class="line">        paint.setShadowLayer(textSize / <span class="number">2</span>, <span class="number">0f</span>, <span class="number">0f</span>, options.shadowColor)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (options.typeface != <span class="literal">null</span>) &#123;</span><br><span class="line">        paint.typeface = options.typeface</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">val</span> padding = result.width * options.paddingToWidthRatio</span><br><span class="line">    <span class="keyword">val</span> coordinates =</span><br><span class="line">        calculateCoordinates(watermarkText, paint, options, canvas.width, canvas.height, padding)</span><br><span class="line">    canvas.drawText(watermarkText, coordinates.x, coordinates.y, paint)</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">calculateCoordinates</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    watermarkText: <span class="type">String</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">    paint: <span class="type">Paint</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">    options: <span class="type">WatermarkOptions</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">    width: <span class="type">Int</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">    height: <span class="type">Int</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">    padding: <span class="type">Float</span></span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>: PointF &#123;</span><br><span class="line">    <span class="keyword">val</span> x = <span class="keyword">when</span> (options.corner) &#123;</span><br><span class="line">        Corner.TOP_LEFT,</span><br><span class="line">        Corner.BOTTOM_LEFT -&gt; &#123;</span><br><span class="line">            padding</span><br><span class="line">        &#125;</span><br><span class="line">        Corner.TOP_RIGHT,</span><br><span class="line">        Corner.BOTTOM_RIGHT -&gt; &#123;</span><br><span class="line">            width - padding</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">val</span> y = <span class="keyword">when</span> (options.corner) &#123;</span><br><span class="line">        Corner.BOTTOM_LEFT,</span><br><span class="line">        Corner.BOTTOM_RIGHT -&gt; &#123;</span><br><span class="line">            height - padding</span><br><span class="line">        &#125;</span><br><span class="line">        Corner.TOP_LEFT,</span><br><span class="line">        Corner.TOP_RIGHT -&gt; &#123;</span><br><span class="line">            <span class="keyword">val</span> bounds = Rect()</span><br><span class="line">            paint.getTextBounds(watermarkText, <span class="number">0</span>, watermarkText.length, bounds)</span><br><span class="line">            <span class="keyword">val</span> textHeight = bounds.height()</span><br><span class="line">            textHeight + padding</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> PointF(x, y)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> <span class="keyword">class</span> <span class="title class_">Corner</span> &#123;</span><br><span class="line">    TOP_LEFT,</span><br><span class="line">    TOP_RIGHT,</span><br><span class="line">    BOTTOM_LEFT,</span><br><span class="line">    BOTTOM_RIGHT,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">data</span> <span class="keyword">class</span> <span class="title class_">WatermarkOptions</span>(</span><br><span class="line">    <span class="keyword">val</span> corner: Corner = Corner.BOTTOM_RIGHT,</span><br><span class="line">    <span class="keyword">val</span> textSizeToWidthRatio: <span class="built_in">Float</span> = <span class="number">0.04f</span>,</span><br><span class="line">    <span class="keyword">val</span> paddingToWidthRatio: <span class="built_in">Float</span> = <span class="number">0.03f</span>,</span><br><span class="line">    <span class="meta">@ColorInt</span> <span class="keyword">val</span> textColor: <span class="built_in">Int</span> = Color.WHITE,</span><br><span class="line">    <span class="meta">@ColorInt</span> <span class="keyword">val</span> shadowColor: <span class="built_in">Int</span>? = Color.BLACK,</span><br><span class="line">    <span class="keyword">val</span> typeface: Typeface? = <span class="literal">null</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;使用方式&quot;&gt;&lt;a href=&quot;#使用方式&quot; class=&quot;headerlink&quot; title=&quot;使用方式&quot;&gt;&lt;/a&gt;使用方式&lt;/h2&gt;&lt;figure class=&quot;highlight kotlin&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;p</summary>
      
    
    
    
    <category term="Android" scheme="http://qomg.github.io/categories/Android/"/>
    
    
    <category term="bitmap" scheme="http://qomg.github.io/tags/bitmap/"/>
    
    <category term="watermark" scheme="http://qomg.github.io/tags/watermark/"/>
    
  </entry>
  
  <entry>
    <title>gradle resolution rules</title>
    <link href="http://qomg.github.io/2023/04/16/gradle-resolution-rules/"/>
    <id>http://qomg.github.io/2023/04/16/gradle-resolution-rules/</id>
    <published>2023-04-16T07:55:09.000Z</published>
    <updated>2024-02-23T06:48:04.012Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://docs.gradle.org/current/userguide/resolution_rules.html">Customizing resolution of a dependency directly</a></p><h2 id="use-variant-define-attributes"><a href="#use-variant-define-attributes" class="headerlink" title="use variant define attributes"></a>use variant define attributes</h2><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">configurations.all &#123;</span><br><span class="line">    resolutionStrategy.dependencySubstitution &#123;</span><br><span class="line">        substitute(variant(module(<span class="string">&quot;com.google.guava:guava:28.2-jre&quot;</span>)) &#123;</span><br><span class="line">            attributes &#123;</span><br><span class="line">                attribute(Category.CATEGORY_ATTRIBUTE, objects.named(Category.REGULAR_PLATFORM))</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).using(module(<span class="string">&quot;com.google.guava:guava:28.2-jre&quot;</span>))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="specify-capabilities"><a href="#specify-capabilities" class="headerlink" title="specify capabilities"></a>specify capabilities</h2><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">configurations.testCompileClasspath &#123;</span><br><span class="line">    resolutionStrategy.dependencySubstitution &#123;</span><br><span class="line">        substitute(module(<span class="string">&quot;com.acme:lib:1.0&quot;</span>)).using(variant(module(<span class="string">&quot;com.acme:lib:1.0&quot;</span>)) &#123;</span><br><span class="line">            capabilities &#123;</span><br><span class="line">                requireCapability(<span class="string">&quot;com.acme:lib-test-fixtures&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://docs.gradle.org/current/userguide/resolution_rules.html&quot;&gt;Customizing resolution of a dependency directly&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=</summary>
      
    
    
    
    <category term="Gradle" scheme="http://qomg.github.io/categories/Gradle/"/>
    
    
    <category term="gradle" scheme="http://qomg.github.io/tags/gradle/"/>
    
    <category term="dependency" scheme="http://qomg.github.io/tags/dependency/"/>
    
    <category term="resolutionStrategy" scheme="http://qomg.github.io/tags/resolutionStrategy/"/>
    
  </entry>
  
  <entry>
    <title>clean .git folder</title>
    <link href="http://qomg.github.io/2023/04/16/clean-git-folder/"/>
    <id>http://qomg.github.io/2023/04/16/clean-git-folder/</id>
    <published>2023-04-16T07:49:59.000Z</published>
    <updated>2023-04-16T07:53:23.072Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://stackoverflow.com/questions/5277467/how-can-i-clean-my-git-folder-cleaned-up-my-project-directory-but-git-is-sti">clean .git folder</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git reflog expire --expire=now --all</span><br><span class="line">git repack -ad  <span class="comment"># Remove dangling objects from packfiles</span></span><br><span class="line">git prune       <span class="comment"># Remove dangling loose objects</span></span><br><span class="line"></span><br><span class="line">git gc --aggressive --prune=now</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/5277467/how-can-i-clean-my-git-folder-cleaned-up-my-project-directory-but-git-is-sti&quot;&gt;clean </summary>
      
    
    
    
    <category term="Git" scheme="http://qomg.github.io/categories/Git/"/>
    
    
    <category term="clean" scheme="http://qomg.github.io/tags/clean/"/>
    
    <category term="gc" scheme="http://qomg.github.io/tags/gc/"/>
    
  </entry>
  
  <entry>
    <title>android fastlane</title>
    <link href="http://qomg.github.io/2023/04/16/android-fastlane/"/>
    <id>http://qomg.github.io/2023/04/16/android-fastlane/</id>
    <published>2023-04-16T07:47:43.000Z</published>
    <updated>2023-04-16T07:53:23.072Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://docs.fastlane.tools/actions/gradle/">fastlane gradle</a></p><p><a href="https://docs.fastlane.tools/actions/build_android_app/">build android app</a></p><p>fastlane action gradle</p><h2 id="打包"><a href="#打包" class="headerlink" title="打包"></a>打包</h2><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">gradle(</span><br><span class="line">  <span class="symbol">task:</span> <span class="string">&quot;packTstAndProRelease&quot;</span>,</span><br><span class="line">  <span class="comment">#tasks: [&quot;clean&quot;, &quot;assemble&quot;]</span></span><br><span class="line">  <span class="symbol">flavor:</span> <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="symbol">build_type:</span> <span class="string">&quot;Release&quot;</span>,</span><br><span class="line">  <span class="symbol">print_command:</span> <span class="literal">false</span>,</span><br><span class="line">  <span class="symbol">print_command_output:</span> <span class="literal">false</span>,</span><br><span class="line">  <span class="comment">#flags: &quot;--exitcode --xml file.xml&quot;</span></span><br><span class="line">  <span class="comment"># 配置属性</span></span><br><span class="line">  <span class="symbol">properties:</span> &#123;</span><br><span class="line">    <span class="comment"># 强制修改版本号 </span></span><br><span class="line">    <span class="string">&quot;android.injected.version.code&quot;</span> =&gt; <span class="number">100</span>,</span><br><span class="line">    <span class="string">&quot;android.injected.version.name&quot;</span> =&gt; <span class="string">&quot;1.0.0&quot;</span>,</span><br><span class="line">    <span class="comment"># 打包签名</span></span><br><span class="line">    <span class="string">&quot;android.injected.signing.store.file&quot;</span> =&gt; <span class="string">&quot;keystore.jks&quot;</span>,</span><br><span class="line">    <span class="string">&quot;android.injected.signing.store.password&quot;</span> =&gt; <span class="string">&quot;store_password&quot;</span>,</span><br><span class="line">    <span class="string">&quot;android.injected.signing.key.alias&quot;</span> =&gt; <span class="string">&quot;key_alias&quot;</span>,</span><br><span class="line">    <span class="string">&quot;android.injected.signing.key.password&quot;</span> =&gt; <span class="string">&quot;key_password&quot;</span>,</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h2 id="清理"><a href="#清理" class="headerlink" title="清理"></a>清理</h2><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gradle(</span><br><span class="line">  <span class="symbol">task:</span> <span class="string">&quot;clean&quot;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://docs.fastlane.tools/actions/gradle/&quot;&gt;fastlane gradle&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.fastlane.tools/actions/build_andro</summary>
      
    
    
    
    <category term="Android" scheme="http://qomg.github.io/categories/Android/"/>
    
    
    <category term="fastlane" scheme="http://qomg.github.io/tags/fastlane/"/>
    
  </entry>
  
  <entry>
    <title>android clean architecture</title>
    <link href="http://qomg.github.io/2023/04/16/android-clean-architecture/"/>
    <id>http://qomg.github.io/2023/04/16/android-clean-architecture/</id>
    <published>2023-04-16T02:54:25.000Z</published>
    <updated>2023-04-16T03:01:35.241Z</updated>
    
    <content type="html"><![CDATA[<h3 id="android-clean-architecture"><a href="#android-clean-architecture" class="headerlink" title="android clean architecture"></a>android clean architecture</h3><p><a href="https://github.com/sanogueralorenzo/Android-Kotlin-Clean-Architecture">Android-Kotlin-Clean-Architecture</a></p><ul><li>Maintainance of the project gets easierWhen we add more and more code to a project, the project gets more and more complicated and as a result, maintaining the project gets harder, adding new features require more time and energy and fixing bugs get cumbersome. In fact, this is not even a linear relationship but rather an exponential one! So more code equals more complexity equals more headaches!Using a modular approach greatly reduces this problem because instead of having one big project we have multiple smaller one that easier to manage.</li><li>Modules can be reusedIf you have more than one project, it is very likely that some code is repeated between them, by using a modular approach you can write your code just once and use them as many times as you want. This will hugely decrease the development time, especially when you want to make some changes to the code.</li><li>You write better code and better APIsWorking with modular approach forces you to think more about the code and relationship between the different parts, hence letting you write better code.</li><li>You can take advantage of open source communityYou probably don’t want to share your whole project on the internet and even if you do that may not be very helpful to other developers but you can share the parts of your project that are more general, like the part that crops the photo or uploads files or whatever. By doing this you get all the benefits of open sourcing without exposing your project or your idea to the world.</li></ul><h3 id="android-clean-architecture-sample"><a href="#android-clean-architecture-sample" class="headerlink" title="android clean architecture sample"></a>android clean architecture sample</h3><ol><li><a href="https://github.com/chrisbanes/tivi">Tivi</a></li><li><a href="https://github.com/android10/Android-CleanArchitecture">Android-CleanArchitecture</a></li><li><a href="https://github.com/skydoves/Sample-MVVM-CleanArchitecture">Sample-MVVM-CleanArchitecture</a></li><li><a href="https://github.com/android/architecture-components-samples/tree/master/GithubBrowserSample">GithubBrowserSample</a></li><li><a href="https://github.com/android/plaid">Plaid</a></li><li><a href="https://github.com/guilhermebferreira/Simple-Clean-Architecture-Example">Simple-Clean-Architecture-Example</a></li><li><a href="https://github.com/futurice/android-best-practices/tree/master/templates/project-templates/android-sample-app">Android-Sample-App</a></li><li><a href="https://github.com/android10/Android-CleanArchitecture/tree/rxjava2">RxAndroidCleanArchitecture</a></li><li><a href="https://github.com/richardbruno/MarvelHeroes">MarvelHeroes</a></li><li><a href="https://github.com/bufferapp/android-clean-boilerplate">Android-Clean-Boilerplate</a></li><li><a href="https://github.com/android10/Android-CleanArchitecture/tree/rxjava2-kotlin-sample">CleanArchitectureRxJava</a></li><li><a href="https://github.com/tausiqd/news-android-clean-architecture">news-android-clean-architecture</a></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;android-clean-architecture&quot;&gt;&lt;a href=&quot;#android-clean-architecture&quot; class=&quot;headerlink&quot; title=&quot;android clean architecture&quot;&gt;&lt;/a&gt;android </summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Chinese Copywriting Tutorial</title>
    <link href="http://qomg.github.io/2023/04/15/chinese-copywriting-tutorial/"/>
    <id>http://qomg.github.io/2023/04/15/chinese-copywriting-tutorial/</id>
    <published>2023-04-15T11:36:28.000Z</published>
    <updated>2023-04-15T12:17:36.833Z</updated>
    
    <content type="html"><![CDATA[<h1 id="中文文案排版指北"><a href="#中文文案排版指北" class="headerlink" title="中文文案排版指北"></a><a href="https://github.com/sparanoid/chinese-copywriting-guidelines/raw/master/README.zh-Hans.md">中文文案排版指北</a></h1><p>统一中文文案、排版的相关用法，降低团队成员之间的沟通成本，增强网站气质。</p><hr><h2 id="空格"><a href="#空格" class="headerlink" title="空格"></a>空格</h2><blockquote><p>「有研究显示，打字的时候不喜欢在中文和英文之间加空格的人，感情路都走得很辛苦，有七成的比例会在 34 岁的时候跟自己不爱的人结婚，而其余三成的人最后只能把遗产留给自己的猫。毕竟爱情跟书写都需要适时地留白。</p><p>与大家共勉之。」——<a href="https://github.com/vinta/pangu.js">vinta/paranoid-auto-spacing</a></p></blockquote><h3 id="中英文之间需要增加空格"><a href="#中英文之间需要增加空格" class="headerlink" title="中英文之间需要增加空格"></a>中英文之间需要增加空格</h3><p>正确：</p><blockquote><p>在 LeanCloud 上，数据存储是围绕 <code>AVObject</code> 进行的。</p></blockquote><p>错误：</p><blockquote><p>在LeanCloud上，数据存储是围绕<code>AVObject</code>进行的。</p><p>在 LeanCloud上，数据存储是围绕<code>AVObject</code> 进行的。</p></blockquote><p>完整的正确用法：</p><blockquote><p>在 LeanCloud 上，数据存储是围绕 <code>AVObject</code> 进行的。每个 <code>AVObject</code> 都包含了与 JSON 兼容的 key-value 对应的数据。数据是 schema-free 的，你不需要在每个 <code>AVObject</code> 上提前指定存在哪些键，只要直接设定对应的 key-value 即可。</p></blockquote><p>例外：「豆瓣FM」等产品名词，按照官方所定义的格式书写。</p><h3 id="中文与数字之间需要增加空格"><a href="#中文与数字之间需要增加空格" class="headerlink" title="中文与数字之间需要增加空格"></a>中文与数字之间需要增加空格</h3><p>正确：</p><blockquote><p>今天出去买菜花了 5000 元。</p></blockquote><p>错误：</p><blockquote><p>今天出去买菜花了 5000元。</p><p>今天出去买菜花了5000元。</p></blockquote><h3 id="数字与单位之间需要增加空格"><a href="#数字与单位之间需要增加空格" class="headerlink" title="数字与单位之间需要增加空格"></a>数字与单位之间需要增加空格</h3><p>正确：</p><blockquote><p>我家的光纤入屋宽带有 10 Gbps，SSD 一共有 20 TB</p></blockquote><p>错误：</p><blockquote><p>我家的光纤入屋宽带有 10Gbps，SSD 一共有 20TB</p></blockquote><p>例外：度数／百分比与数字之间不需要增加空格：</p><p>正确：</p><blockquote><p>角度为 90° 的角，就是直角。</p><p>新 MacBook Pro 有 15% 的 CPU 性能提升。</p></blockquote><p>错误：</p><blockquote><p>角度为 90 ° 的角，就是直角。</p><p>新 MacBook Pro 有 15 % 的 CPU 性能提升。</p></blockquote><h3 id="全角标点与其他字符之间不加空格"><a href="#全角标点与其他字符之间不加空格" class="headerlink" title="全角标点与其他字符之间不加空格"></a>全角标点与其他字符之间不加空格</h3><p>正确：</p><blockquote><p>刚刚买了一部 iPhone，好开心！</p></blockquote><p>错误：</p><blockquote><p>刚刚买了一部 iPhone ，好开心！</p><p>刚刚买了一部 iPhone， 好开心！</p></blockquote><h3 id="用-text-spacing-来挽救？"><a href="#用-text-spacing-来挽救？" class="headerlink" title="用 text-spacing 来挽救？"></a>用 <code>text-spacing</code> 来挽救？</h3><p>CSS Text Module Level 4 的 <a href="https://www.w3.org/TR/css-text-4/#text-spacing-property"><code>text-spacing</code></a> 和 Microsoft 的 <a href="https://msdn.microsoft.com/library/ms531164(v=vs.85).aspx"><code>-ms-text-autospace</code></a> 可以实现自动为中英文之间增加空白。不过目前并未普及，另外在其他应用场景，例如 macOS、iOS、Windows 等用户界面目前并不存在这个特性，所以请继续保持随手加空格的习惯。</p><h2 id="标点符号"><a href="#标点符号" class="headerlink" title="标点符号"></a>标点符号</h2><h3 id="不重复使用标点符号"><a href="#不重复使用标点符号" class="headerlink" title="不重复使用标点符号"></a>不重复使用标点符号</h3><p>即使中国大陆的标点符号用法允许重复使用标点符号，但是这么做会破坏句子的美观性。</p><p>正确：</p><blockquote><p>德国队竟然战胜了巴西队！</p><p>她竟然对你说「喵」？！</p></blockquote><p>错误：</p><blockquote><p>德国队竟然战胜了巴西队！！</p><p>德国队竟然战胜了巴西队！！！！！！！！</p><p>她竟然对你说「喵」？？！！</p><p>她竟然对你说「喵」？！？！？？！！</p></blockquote><h2 id="全角和半角"><a href="#全角和半角" class="headerlink" title="全角和半角"></a>全角和半角</h2><p>不明白什么是全角（全形）与半角（半形）符号？请查看维基百科条目『<a href="https://zh.wikipedia.org/wiki/%E5%85%A8%E5%BD%A2%E5%92%8C%E5%8D%8A%E5%BD%A2">全角和半角</a>』。</p><h3 id="使用全角中文标点"><a href="#使用全角中文标点" class="headerlink" title="使用全角中文标点"></a>使用全角中文标点</h3><p>正确：</p><blockquote><p>嗨！你知道嘛？今天前台的小妹跟我说「喵」了哎！</p><p>核磁共振成像（NMRI）是什么原理都不知道？JFGI！</p></blockquote><p>错误：</p><blockquote><p>嗨! 你知道嘛? 今天前台的小妹跟我说 “喵” 了哎！</p><p>嗨!你知道嘛?今天前台的小妹跟我说”喵”了哎！</p><p>核磁共振成像 (NMRI) 是什么原理都不知道? JFGI!</p><p>核磁共振成像(NMRI)是什么原理都不知道?JFGI!</p></blockquote><h3 id="数字使用半角字符"><a href="#数字使用半角字符" class="headerlink" title="数字使用半角字符"></a>数字使用半角字符</h3><p>正确：</p><blockquote><p>这个蛋糕只卖 1000 元。</p></blockquote><p>错误：</p><blockquote><p>这个蛋糕只卖 １０００ 元。</p></blockquote><p>例外：在设计稿、宣传海报中如出现极少量数字的情形时，为方便文字对齐，是可以使用全角数字的。</p><h3 id="遇到完整的英文整句、特殊名词，其内容使用半角标点"><a href="#遇到完整的英文整句、特殊名词，其内容使用半角标点" class="headerlink" title="遇到完整的英文整句、特殊名词，其内容使用半角标点"></a>遇到完整的英文整句、特殊名词，其内容使用半角标点</h3><p>正确：</p><blockquote><p>乔布斯那句话是怎么说的？「Stay hungry, stay foolish.」</p><p>推荐你阅读《Hackers &amp; Painters: Big Ideas from the Computer Age》，非常的有趣。</p></blockquote><p>错误：</p><blockquote><p>乔布斯那句话是怎么说的？「Stay hungry，stay foolish。」</p><p>推荐你阅读《Hackers＆Painters：Big Ideas from the Computer Age》，非常的有趣。</p></blockquote><h2 id="名词"><a href="#名词" class="headerlink" title="名词"></a>名词</h2><h3 id="专有名词使用正确的大小写"><a href="#专有名词使用正确的大小写" class="headerlink" title="专有名词使用正确的大小写"></a>专有名词使用正确的大小写</h3><p>大小写相关用法原属于英文书写范畴，不属于本 wiki 讨论内容，在这里只对部分易错用法进行简述。</p><p>正确：</p><blockquote><p>使用 GitHub 登录</p><p>我们的客户有 GitHub、Foursquare、Microsoft Corporation、Google、Facebook, Inc.。</p></blockquote><p>错误：</p><blockquote><p>使用 github 登录</p><p>使用 GITHUB 登录</p><p>使用 Github 登录</p><p>使用 gitHub 登录</p><p>使用 gｲんĤЦ8 登录</p><p>我们的客户有 github、foursquare、microsoft corporation、google、facebook, inc.。</p><p>我们的客户有 GITHUB、FOURSQUARE、MICROSOFT CORPORATION、GOOGLE、FACEBOOK, INC.。</p><p>我们的客户有 Github、FourSquare、MicroSoft Corporation、Google、FaceBook, Inc.。</p><p>我们的客户有 gitHub、fourSquare、microSoft Corporation、google、faceBook, Inc.。</p><p>我们的客户有 gｲんĤЦ8、ｷouЯƧquﾑгє、๓เςг๏ร๏Ŧt ς๏гק๏гคtเ๏ภn、900913、ƒ4ᄃëв๏๏к, IПᄃ.。</p></blockquote><p>注意：当网页中需要配合整体视觉风格而出现全部大写／小写的情形，HTML 中请使用标淮的大小写规范进行书写；并通过 <code>text-transform: uppercase;</code>／<code>text-transform: lowercase;</code> 对表现形式进行定义。</p><h3 id="不要使用不地道的缩写"><a href="#不要使用不地道的缩写" class="headerlink" title="不要使用不地道的缩写"></a>不要使用不地道的缩写</h3><p>正确：</p><blockquote><p>我们需要一位熟悉 TypeScript、HTML5，至少理解一种框架（如 React、Next.js）的前端开发者。</p></blockquote><p>错误：</p><blockquote><p>我们需要一位熟悉 Ts、h5，至少理解一种框架（如 RJS、nextjs）的 FED。</p></blockquote><h2 id="争议"><a href="#争议" class="headerlink" title="争议"></a>争议</h2><p>以下用法略带有个人色彩，即：无论是否遵循下述规则，从语法的角度来讲都是<strong>正确</strong>的。</p><h3 id="链接之间增加空格"><a href="#链接之间增加空格" class="headerlink" title="链接之间增加空格"></a>链接之间增加空格</h3><p>用法：</p><blockquote><p>请 <a href="#">提交一个 issue</a> 并分配给相关同事。</p><p>访问我们网站的最新动态，请 <a href="#">点击这里</a> 进行订阅！</p></blockquote><p>对比用法：</p><blockquote><p>请<a href="#">提交一个 issue</a>并分配给相关同事。</p><p>访问我们网站的最新动态，请<a href="#">点击这里</a>进行订阅！</p></blockquote><h3 id="简体中文使用直角引号"><a href="#简体中文使用直角引号" class="headerlink" title="简体中文使用直角引号"></a>简体中文使用直角引号</h3><p>用法：</p><blockquote><p>「老师，『有条不紊』的『紊』是什么意思？」</p></blockquote><p>对比用法：</p><blockquote><p>“老师，‘有条不紊’的‘紊’是什么意思？”</p></blockquote><h2 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h2><table><thead><tr><th>仓库</th><th>系列</th><th>语言</th></tr></thead><tbody><tr><td><a href="https://github.com/vinta/pangu.js">pangu.js</a></td><td>pangu</td><td>JavaScript</td></tr><tr><td><a href="https://github.com/vinta/pangu">pangu-go</a></td><td>pangu</td><td>Go</td></tr><tr><td><a href="https://github.com/vinta/pangu.java">pangu.java</a></td><td>pangu</td><td>Java</td></tr><tr><td><a href="https://github.com/vinta/pangu.py">pangu.py</a></td><td>pangu</td><td>Python</td></tr><tr><td><a href="https://github.com/dlackty/pangu.rb">pangu.rb</a></td><td>pangu</td><td>Ruby</td></tr><tr><td><a href="https://github.com/cchlorine/pangu.php">pangu.php</a></td><td>pangu</td><td>PHP</td></tr><tr><td><a href="https://github.com/hotoo/pangu.vim">pangu.vim</a></td><td>pangu</td><td>Vim</td></tr><tr><td><a href="https://github.com/serkodev/vue-pangu">vue-pangu</a></td><td>pangu</td><td>Vue.js (Web Converter)</td></tr><tr><td><a href="https://github.com/huacnlee/autocorrect">autocorrect</a></td><td>autocorrect</td><td>Rust, WASM, CLI tool</td></tr><tr><td><a href="https://github.com/huacnlee/autocorrect/tree/main/autocorrect-node">autocorrect-node</a></td><td>autocorrect</td><td>Node.js</td></tr><tr><td><a href="https://github.com/huacnlee/autocorrect/tree/main/autocorrect-py">autocorrect-py</a></td><td>autocorrect</td><td>Python</td></tr><tr><td><a href="https://github.com/huacnlee/autocorrect/tree/main/autocorrect-rb">autocorrect-rb</a></td><td>autocorrect</td><td>Ruby</td></tr><tr><td><a href="https://github.com/huacnlee/autocorrect/tree/main/autocorrect-java">autocorrect-java</a></td><td>autocorrect</td><td>Java</td></tr><tr><td><a href="https://github.com/longbridgeapp/autocorrect">autocorrect-go</a></td><td>autocorrect</td><td>Go</td></tr><tr><td><a href="https://github.com/NauxLiu/auto-correct">autocorrect-php</a></td><td>autocorrect</td><td>PHP</td></tr><tr><td><a href="https://marketplace.visualstudio.com/items?itemName=huacnlee.autocorrect">autocorrect-vscode</a></td><td>autocorrect</td><td>VS Code Extension</td></tr><tr><td><a href="https://plugins.jetbrains.com/plugin/20244-autocorrect">autocorrect-idea-plugin</a></td><td>autocorrect</td><td>Intellij Platform Plugin</td></tr><tr><td><a href="https://github.com/jxlwqq/chinese-typesetting">jxlwqq/chinese-typesetting</a></td><td>other</td><td>PHP</td></tr><tr><td><a href="https://github.com/sparanoid/space-lover">sparanoid/space-lover</a></td><td>other</td><td>PHP (WordPress)</td></tr><tr><td><a href="https://github.com/sparanoid/grunt-auto-spacing">sparanoid/grunt-auto-spacing</a></td><td>other</td><td>Node.js (Grunt)</td></tr><tr><td><a href="https://github.com/hjiang/scripts/blob/master/add-space-between-latin-and-cjk">hjiang/scripts/add-space-between-latin-and-cjk</a></td><td>other</td><td>Python</td></tr><tr><td><a href="https://github.com/hustcc/hint">hustcc/hint</a></td><td>other</td><td>Python</td></tr><tr><td><a href="https://github.com/n0vad3v/Tekorrect">n0vad3v/Tekorrect</a></td><td>other</td><td>Python</td></tr></tbody></table><h2 id="谁在这样做？"><a href="#谁在这样做？" class="headerlink" title="谁在这样做？"></a>谁在这样做？</h2><table><thead><tr><th>网站</th><th>文案</th><th>UGC</th></tr></thead><tbody><tr><td><a href="https://www.apple.com/cn/">Apple 中国</a></td><td>是</td><td>N/A</td></tr><tr><td><a href="https://www.apple.com/hk/">Apple 香港</a></td><td>是</td><td>N/A</td></tr><tr><td><a href="https://www.apple.com/tw/">Apple 台湾</a></td><td>是</td><td>N/A</td></tr><tr><td><a href="https://www.microsoft.com/zh-cn/">Microsoft 中国</a></td><td>是</td><td>N/A</td></tr><tr><td><a href="https://www.microsoft.com/zh-hk/">Microsoft 香港</a></td><td>是</td><td>N/A</td></tr><tr><td><a href="https://www.microsoft.com/zh-tw/">Microsoft 台湾</a></td><td>是</td><td>N/A</td></tr><tr><td><a href="https://leancloud.cn/">LeanCloud</a></td><td>是</td><td>N/A</td></tr><tr><td><a href="https://www.v2ex.com/">V2EX</a></td><td>是</td><td>是</td></tr><tr><td><a href="https://apple4us.com/">Apple4us</a></td><td>是</td><td>N/A</td></tr><tr><td><a href="https://ruby-china.org/">Ruby China</a></td><td>是</td><td>是</td></tr><tr><td><a href="https://sspai.com/">少数派</a></td><td>是</td><td>N/A</td></tr></tbody></table><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><ul><li><a href="https://www.thoughtco.com/guidelines-for-using-capital-letters-1691724">Guidelines for Using Capital Letters - ThoughtCo.</a></li><li><a href="https://en.wikipedia.org/wiki/Letter_case">Letter case - Wikipedia</a></li><li><a href="https://en.oxforddictionaries.com/grammar/punctuation">Punctuation - Oxford Dictionaries</a></li><li><a href="https://owl.english.purdue.edu/owl/section/1/6/">Punctuation - The Purdue OWL</a></li><li><a href="https://www.wikihow.com/Use-English-Punctuation-Correctly">How to Use English Punctuation Correctly - wikiHow</a></li><li><a href="https://zh.opensuse.org/index.php?title=Help:%E6%A0%BC%E5%BC%8F">格式 - openSUSE</a></li><li><a href="https://zh.wikipedia.org/wiki/%E5%85%A8%E5%BD%A2%E5%92%8C%E5%8D%8A%E5%BD%A2">全形和半形 - 维基百科</a></li><li><a href="https://zh.wikipedia.org/wiki/%E5%BC%95%E8%99%9F">引号 - 维基百科</a></li><li><a href="https://zh.wikipedia.org/wiki/%E7%96%91%E5%95%8F%E9%A9%9A%E5%98%86%E8%99%9F">疑问惊叹号 - 维基百科</a></li></ul><h2 id="Forks"><a href="#Forks" class="headerlink" title="Forks"></a>Forks</h2><p>衍生项目的用法可能与本项目存在差异。</p><ul><li><a href="https://github.com/mzlogin/chinese-copywriting-guidelines">mzlogin/chinese-copywriting-guidelines</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;中文文案排版指北&quot;&gt;&lt;a href=&quot;#中文文案排版指北&quot; class=&quot;headerlink&quot; title=&quot;中文文案排版指北&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://github.com/sparanoid/chinese-copywriting-guid</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Nowinandroid</title>
    <link href="http://qomg.github.io/2023/04/07/nowinandroid/"/>
    <id>http://qomg.github.io/2023/04/07/nowinandroid/</id>
    <published>2023-04-07T06:17:17.000Z</published>
    <updated>2023-04-15T12:17:36.855Z</updated>
    
    <content type="html"><![CDATA[<h2 id="APP设计"><a href="#APP设计" class="headerlink" title="APP设计"></a>APP设计</h2><ul><li>全部 Kotlin 代码 (包括 Gradle 脚本)</li><li>使用 <a href="https://developer.android.com/jetpack/compose?hl=zh-cn">Jetpack Compose</a> 构建 UI</li><li>采用 <a href="https://m3.material.io/">Material 3</a> 设计</li></ul><blockquote><p>页面包括：介绍、样式说明、组件、布局示例，更多内容请参考 <a href="https://www.qomg.fun/docs/nowinandroidcasestudy.pdf">Now In Android Case Study</a>。</p><p>Material 3 主题色彩定制可以在 <a href="https://m3.material.io/theme-builder#/custom">Material Theme Builder</a> 上找到。</p></blockquote><h2 id="架构学习"><a href="#架构学习" class="headerlink" title="架构学习"></a>架构学习</h2><ul><li><a href="https://developer.android.com/jetpack/guide?hl=zh-cn#recommended-app-arch">官方架构指南</a></li><li><a href="https://developer.android.com/jetpack/guide/data-layer">数据层</a></li><li><a href="https://developer.android.com/jetpack/guide/domain-layer">领域层</a></li><li><a href="https://developer.android.com/jetpack/guide/ui-layer">UI 层</a></li><li><a href="https://developer.android.com/jetpack/guide/ui-layer#udf">单向数据流</a></li></ul><h2 id="代码示例"><a href="#代码示例" class="headerlink" title="代码示例"></a>代码示例</h2><p><img src= "/img/loading.gif" data-src="https://www.qomg.fun/images/nowinandroidlayers.png" alt="主题订阅" title="主题订阅"></p><p>TODO<br>UDF 有助于实现以下几点：</p><ul><li>数据一致性。界面只有一个可信来源。</li><li>可测试性。状态来源是独立的，因此可独立于界面进行测试。</li><li>可维护性。状态的更改遵循明确定义的模式，即状态更改是用户事件及其数据拉取来源共同作用的结果。</li></ul><h2 id="模块化学习"><a href="#模块化学习" class="headerlink" title="模块化学习"></a>模块化学习</h2><ul><li>可扩展性，低耦合（屏蔽差异）</li><li>并行开发，尽量少代码冲突（统一套依赖版本管理体系）</li><li>责任链，谁开发谁负责</li><li>封装，代码隔离（便于使用、减少细节暴露）</li><li>构建速度，减少编译时间（模块化编译）</li><li>多种版本，根据需要进行业务模块集成打包</li><li>代码复用，减少重复开发</li></ul><p><img src= "/img/loading.gif" data-src="https://www.qomg.fun/images/modularization-graph.drawio.png" alt="模块关系图" title="模块关系图"></p><h2 id="模块化代码示例"><a href="#模块化代码示例" class="headerlink" title="模块化代码示例"></a>模块化代码示例</h2><ul><li>依赖注入，处理依赖关系</li><li>网络封装</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;APP设计&quot;&gt;&lt;a href=&quot;#APP设计&quot; class=&quot;headerlink&quot; title=&quot;APP设计&quot;&gt;&lt;/a&gt;APP设计&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;全部 Kotlin 代码 (包括 Gradle 脚本)&lt;/li&gt;
&lt;li&gt;使用 &lt;a href=&quot;htt</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>projectDependencyGraph</title>
    <link href="http://qomg.github.io/2023/04/06/projectdependencygraph/"/>
    <id>http://qomg.github.io/2023/04/06/projectdependencygraph/</id>
    <published>2023-04-06T08:45:18.000Z</published>
    <updated>2023-04-15T12:17:36.857Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://github.com/JakeWharton/SdkSearch/raw/master/gradle/projectDependencyGraph.gradle">projectDependencyGraph.gradle</a></p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line">task projectDependencyGraph &#123;</span><br><span class="line">  doLast &#123;</span><br><span class="line">    <span class="keyword">def</span> dot = <span class="keyword">new</span> File(rootProject.buildDir, <span class="string">&#x27;reports/dependency-graph/project.dot&#x27;</span>)</span><br><span class="line">    dot.parentFile.mkdirs()</span><br><span class="line">    dot.delete()</span><br><span class="line"></span><br><span class="line">    dot &lt;&lt; <span class="string">&#x27;digraph &#123;\n&#x27;</span></span><br><span class="line">    dot &lt;&lt; <span class="string">&quot;  graph [label=\&quot;$&#123;rootProject.name&#125;\\n \&quot;,labelloc=t,fontsize=30,ranksep=1.4];\n&quot;</span></span><br><span class="line">    dot &lt;&lt; <span class="string">&#x27;  node [style=filled, fillcolor=&quot;#bbbbbb&quot;];\n&#x27;</span></span><br><span class="line">    dot &lt;&lt; <span class="string">&#x27;  rankdir=TB;\n&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> rootProjects = []</span><br><span class="line">    <span class="keyword">def</span> queue = [rootProject]</span><br><span class="line">    <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">      <span class="keyword">def</span> project = queue.remove(<span class="number">0</span>)</span><br><span class="line">      rootProjects.add(project)</span><br><span class="line">      queue.addAll(project.childProjects.values())</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> projects = <span class="keyword">new</span> LinkedHashSet&lt;Project&gt;()</span><br><span class="line">    <span class="keyword">def</span> dependencies = <span class="keyword">new</span> LinkedHashMap&lt;Tuple2&lt;Project, Project&gt;, List&lt;String&gt;&gt;()</span><br><span class="line">    <span class="keyword">def</span> multiplatformProjects = []</span><br><span class="line">    <span class="keyword">def</span> jsProjects = []</span><br><span class="line">    <span class="keyword">def</span> androidProjects = []</span><br><span class="line">    <span class="keyword">def</span> javaProjects = []</span><br><span class="line"></span><br><span class="line">    queue = [rootProject]</span><br><span class="line">    <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">      <span class="keyword">def</span> project = queue.remove(<span class="number">0</span>)</span><br><span class="line">      queue.addAll(project.childProjects.values())</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (project.plugins.hasPlugin(<span class="string">&#x27;org.jetbrains.kotlin.multiplatform&#x27;</span>)) &#123;</span><br><span class="line">        multiplatformProjects.add(project)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (project.plugins.hasPlugin(<span class="string">&#x27;org.jetbrains.kotlin.js&#x27;</span>)) &#123;</span><br><span class="line">        jsProjects.add(project)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (project.plugins.hasPlugin(<span class="string">&#x27;com.android.library&#x27;</span>) || project.plugins.hasPlugin(<span class="string">&#x27;com.android.application&#x27;</span>)) &#123;</span><br><span class="line">        androidProjects.add(project)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (project.plugins.hasPlugin(<span class="string">&#x27;java-library&#x27;</span>) || project.plugins.hasPlugin(<span class="string">&#x27;java&#x27;</span>)) &#123;</span><br><span class="line">        javaProjects.add(project)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      project.configurations.all &#123; config -&gt;</span><br><span class="line">        config.dependencies</span><br><span class="line">                .withType(ProjectDependency)</span><br><span class="line">                .collect &#123; it.dependencyProject &#125;</span><br><span class="line">                .each &#123; dependency -&gt;</span><br><span class="line">          projects.add(project)</span><br><span class="line">          projects.add(dependency)</span><br><span class="line">          rootProjects.remove(dependency)</span><br><span class="line"></span><br><span class="line">          <span class="keyword">def</span> graphKey = <span class="keyword">new</span> Tuple2&lt;Project, Project&gt;(project, dependency)</span><br><span class="line">          <span class="keyword">def</span> traits = dependencies.computeIfAbsent(graphKey) &#123; <span class="keyword">new</span> ArrayList&lt;String&gt;() &#125;</span><br><span class="line"></span><br><span class="line">          <span class="keyword">if</span> (config.name.toLowerCase().endsWith(<span class="string">&#x27;implementation&#x27;</span>)) &#123;</span><br><span class="line">            traits.add(<span class="string">&#x27;style=dotted&#x27;</span>)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    projects = projects.sort &#123; it.path &#125;</span><br><span class="line"></span><br><span class="line">    dot &lt;&lt; <span class="string">&#x27;\n  # Projects\n\n&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> (project <span class="keyword">in</span> projects) &#123;</span><br><span class="line">      <span class="keyword">def</span> traits = []</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (rootProjects.contains(project)) &#123;</span><br><span class="line">        traits.add(<span class="string">&#x27;shape=box&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (multiplatformProjects.contains(project)) &#123;</span><br><span class="line">        traits.add(<span class="string">&#x27;fillcolor=&quot;#ffd2b3&quot;&#x27;</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (jsProjects.contains(project)) &#123;</span><br><span class="line">        traits.add(<span class="string">&#x27;fillcolor=&quot;#ffffba&quot;&#x27;</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (androidProjects.contains(project)) &#123;</span><br><span class="line">        traits.add(<span class="string">&#x27;fillcolor=&quot;#baffc9&quot;&#x27;</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (javaProjects.contains(project)) &#123;</span><br><span class="line">        traits.add(<span class="string">&#x27;fillcolor=&quot;#ffb3ba&quot;&#x27;</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        traits.add(<span class="string">&#x27;fillcolor=&quot;#eeeeee&quot;&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      dot &lt;&lt; <span class="string">&quot;  \&quot;$&#123;project.path&#125;\&quot; [$&#123;traits.join(&quot;</span>, <span class="string">&quot;)&#125;];\n&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    dot &lt;&lt; <span class="string">&#x27;\n  &#123;rank = same;&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> (project <span class="keyword">in</span> projects) &#123;</span><br><span class="line">      <span class="keyword">if</span> (rootProjects.contains(project)) &#123;</span><br><span class="line">        dot &lt;&lt; <span class="string">&quot; \&quot;$&#123;project.path&#125;\&quot;;&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    dot &lt;&lt; <span class="string">&#x27;&#125;\n&#x27;</span></span><br><span class="line"></span><br><span class="line">    dot &lt;&lt; <span class="string">&#x27;\n  # Dependencies\n\n&#x27;</span></span><br><span class="line">    dependencies.forEach &#123; key, traits -&gt;</span><br><span class="line">      dot &lt;&lt; <span class="string">&quot;  \&quot;$&#123;key.first.path&#125;\&quot; -&gt; \&quot;$&#123;key.second.path&#125;\&quot;&quot;</span></span><br><span class="line">      <span class="keyword">if</span> (!traits.isEmpty()) &#123;</span><br><span class="line">        dot &lt;&lt; <span class="string">&quot; [$&#123;traits.join(&quot;</span>, <span class="string">&quot;)&#125;]&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">      dot &lt;&lt; <span class="string">&#x27;\n&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    dot &lt;&lt; <span class="string">&#x27;&#125;\n&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> p = <span class="string">&#x27;dot -Tpng -O project.dot&#x27;</span>.execute([], dot.parentFile)</span><br><span class="line">    p.waitFor()</span><br><span class="line">    <span class="keyword">if</span> (p.exitValue() != <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(p.errorStream.text)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    println(<span class="string">&quot;Project module dependency graph created at $&#123;dot.absolutePath&#125;.png&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://github.com/JakeWharton/SdkSearch/raw/master/gradle/projectDependencyGraph.gradle&quot;&gt;projectDependencyGraph.gradle&lt;/a&gt;&lt;/p&gt;
</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Flutter进阶学习</title>
    <link href="http://qomg.github.io/2022/12/19/flutter-learning/"/>
    <id>http://qomg.github.io/2022/12/19/flutter-learning/</id>
    <published>2022-12-19T06:09:01.000Z</published>
    <updated>2023-02-09T06:58:26.640Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Flutter进阶学习"><a href="#Flutter进阶学习" class="headerlink" title="Flutter进阶学习"></a>Flutter进阶学习</h1><h2 id="1、创建flutter组件使用示例项目"><a href="#1、创建flutter组件使用示例项目" class="headerlink" title="1、创建flutter组件使用示例项目"></a>1、创建flutter组件使用示例项目</h2><p>学习 <a href="https://api.flutter.dev/">Flutter SDK</a></p><span id="more"></span><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">flutter create --list-samples=samples.json</span><br><span class="line">cat samples.json</span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">     <span class="attr">&quot;sourcePath&quot;</span>: <span class="string">&quot;lib/src/widgets/basic.dart&quot;</span>,</span><br><span class="line">     <span class="attr">&quot;sourceLine&quot;</span>: <span class="number">1596</span>,</span><br><span class="line">     <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;material.FittedBox.1&quot;</span>,</span><br><span class="line">     <span class="attr">&quot;channel&quot;</span>: <span class="string">&quot;stable&quot;</span>,</span><br><span class="line">     <span class="attr">&quot;serial&quot;</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">     <span class="attr">&quot;package&quot;</span>: <span class="string">&quot;flutter&quot;</span>,</span><br><span class="line">     <span class="attr">&quot;library&quot;</span>: <span class="string">&quot;material&quot;</span>,</span><br><span class="line">     <span class="attr">&quot;element&quot;</span>: <span class="string">&quot;FittedBox&quot;</span>,</span><br><span class="line">     <span class="attr">&quot;file&quot;</span>: <span class="string">&quot;material.FittedBox.1.dart&quot;</span>,</span><br><span class="line">     <span class="attr">&quot;description&quot;</span>: <span class="string">&quot;In this example, the image is stretched to fill the entire [Container], which would\nnot happen normally without using FittedBox.&quot;</span></span><br><span class="line"> &#125;,</span><br><span class="line"> ...</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># samples.json 中 id</span></span><br><span class="line">flutter create -sample=material.FittedBox.1 sample_fittedbox</span><br><span class="line">code sample_fittedbox</span><br><span class="line">flutter pub get</span><br><span class="line">flutter run</span><br></pre></td></tr></table></figure><h2 id="2、app示例源码"><a href="#2、app示例源码" class="headerlink" title="2、app示例源码"></a>2、app示例源码</h2><p><a href="https://flutter.github.io/samples/#">官方示例代码库</a></p><h2 id="3、好用的工具包"><a href="#3、好用的工具包" class="headerlink" title="3、好用的工具包"></a>3、好用的工具包</h2><ul><li>模块化开发 flutter_modular</li><li>权限 permission_handler</li><li>图库 image_picker</li><li>相册 image_gallery_saver</li><li>外链 url_launcher</li><li>存储 path</li><li>网络 dio</li><li>日志 logger_flutter</li><li>动画 lottie</li><li>日历 table_calendar｜syncfusion_flutter_calendar</li><li>唯一值 uuid</li><li>二维码 qr_flutter</li><li>本地化 easy_localization</li><li>对话框 awesome_dialog</li><li>列表头 flutter_sticky_header</li><li>图片加载 image</li><li>屏幕适配 flutter_screenutil</li><li>应用信息 package_info_plus</li><li>设备信息 device_info_plus</li><li>组件绘制 after_layout</li><li>日期选择 syncfusion_flutter_datepicker</li><li>手写签名 signature</li><li>多行文本 readmore</li><li>日期格式化 date_format</li></ul><ul><li>网络请求包<ul><li>rxdart</li><li>dio</li><li>retrofit</li><li>json_annotation</li><li>json_serializable</li></ul></li></ul><h2 id="4、dart包使用"><a href="#4、dart包使用" class="headerlink" title="4、dart包使用"></a>4、dart包使用</h2><ul><li>collection</li><li>convert</li></ul><h2 id="5、关键字使用"><a href="#5、关键字使用" class="headerlink" title="5、关键字使用"></a>5、关键字使用</h2><ul><li><p>extension on 扩展</p>  <figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">http.<span class="keyword">get</span>().mapFromResponse&lt;A, B&gt;((json) =&gt; xxx);</span><br><span class="line"></span><br><span class="line"><span class="keyword">extension</span> <span class="keyword">on</span> Future&lt;http.Response&gt; &#123;</span><br><span class="line">    Future&lt;R&gt; mapFromResponse&lt;R, T&gt;(R <span class="built_in">Function</span>(T) jsonParser) <span class="keyword">async</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">final</span> response = <span class="keyword">await</span> <span class="keyword">this</span>;</span><br><span class="line">            <span class="keyword">if</span> (response.statusCode == <span class="number">200</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> jsonParser(jsonDecode(response.body));</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">throw</span> GenericHttpException();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">on</span> SocketException &#123;</span><br><span class="line">            <span class="keyword">throw</span> NoConnectionException();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Flutter进阶学习&quot;&gt;&lt;a href=&quot;#Flutter进阶学习&quot; class=&quot;headerlink&quot; title=&quot;Flutter进阶学习&quot;&gt;&lt;/a&gt;Flutter进阶学习&lt;/h1&gt;&lt;h2 id=&quot;1、创建flutter组件使用示例项目&quot;&gt;&lt;a href=&quot;#1、创建flutter组件使用示例项目&quot; class=&quot;headerlink&quot; title=&quot;1、创建flutter组件使用示例项目&quot;&gt;&lt;/a&gt;1、创建flutter组件使用示例项目&lt;/h2&gt;&lt;p&gt;学习 &lt;a href=&quot;https://api.flutter.dev/&quot;&gt;Flutter SDK&lt;/a&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="flutter" scheme="http://qomg.github.io/categories/flutter/"/>
    
    
  </entry>
  
  <entry>
    <title>Flutter UME Tutorial</title>
    <link href="http://qomg.github.io/2021/11/14/Flutter-UME-tutorial/"/>
    <id>http://qomg.github.io/2021/11/14/Flutter-UME-tutorial/</id>
    <published>2021-11-14T06:09:01.000Z</published>
    <updated>2023-02-09T06:58:47.382Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Flutter应用内调试工具UME上手"><a href="#Flutter应用内调试工具UME上手" class="headerlink" title="Flutter应用内调试工具UME上手"></a>Flutter应用内调试工具UME上手</h1><p><img src= "/img/loading.gif" data-src="/images/ume-banner.png"></p><span id="more"></span><h2 id="组件地址"><a href="#组件地址" class="headerlink" title="组件地址"></a>组件地址</h2><p>Pub 地址：</p><p><a href="https://pub.dev/packages/flutter_ume">https://pub.dev/packages/flutter_ume</a><br><a href="https://pub.flutter-io.cn/packages/flutter_ume">https://pub.flutter-io.cn/packages/flutter_ume</a></p><p>GitHub 地址：</p><p><a href="https://github.com/bytedance/flutter_ume">https://github.com/bytedance/flutter_ume</a></p><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>UME (读音：油米~) 是一个 Flutter 调试工具包，内部集成了丰富的调试小工具，设计UI、网络、监控、性能、logger 等，无论是研发、PM、还是 QA 均能使用。</p><ul><li><p>方便PM 、设计、 QA在验收过程中，查看页面内容尺寸、颜色、对齐，反馈时提供设备信息、日志等。</p></li><li><p>方便开发者调试时查看组件信息、组件渲染树、快速CodeReview、性能表现、查看内存、CPU信息等。</p></li></ul><img src= "/img/loading.gif" data-src="/images/ume-panel.png" alt="功能截图" style="zoom:50%;" /><h2 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h2><h3 id="WidgetInfo"><a href="#WidgetInfo" class="headerlink" title="WidgetInfo"></a>WidgetInfo</h3><p>查看当前选中 widget 的名称、尺寸、源码路径及所在行</p><img src= "/img/loading.gif" data-src="/images/ume-widget-info.png" alt="ume-widget-info" style="zoom:50%;" /><h3 id="WidgetDetail"><a href="#WidgetDetail" class="headerlink" title="WidgetDetail"></a>WidgetDetail</h3><p>查看当前选中 widget 的树层级，以及它 renderObject 的详细 build 链</p><img src= "/img/loading.gif" data-src="/images/ume-widget-detail-chain.png" alt="ume-widget-detail-chain" style="zoom:50%;" /><img src= "/img/loading.gif" data-src="/images/ume-widget-detail-desc.png" alt="ume-widget-detail-desc" style="zoom:50%;" /><h3 id="ColorSucker"><a href="#ColorSucker" class="headerlink" title="ColorSucker"></a>ColorSucker</h3><p>查看到当前页面任何像素的颜色，方便调试 UI。</p><img src= "/img/loading.gif" data-src="/images/ume-color-sucker.png" alt="ume-color-sucker" style="zoom:50%;" /><h3 id="AlignRuler"><a href="#AlignRuler" class="headerlink" title="AlignRuler"></a>AlignRuler</h3><p>测量当前 widget 所在屏幕的一个坐标位置，开启吸附开关后可以自动吸附最近 widget。</p><img src= "/img/loading.gif" data-src="/images/ume-align-ruler.png" alt="ume-align-ruler" style="zoom:50%;" /><h3 id="PerfOverlay"><a href="#PerfOverlay" class="headerlink" title="PerfOverlay"></a>PerfOverlay</h3><p>性能图层，raster 线程的性能情况在上面，UI 线程显示在下面。垂直的绿色条条代表的是当前帧。</p><blockquote><p>更多内容请参考 <a href="https://flutter.cn/docs/perf/rendering/ui-performance">Flutter官方-性能分析</a></p></blockquote><img src= "/img/loading.gif" data-src="/images/ume-perf-overlay.png" alt="ume-perf-overlay" style="zoom:50%;" /><h3 id="ShowCode"><a href="#ShowCode" class="headerlink" title="ShowCode"></a>ShowCode</h3><p>查看到当前页面的页面代码。</p><img src= "/img/loading.gif" data-src="/images/ume-show-code.png" alt="ume-show-code" style="zoom:50%;" /><h3 id="MemoryInfo"><a href="#MemoryInfo" class="headerlink" title="MemoryInfo"></a>MemoryInfo</h3><p>查看当前Dart VM 对象所占用情况。</p><img src= "/img/loading.gif" data-src="/images/ume-memory-info.png" alt="ume-memory-info" style="zoom:50%;" /><h3 id="CPUInfo"><a href="#CPUInfo" class="headerlink" title="CPUInfo"></a>CPUInfo</h3><p>查看当前Dart VM 对象所占用情况。</p><img src= "/img/loading.gif" data-src="/images/ume-cpu-info.png" alt="ume-cpu-info" style="zoom:50%;" /><h3 id="DeviceInfo"><a href="#DeviceInfo" class="headerlink" title="DeviceInfo"></a>DeviceInfo</h3><p>查看当前设备具体信息，名称、系统版本、是否真实设备、内核版本。</p><img src= "/img/loading.gif" data-src="/images/ume-device-info.png" alt="ume-device-info" style="zoom:50%;" /><h3 id="Console"><a href="#Console" class="headerlink" title="Console"></a>Console</h3><p>展示使用 <code>debugPrint</code> 函数打印的日志。</p><img src= "/img/loading.gif" data-src="/images/ume-console.png" alt="ume-console" style="zoom:50%;" /><h3 id="DioInspector"><a href="#DioInspector" class="headerlink" title="DioInspector"></a>DioInspector</h3><p>查看 <code>dio</code> 网络请求的日志。</p><img src= "/img/loading.gif" data-src="/images/ume-dio-inspector.png" alt="ume-dio-inspector" style="zoom:50%;" /><h3 id="自研组件"><a href="#自研组件" class="headerlink" title="自研组件"></a><a href="../custom-plugin">自研组件</a></h3><img src= "/img/loading.gif" data-src="/images/ume-analysis.png" alt="ume-analysis" style="zoom:50%;" /><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><blockquote><p>TODO</p></blockquote>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Flutter应用内调试工具UME上手&quot;&gt;&lt;a href=&quot;#Flutter应用内调试工具UME上手&quot; class=&quot;headerlink&quot; title=&quot;Flutter应用内调试工具UME上手&quot;&gt;&lt;/a&gt;Flutter应用内调试工具UME上手&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;/images/ume-banner.png&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="flutter" scheme="http://qomg.github.io/categories/flutter/"/>
    
    
    <category term="ume" scheme="http://qomg.github.io/tags/ume/"/>
    
  </entry>
  
  <entry>
    <title>Flutter Ume Custom Plugin</title>
    <link href="http://qomg.github.io/2021/11/14/custom-plugin/"/>
    <id>http://qomg.github.io/2021/11/14/custom-plugin/</id>
    <published>2021-11-14T06:08:01.000Z</published>
    <updated>2023-02-09T06:59:22.012Z</updated>
    
    <content type="html"><![CDATA[<h2 id="flutter-ume-自定义插件"><a href="#flutter-ume-自定义插件" class="headerlink" title="flutter ume 自定义插件"></a>flutter ume 自定义插件</h2><ol><li><p><code>flutter create -t package flutter_ume_kit_analysis</code> 创建一个插件包</p></li><li><p>修改插件包的 <code>pubspec.yaml</code>，添加依赖</p> <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dependencies:</span></span><br><span class="line">  <span class="attr">flutter_ume:</span> <span class="string">&#x27;&gt;=0.2.0 &lt;0.3.0&#x27;</span></span><br></pre></td></tr></table></figure></li></ol><span id="more"></span><ol start="3"><li><p>创建插件配置，实现 <code>Pluggable</code> 虚类</p> <figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter_ume/flutter_ume.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Analysis</span> <span class="keyword">implements</span> <span class="title">Pluggable</span> </span>&#123;</span><br><span class="line">    Analysis(&#123;Key? key&#125;);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@override</span></span><br><span class="line">    Widget buildWidget(BuildContext? context) &#123;</span><br><span class="line">        <span class="keyword">return</span> Container(</span><br><span class="line">            color: Colors.white,</span><br><span class="line">            width: <span class="number">100</span>,</span><br><span class="line">            height: <span class="number">100</span>,</span><br><span class="line">            child: <span class="keyword">const</span> Center(child: Text(<span class="string">&#x27;TODO&#x27;</span>)),</span><br><span class="line">        );</span><br><span class="line">    &#125; <span class="comment">// 返回插件面板</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@override</span></span><br><span class="line">    <span class="built_in">String</span> <span class="keyword">get</span> name =&gt; <span class="string">&#x27;Analysis&#x27;</span>; <span class="comment">// 插件名称</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@override</span></span><br><span class="line">    <span class="built_in">String</span> <span class="keyword">get</span> displayName =&gt; <span class="string">&#x27;Analysis&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@override</span></span><br><span class="line">    <span class="keyword">void</span> onTrigger() &#123;&#125; <span class="comment">// 点击插件面板图标时调用</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@override</span></span><br><span class="line">    ImageProvider&lt;<span class="built_in">Object</span>&gt; <span class="keyword">get</span> iconImageProvider =&gt;</span><br><span class="line">        MemoryImage(base64Decode(iconData)); <span class="comment">// 插件图标</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>在工程中引入自定义插件</p><ol><li><p>修改 <code>pubspec.yaml</code>，添加依赖</p> <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dev_dependencies:</span></span><br><span class="line">  <span class="attr">flutter_ume_kit_analysis:</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">path/to/flutter_ume_kit_analysis</span></span><br></pre></td></tr></table></figure></li><li><p>执行 <code>flutter pub get</code></p></li><li><p>引入包</p> <figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter_ume_kit_analysis/flutter_ume_kit_analysis.dart&#x27;</span>;</span><br></pre></td></tr></table></figure></li></ol></li><li><p>在工程中注册插件</p> <figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (kDebugMode) &#123;</span><br><span class="line">  PluginManager.instance</span><br><span class="line">    ..register(Analysis());</span><br><span class="line">  runApp(injectUMEWidget(child: MyApp(), enable: <span class="keyword">true</span>));</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  runApp(MyApp());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>运行代码</p></li></ol>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;flutter-ume-自定义插件&quot;&gt;&lt;a href=&quot;#flutter-ume-自定义插件&quot; class=&quot;headerlink&quot; title=&quot;flutter ume 自定义插件&quot;&gt;&lt;/a&gt;flutter ume 自定义插件&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;flutter create -t package flutter_ume_kit_analysis&lt;/code&gt; 创建一个插件包&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;修改插件包的 &lt;code&gt;pubspec.yaml&lt;/code&gt;，添加依赖&lt;/p&gt;
 &lt;figure class=&quot;highlight yaml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;dependencies:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;flutter_ume:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;#x27;&amp;gt;=0.2.0 &amp;lt;0.3.0&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/li&gt;
&lt;/ol&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>Android Tools Namespace</title>
    <link href="http://qomg.github.io/2021/11/10/android-tools-namespace/"/>
    <id>http://qomg.github.io/2021/11/10/android-tools-namespace/</id>
    <published>2021-11-10T07:02:44.000Z</published>
    <updated>2023-02-09T06:59:41.884Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Tools命名空间属性说明"><a href="#Tools命名空间属性说明" class="headerlink" title="Tools命名空间属性说明"></a>Tools命名空间属性说明</h1><p><a href="https://developer.android.google.cn/studio/write/tool-attributes?hl=zh-cn">官方讲解</a></p><h2 id="tools-node"><a href="#tools-node" class="headerlink" title="tools:node"></a>tools:node</h2><p>tools:node=”merge” 全部合并<br>tools:node=”merge-only-attributes” 仅合并属性，内部节点移除<br>tools:node=”remove” 移除该节点<br>tools:node=”removeAll” 移除同一个父节点下所有同类型节点<br>tools:node=”replace” 完全替换<br>tools:node=”strict” 不匹配，构建失败</p><span id="more"></span><h2 id="tools-remove"><a href="#tools-remove" class="headerlink" title="tools:remove"></a>tools:remove</h2><p>tools:remove=”attr1,attr2” 比如 tools:remove=”android:theme,android:windowSoftInputMode”</p><h2 id="tools-strict"><a href="#tools-strict" class="headerlink" title="tools:strict"></a>tools:strict</h2><p>tools:strict=”attr1,attr2” 比如 tools:strict=”android:screenOrientation”</p><h2 id="tools-selector"><a href="#tools-selector" class="headerlink" title="tools:selector"></a>tools:selector</h2><p>tools:selector=”packageName” 选择器，结合其他tools标记使用，比如</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">permission</span> <span class="attr">android:name</span>=<span class="string">&quot;com.example.MY_PERMISSION_0&quot;</span> </span></span><br><span class="line"><span class="tag">                      <span class="attr">tools:node</span>=<span class="string">&quot;remove&quot;</span> </span></span><br><span class="line"><span class="tag">                      <span class="attr">tools:selector</span>=<span class="string">&quot;com.example.submodule.p1&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><h2 id="tools-overrideLibrary"><a href="#tools-overrideLibrary" class="headerlink" title="tools:overrideLibrary"></a>tools:overrideLibrary</h2><p>tools:overrideLibrary 覆盖 </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-sdk</span> <span class="attr">tools:overrideLibrary</span>=<span class="string">&quot;com.example.lib1, com.example.lib2&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><h2 id="tools-ignore"><a href="#tools-ignore" class="headerlink" title="tools:ignore"></a>tools:ignore</h2><p>tools:ignore=”attr1,attr2” 忽略属性</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">string</span> <span class="attr">name</span>=<span class="string">&quot;show_all_apps&quot;</span> <span class="attr">tools:ignore</span>=<span class="string">&quot;MissingTranslation&quot;</span>&gt;</span>All<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ImageView</span> <span class="attr">tools:ignore</span>=<span class="string">&quot;contentDescription&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">FrameLayout</span> <span class="attr">tools:ignore</span>=<span class="string">&quot;all&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">FrameLayout</span> <span class="attr">tools:ignore</span>=<span class="string">&quot;UnusedResources,NewApi,StringFormatInvalid&quot;</span> /&gt;</span> 根节点添加，如果该xml资源未使用不提示</span><br></pre></td></tr></table></figure><h2 id="tools-targetApi"><a href="#tools-targetApi" class="headerlink" title="tools:targetApi"></a>tools:targetApi</h2><p>tools:targetApi=”14” tools:targetApi=”ice_cream_sandwich” 目标平台版本</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">GridLayout</span> <span class="attr">tools:targetApi</span>=<span class="string">&quot;ice_cream_sandwich&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><h2 id="tools-locale"><a href="#tools-locale" class="headerlink" title="tools:locale"></a>tools:locale</h2><p>tools:locale 指定时区，只能加给resources节点</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resources</span> <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span> <span class="attr">tools:locale</span>=<span class="string">&quot;zh&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="tools-shrinkMode"><a href="#tools-shrinkMode" class="headerlink" title="tools:shrinkMode"></a>tools:shrinkMode</h2><p>tools:shrinkMode 指定资源压缩模式，只能加给resources节点，需要build.gradle中android.buildTypes.release.shrinkResources = true<br>tools:shrinkMode=”safe”默认<br>tools:shrinkMode=”strict”<br><code>res/raw/keep.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resources</span> <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span> <span class="attr">tools:shrinkMode</span>=<span class="string">&quot;strict&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="tools-keep-amp-tools-discard"><a href="#tools-keep-amp-tools-discard" class="headerlink" title="tools:keep &amp; tools:discard"></a>tools:keep &amp; tools:discard</h2><p>以下两个结合tools:shrinkMode=”strict”使用<br>tools:keep=”references” 保留 tools:keep=”@layout/list_item_*,@menu/main_menus”<br>tools:discard=”references”  移除 tools:discard=”@layout/unused*”</p><h2 id="tools-parentTag"><a href="#tools-parentTag" class="headerlink" title="tools:parentTag"></a>tools:parentTag</h2><p>tools:parentTag 父标签类型，结合merge使用</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">merge</span> <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">tools:parentTag</span>=<span class="string">&quot;android.widget.LinearLayout&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><h2 id="tools-context"><a href="#tools-context" class="headerlink" title="tools:context"></a>tools:context</h2><p>tools:context=”com.example.XXXActivity” 指定当前关联上下文，只能在根节点添加</p><h2 id="list"><a href="#list" class="headerlink" title="list"></a>list</h2><p>tools:itemCount=”20”<br>tools:listheader=”@layout/list_header_0” 指定表头，仅AdapterView有效<br>tools:listitem=”@layout/list_item_0”<br>tools:listfooter=”@layout/list_footer_0” 指定表尾，仅AdapterView有效</p><h2 id="tools-layout"><a href="#tools-layout" class="headerlink" title="tools:layout"></a>tools:layout</h2><p>tools:layout=”@layout/some_layout”</p><h2 id="tools-showIn"><a href="#tools-showIn" class="headerlink" title="tools:showIn"></a>tools:showIn</h2><p>tools:showIn=”@layout/some_parent_layout” 在哪个布局中展示，通过include引入的布局的根节点添加</p><h2 id="tools-menu"><a href="#tools-menu" class="headerlink" title="tools:menu"></a>tools:menu</h2><p>tools:menu=”menu1,menu2” 指定工具栏菜单，根节点添加</p><h2 id="tools-actionBarNavMode"><a href="#tools-actionBarNavMode" class="headerlink" title="tools:actionBarNavMode"></a>tools:actionBarNavMode</h2><p>ActionBar显示模式<br>tools:actionBarNavMode=”standard”<br>tools:actionBarNavMode=”tabs”<br>tools:actionBarNavMode=”list”</p><h2 id="NumberPicker"><a href="#NumberPicker" class="headerlink" title="NumberPicker"></a>NumberPicker</h2><p>NumberPicker的最大最小值<br>tools:minValue<br>tools:maxValue</p><h2 id="DrawerLayout"><a href="#DrawerLayout" class="headerlink" title="DrawerLayout"></a>DrawerLayout</h2><p>tools:openDrawer=”start”<br>tools:openDrawer=”end”<br>tools:openDrawer=”left”<br>tools:openDrawer=”right”<br>&lt;androidx.drawerlayout.DrawerLayout tools:openDrawer=”end”/&gt;</p><h2 id="TextView"><a href="#TextView" class="headerlink" title="TextView"></a>TextView</h2><p>tools:text<br>@tools:sample/*<br><TextView tools:text="@tools:sample/lorem"/></p><h2 id="tools-sample"><a href="#tools-sample" class="headerlink" title="@tools:sample"></a>@tools:sample</h2><p>@tools:sample/full_names<br>@tools:sample/first_names<br>@tools:sample/last_names<br>@tools:sample/cities<br>@tools:sample/us_zipcodes<br>@tools:sample/us_phones<br>@tools:sample/lorem/random<br>@tools:sample/date/day_of_week<br>@tools:sample/date/ddmmyy<br>@tools:sample/date/mmddyy<br>@tools:sample/date/hhmm<br>@tools:sample/date/hhmmss<br>@tools:sample/avatars – drawables<br>@tools:sample/backgrounds/scenic – backgrounds</p><h2 id="sampledata"><a href="#sampledata" class="headerlink" title="sampledata"></a>sampledata</h2><p>app/sampledata/names<br><TextView tools:text="@sample/names"/></p><h2 id="ImageView"><a href="#ImageView" class="headerlink" title="ImageView"></a>ImageView</h2><p>tools:src<br>app/sampledata/avatars<br>app/sampledata/avatars/avatar_1.xml<br>app/sampledata/avatars/avatar_2.xml<br>app/sampledata/avatars/avatar_3.xml<br>app/sampledata/avatars/avatar_4.xml<br><ImageView tools:src="@sample/avatars"/></p><p><code>app/sampledata/users.json</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;city&quot;</span>: <span class="string">&quot;Hemel Hempstead, Hertfordshire, UK&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;avatar&quot;</span>: <span class="string">&quot;@sample/avatars&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;city&quot;</span>: <span class="string">&quot;Brokenwind, Aberdeenshire, UK&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;avatar&quot;</span>: <span class="string">&quot;@sample/avatars&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;city&quot;</span>: <span class="string">&quot;Málaga, España&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;avatar&quot;</span>: <span class="string">&quot;@sample/avatars&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;city&quot;</span>: <span class="string">&quot;Batchelors Bump, Essex, UK&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;avatar&quot;</span>: <span class="string">&quot;@sample/avatars&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">TextView</span> <span class="attr">tools:text</span>=<span class="string">&quot;@sample/users.json/data/city&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ImageView</span> <span class="attr">tools:text</span>=<span class="string">&quot;@sample/users.json/data/avatar&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Tools命名空间属性说明&quot;&gt;&lt;a href=&quot;#Tools命名空间属性说明&quot; class=&quot;headerlink&quot; title=&quot;Tools命名空间属性说明&quot;&gt;&lt;/a&gt;Tools命名空间属性说明&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://developer.android.google.cn/studio/write/tool-attributes?hl=zh-cn&quot;&gt;官方讲解&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;tools-node&quot;&gt;&lt;a href=&quot;#tools-node&quot; class=&quot;headerlink&quot; title=&quot;tools:node&quot;&gt;&lt;/a&gt;tools:node&lt;/h2&gt;&lt;p&gt;tools:node=”merge” 全部合并&lt;br&gt;tools:node=”merge-only-attributes” 仅合并属性，内部节点移除&lt;br&gt;tools:node=”remove” 移除该节点&lt;br&gt;tools:node=”removeAll” 移除同一个父节点下所有同类型节点&lt;br&gt;tools:node=”replace” 完全替换&lt;br&gt;tools:node=”strict” 不匹配，构建失败&lt;/p&gt;</summary>
    
    
    
    <category term="Android" scheme="http://qomg.github.io/categories/Android/"/>
    
    
    <category term="tools:ns" scheme="http://qomg.github.io/tags/tools-ns/"/>
    
  </entry>
  
  <entry>
    <title>Android Annotation</title>
    <link href="http://qomg.github.io/2021/11/10/Android-Annotation/"/>
    <id>http://qomg.github.io/2021/11/10/Android-Annotation/</id>
    <published>2021-11-10T06:59:52.000Z</published>
    <updated>2023-02-09T06:59:57.363Z</updated>
    
    <content type="html"><![CDATA[<p>Android注解收集</p><p><a href="https://developer.android.google.cn/studio/write/annotations?hl=zh-cn">官方说明</a></p><p>@Nullable<br>@NonNull</p><span id="more"></span><p>@StringRes<br>@IdRes<br>@DrawableRes<br>@ColorRes<br>@DimenRes<br>@InterpolatorRes<br>@LayoutRes<br>@AnyRes</p><p>@ColorInt</p><p>@StringDef<br>@IntDef</p><p>@MainThread<br>@UiThread<br>@WorkerThread<br>@BinderThread<br>@AnyThread</p><p>@IntRange<br>@FloatRange<br>@Size</p><p>@TargeApi<br>@RequiresPermission<br>@RequiresPermission.Read<br>@RequiresPermission.Write</p><p>@Throws</p><p>@SdkConstant</p><p>@CheckResult<br>@CallSuper</p><p>@Keep</p><p>@VisibleForTesting</p><p>@RestrictTo</p><p>示例</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.support.<span class="keyword">annotation</span>.IntDef</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"><span class="comment">// Define the list of accepted constants and declare the NavigationMode annotation</span></span><br><span class="line"><span class="meta">@Retention(AnnotationRetention.SOURCE)</span></span><br><span class="line"><span class="meta">@IntDef(NAVIGATION_MODE_STANDARD, NAVIGATION_MODE_LIST, NAVIGATION_MODE_TABS)</span></span><br><span class="line"><span class="keyword">annotation</span> <span class="class"><span class="keyword">class</span> <span class="title">NavigationMode</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Declare the constants</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">val</span> NAVIGATION_MODE_STANDARD = <span class="number">0</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">val</span> NAVIGATION_MODE_LIST = <span class="number">1</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">val</span> NAVIGATION_MODE_TABS = <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">ActionBar</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Decorate the target methods with the annotation</span></span><br><span class="line">    <span class="comment">// Attach the annotation</span></span><br><span class="line">    <span class="meta">@get:NavigationMode</span></span><br><span class="line">    <span class="meta">@setparam:NavigationMode</span></span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">var</span> navigationMode: <span class="built_in">Int</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SdkConstant(SdkConstantType.ACTIVITY_INTENT_ACTION)</span></span><br><span class="line"><span class="meta">@RequiresPermission(Manifest.permission.CALL_PHONE)</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">val</span> ACTION_CALL = <span class="string">&quot;android.intent.action.CALL&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@CheckResult(suggest = <span class="meta-string">&quot;#enforcePermission(String,int,int,String)&quot;</span>)</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="function"><span class="keyword">fun</span> <span class="title">checkPermission</span><span class="params">(permission: <span class="type">String</span>, pid: <span class="type">Int</span>, uid: <span class="type">Int</span>)</span></span>: <span class="built_in">Int</span></span><br></pre></td></tr></table></figure><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 对public方法或属性进行注解，限制访问</span></span><br><span class="line"><span class="meta">@RestrictTo(RestrictTo.Scope.SUBCLASSES)</span></span><br><span class="line"><span class="meta">@RestrictTo(RestrictTo.Scope.GROUP_ID)</span></span><br><span class="line"><span class="meta">@RestrictTo(RestrictTo.Scope.TESTS)</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;Android注解收集&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://developer.android.google.cn/studio/write/annotations?hl=zh-cn&quot;&gt;官方说明&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;@Nullable&lt;br&gt;@NonNull&lt;/p&gt;</summary>
    
    
    
    <category term="Android" scheme="http://qomg.github.io/categories/Android/"/>
    
    
    <category term="Annotation" scheme="http://qomg.github.io/tags/Annotation/"/>
    
  </entry>
  
  <entry>
    <title>Ml-Kit</title>
    <link href="http://qomg.github.io/2021/11/10/ml-kit/"/>
    <id>http://qomg.github.io/2021/11/10/ml-kit/</id>
    <published>2021-11-10T06:56:26.000Z</published>
    <updated>2023-02-09T07:00:13.603Z</updated>
    
    <content type="html"><![CDATA[<h2 id="添加依赖"><a href="#添加依赖" class="headerlink" title="添加依赖"></a>添加依赖</h2><p>rootDir/build.gradle</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">allprojects</span> &#123;</span><br><span class="line">    <span class="keyword">repositories</span> &#123;</span><br><span class="line">        ...</span><br><span class="line">        google &#123; url <span class="string">&#x27;https://maven.aliyun.com/repository/google&#x27;</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><span id="more"></span><p>module/build.gradle </p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    <span class="comment">// Barcode model</span></span><br><span class="line">    api <span class="string">&#x27;com.google.mlkit:barcode-scanning:17.0.0&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="扫码工具类"><a href="#扫码工具类" class="headerlink" title="扫码工具类"></a>扫码工具类</h2><p>BarcodeScannerProcessor.kt</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.graphics.Bitmap</span><br><span class="line"><span class="keyword">import</span> android.util.Log</span><br><span class="line"><span class="keyword">import</span> com.google.mlkit.vision.barcode.Barcode</span><br><span class="line"><span class="keyword">import</span> com.google.mlkit.vision.barcode.BarcodeScanner</span><br><span class="line"><span class="keyword">import</span> com.google.mlkit.vision.barcode.BarcodeScanning</span><br><span class="line"><span class="keyword">import</span> com.google.mlkit.vision.common.InputImage</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BarcodeScannerProcessor</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> barcodeScanner: BarcodeScanner = BarcodeScanning.getClient()</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> executor = Executors.newSingleThreadExecutor()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">stop</span><span class="params">()</span></span> &#123;</span><br><span class="line">        barcodeScanner.close()</span><br><span class="line">        executor.shutdown()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">processBitmap</span><span class="params">(bitmap: <span class="type">Bitmap</span>, onNext: (<span class="type">barcode</span>: <span class="type">Barcode</span>?) -&gt; <span class="type">Unit</span>)</span></span> &#123;</span><br><span class="line">        <span class="keyword">val</span> image = InputImage.fromBitmap(bitmap, <span class="number">0</span>)</span><br><span class="line">        barcodeScanner.process(image).continueWith(executor) &#123;</span><br><span class="line">            <span class="keyword">val</span> barcodes = it.result</span><br><span class="line">            <span class="keyword">if</span> (barcodes.isEmpty()) &#123;</span><br><span class="line">                Log.v(<span class="string">&quot;BarcodeScanner&quot;</span>, <span class="string">&quot;No barcode has been detected&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            onNext(barcodes.firstOrNull())</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> BarcodeScannerProcessor processor = <span class="keyword">new</span> BarcodeScannerProcessor();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">decodeByMlkit</span><span class="params">(Bitmap bitmap)</span> </span>&#123;</span><br><span class="line">processor.processBitmap(bitmap, (barcode) -&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (barcode != <span class="keyword">null</span>) &#123;</span><br><span class="line">    <span class="comment">// String text = barcode.getRawValue()</span></span><br><span class="line">    <span class="comment">// byte[] bytes = barcode.getRawBytes()</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onScanDone</span><span class="params">()</span> </span>&#123;</span><br><span class="line">processor.stop();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><p>TODO 待补充</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;添加依赖&quot;&gt;&lt;a href=&quot;#添加依赖&quot; class=&quot;headerlink&quot; title=&quot;添加依赖&quot;&gt;&lt;/a&gt;添加依赖&lt;/h2&gt;&lt;p&gt;rootDir/build.gradle&lt;/p&gt;
&lt;figure class=&quot;highlight gradle&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;allprojects&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;repositories&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        google &amp;#123; url &lt;span class=&quot;string&quot;&gt;&amp;#x27;https://maven.aliyun.com/repository/google&amp;#x27;&lt;/span&gt; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Android" scheme="http://qomg.github.io/categories/Android/"/>
    
    
    <category term="mlkit" scheme="http://qomg.github.io/tags/mlkit/"/>
    
  </entry>
  
  <entry>
    <title>Gitlab - Use Emoji in Commit Message</title>
    <link href="http://qomg.github.io/2021/11/10/gitlab-emoji/"/>
    <id>http://qomg.github.io/2021/11/10/gitlab-emoji/</id>
    <published>2021-11-10T06:13:53.000Z</published>
    <updated>2023-02-09T07:01:07.031Z</updated>
    
    <content type="html"><![CDATA[<h2 id="commit-message-格式如下"><a href="#commit-message-格式如下" class="headerlink" title="commit message 格式如下"></a>commit message 格式如下</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">:emoji: 主题</span><br><span class="line"></span><br><span class="line">提交信息主体</span><br><span class="line"></span><br><span class="line">Ref &lt;###&gt;</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><p>初次提交</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -m <span class="string">&quot;:tada: Initialize Repo&quot;</span></span><br></pre></td></tr></table></figure><h2 id="emoji说明"><a href="#emoji说明" class="headerlink" title="emoji说明"></a>emoji说明</h2><table><thead><tr><th>emoji</th><th>emoji 代码</th><th>commit 说明</th></tr></thead><tbody><tr><td>:art: (调色板)</td><td>:art:</td><td>改进代码结构/代码格式</td></tr><tr><td>:fire: (火焰)</td><td>:fire:</td><td>移除代码或文件</td></tr><tr><td>:bug: (bug)</td><td>:bug:</td><td>修复 bug</td></tr><tr><td>:ambulance: (急救车)</td><td>:ambulance:</td><td>重要补丁</td></tr><tr><td>:sparkles: (火花)</td><td>:sparkles:</td><td>引入新功能</td></tr><tr><td>:memo: (备忘录)</td><td>:memo:</td><td>撰写文档</td></tr><tr><td>:rocket: (火箭)</td><td>:rocket:</td><td>部署功能</td></tr><tr><td>:lipstick: (口红)</td><td>:lipstick:</td><td>更新 UI 和样式文件</td></tr><tr><td>:tada: (庆祝)</td><td>:tada:</td><td>初次提交</td></tr><tr><td>:white_check_mark: (白色复选框)</td><td>:white_check_mark:</td><td>增加测试</td></tr><tr><td>:lock: (锁)</td><td>:lock:</td><td>修复安全问题</td></tr><tr><td>:apple: (苹果)</td><td>:apple:</td><td>修复 macOS 下的问题</td></tr><tr><td>:penguin: (企鹅)</td><td>:penguin:</td><td>修复 Linux 下的问题</td></tr><tr><td>:checkered_flag: (旗帜)</td><td>:checked_flag:</td><td>修复 Windows 下的问题</td></tr><tr><td>:bookmark: (书签)</td><td>:bookmark:</td><td>发行/版本标签</td></tr><tr><td>:rotating_light: (警车灯)</td><td>:rotating_light:</td><td>移除 linter 警告</td></tr><tr><td>:construction: (施工)</td><td>:construction:</td><td>工作进行中</td></tr><tr><td>:green_heart: (绿心)</td><td>:green_heart:</td><td>修复 CI 构建问题</td></tr><tr><td>:arrow_down: (下降箭头)</td><td>:arrow_down:</td><td>降级依赖</td></tr><tr><td>:arrow_up: (上升箭头)</td><td>:arrow_up:</td><td>升级依赖</td></tr><tr><td>:construction_worker: (工人)</td><td>:construction_worker:</td><td>添加 CI 构建系统</td></tr><tr><td>:chart_with_upwards_trend: (上升趋势图)</td><td>:chart_with_upwards_trend:</td><td>添加分析或跟踪代码</td></tr><tr><td>:hammer: (锤子)</td><td>:hammer:</td><td>重大重构</td></tr><tr><td>:heavy_minus_sign: (减号)</td><td>:heavy_minus_sign:</td><td>减少一个依赖</td></tr><tr><td>:whale: (鲸鱼)</td><td>:whale:</td><td>Docker 相关工作</td></tr><tr><td>:heavy_plus_sign: (加号)</td><td>:heavy_plug_sign:</td><td>增加一个依赖</td></tr><tr><td>:wrench: (扳手)</td><td>:wrench:</td><td>修改配置文件</td></tr><tr><td>:globe_with_meridians: (地球)</td><td>:globe_with_meridians:</td><td>国际化与本地化</td></tr><tr><td>:pencil2: (铅笔)</td><td>:pencil2:</td><td>修复 typo</td></tr></tbody></table>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;commit-message-格式如下&quot;&gt;&lt;a href=&quot;#commit-message-格式如下&quot; class=&quot;headerlink&quot; title=&quot;commit message 格式如下&quot;&gt;&lt;/a&gt;commit message 格式如下&lt;/h2&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;:emoji: 主题&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;提交信息主体&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Ref &amp;lt;###&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="gitlab" scheme="http://qomg.github.io/categories/gitlab/"/>
    
    
    <category term="emoji" scheme="http://qomg.github.io/tags/emoji/"/>
    
  </entry>
  
  <entry>
    <title>SQL Server UUID</title>
    <link href="http://qomg.github.io/2020/12/30/SQLServerUUID/"/>
    <id>http://qomg.github.io/2020/12/30/SQLServerUUID/</id>
    <published>2020-12-29T16:00:00.000Z</published>
    <updated>2023-04-16T07:53:23.074Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">function</span> [dbo].uuid(<span class="variable">@id</span> <span class="type">varchar</span>(<span class="number">36</span>))</span><br><span class="line"><span class="keyword">returns</span> <span class="type">varchar</span>(<span class="number">48</span>)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"> <span class="keyword">declare</span> <span class="variable">@ret</span> <span class="type">varchar</span>(<span class="number">48</span>)</span><br><span class="line"> <span class="keyword">select</span> <span class="variable">@ret</span><span class="operator">=</span>format(getdate(),<span class="string">&#x27;yyyyMMddHHmmss&#x27;</span>)<span class="operator">+</span><span class="built_in">lower</span>(replace(<span class="variable">@id</span>,<span class="string">&#x27;-&#x27;</span>,<span class="string">&#x27;&#x27;</span>))</span><br><span class="line"> <span class="keyword">return</span> <span class="variable">@ret</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> dbo.uuid(NEWID())</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;</summary>
      
    
    
    
    <category term="SQL Server" scheme="http://qomg.github.io/categories/SQL-Server/"/>
    
    
    <category term="UUID" scheme="http://qomg.github.io/tags/UUID/"/>
    
  </entry>
  
  <entry>
    <title>Docker Run MSSQL Server Linux</title>
    <link href="http://qomg.github.io/2018/11/14/docker-run-mssql-server-linux/"/>
    <id>http://qomg.github.io/2018/11/14/docker-run-mssql-server-linux/</id>
    <published>2018-11-14T10:01:00.000Z</published>
    <updated>2023-02-09T07:01:20.979Z</updated>
    
    <content type="html"><![CDATA[<h2 id="拉取镜像"><a href="#拉取镜像" class="headerlink" title="拉取镜像"></a>拉取镜像</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull microsoft/mssql-server-linux</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h2><p><strong>dont modify below string &lt;YourStrong!PasswOrd&gt;</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run -e <span class="string">&#x27;ACCEPT_EULA=Y&#x27;</span> -e <span class="string">&#x27;SA_PASSWORD=&lt;YourStrong!PasswOrd&gt;&#x27;</span> \</span><br><span class="line">-p 1433:1433 –name docker-sql-server -d microsoft/mssql-server-linux</span><br></pre></td></tr></table></figure><h2 id="修改密码"><a href="#修改密码" class="headerlink" title="修改密码"></a>修改密码</h2><p><strong>you should replace YourNewStrong!PasswOrd with your password</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it docker-sql-server /opt/mssql-tools/bin/sqlcmd \</span><br><span class="line">-S localhost -U SA -P <span class="string">&#x27;&lt;YourStrong!PasswOrd&gt;&#x27;</span> \</span><br><span class="line">-Q <span class="string">&#x27;ALTER LOGIN SA WITH PASSWORD=&quot;YourNewStrong!PasswOrd&quot;&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="重启-启动"><a href="#重启-启动" class="headerlink" title="重启/启动"></a><del>重启/启动</del></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker restart docker-sql-server</span><br></pre></td></tr></table></figure><h2 id="检查状态"><a href="#检查状态" class="headerlink" title="检查状态"></a>检查状态</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps -a</span><br></pre></td></tr></table></figure><h2 id="访问数据库"><a href="#访问数据库" class="headerlink" title="访问数据库"></a>访问数据库</h2><p>connect server with sql operations studio or navicat</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;拉取镜像&quot;&gt;&lt;a href=&quot;#拉取镜像&quot; class=&quot;headerlink&quot; title=&quot;拉取镜像&quot;&gt;&lt;/a&gt;拉取镜像&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;docker pull microsoft/mssql-server-linux&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    
  </entry>
  
</feed>
